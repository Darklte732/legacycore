(()=>{var e={};e.id=3592,e.ids=[3592],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},46145:e=>{"use strict";e.exports=require("@supabase/supabase-js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},28891:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(23898),r(46431),r(48385),r(12523);var s=r(23191),a=r(88716),o=r(37922),n=r.n(o),i=r(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["manager",{children:["ai-chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,23898)),"C:\\Users\\Ronel\\Downloads\\New folder (5)\\legacycore\\legacy-core\\src\\app\\manager\\ai-chat\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,46431)),"C:\\Users\\Ronel\\Downloads\\New folder (5)\\legacycore\\legacy-core\\src\\app\\manager\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,48385)),"C:\\Users\\Ronel\\Downloads\\New folder (5)\\legacycore\\legacy-core\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\Ronel\\Downloads\\New folder (5)\\legacycore\\legacy-core\\src\\app\\not-found.tsx"]}],d=["C:\\Users\\Ronel\\Downloads\\New folder (5)\\legacycore\\legacy-core\\src\\app\\manager\\ai-chat\\page.tsx"],u="/manager/ai-chat/page",g={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/manager/ai-chat/page",pathname:"/manager/ai-chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},20711:(e,t,r)=>{Promise.resolve().then(r.bind(r,26651))},5769:(e,t,r)=>{Promise.resolve().then(r.bind(r,7705))},26651:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var s=r(10326),a=r(17577),o=r(22665);r(90376);var n=r(46226),i=r(58234),l=r(51996),c=r(88307),d=r(32933),u=r(94019),g=r(98091);let m=({chats:e=[],activeChat:t=null,onSelectChat:r=()=>{},onCreateNewChat:o=()=>{},onDeleteChat:m=()=>{},loading:h=!1})=>{let{user:x}=(0,i.E)(),[p,f]=(0,a.useState)(""),[y,b]=(0,a.useState)(null),[w,v]=(0,a.useState)(null),j=p?e.filter(e=>e.title.toLowerCase().includes(p.toLowerCase())):e,N=e=>{let t=new Date(e),r=new Date;if(t.toDateString()===r.toDateString())return"Today";let s=new Date(r);if(s.setDate(r.getDate()-1),t.toDateString()===s.toDateString())return"Yesterday";let a=new Date(r);return(a.setDate(r.getDate()-7),t>a)?t.toLocaleDateString(void 0,{weekday:"long"}):t.toLocaleDateString(void 0,{month:"short",day:"numeric"})};return(0,s.jsxs)("aside",{className:"flex h-screen flex-col bg-gradient-to-b from-gray-900 via-gray-850 to-gray-800 text-white w-full shadow-xl",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-indigo-900/40 bg-gradient-to-br from-gray-900 to-indigo-900/40",children:[(0,s.jsxs)("div",{className:"flex items-center mb-5",children:[s.jsx("div",{className:"w-11 h-11 mr-3 relative flex-shrink-0",children:s.jsx(n.default,{src:"/logo.png",alt:"LegacyCore Logo",width:44,height:44,className:"object-contain"})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"font-bold text-xl text-white",children:"Manager AI"}),s.jsx("p",{className:"text-xs text-indigo-200/70 font-light",children:"Powered by LegacyCore"})]})]}),(0,s.jsxs)("button",{onClick:o,className:"w-full flex items-center justify-center py-3 px-4 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-md transition-all duration-200 ease-in-out transform hover:scale-[1.02] hover:shadow-lg border border-indigo-500/30",children:[s.jsx(l.Z,{size:18,className:"mr-2"}),s.jsx("span",{className:"font-medium",children:"New Chat"})]})]}),x&&s.jsx("div",{className:"border-b border-indigo-900/20 p-4 bg-gray-800/40",children:(0,s.jsxs)("div",{className:"flex items-center",children:[x.avatar_url?s.jsx(n.default,{src:x.avatar_url,alt:x.user_metadata?.name||"User",width:38,height:38,className:"rounded-full mr-3 ring-2 ring-indigo-500/30 border border-white/10"}):s.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mr-3 shadow-md border border-white/10",children:s.jsx("span",{className:"text-sm font-semibold text-white",children:(x.user_metadata?.name||x.email||"U").charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"text-sm truncate",children:[s.jsx("p",{className:"font-semibold text-white",children:x.user_metadata?.name||"Manager"}),s.jsx("p",{className:"text-gray-300 text-xs truncate",children:x.email})]})]})}),s.jsx("div",{className:"p-4 border-b border-indigo-900/20 bg-gray-800/20",children:(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(c.Z,{size:16,className:"text-indigo-300/70"})}),s.jsx("input",{type:"text",placeholder:"Search chats...",className:"block w-full pl-10 pr-3 py-2.5 rounded-lg bg-gray-700/60 border border-indigo-500/20 focus:ring-2 focus:ring-indigo-500/70 focus:border-indigo-500 focus:outline-none text-sm transition-all duration-200 text-white shadow-inner",value:p,onChange:e=>f(e.target.value)})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-indigo-600/40 scrollbar-track-gray-800/40",children:h?(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-700/70 rounded mb-3"}),s.jsx("div",{className:"h-4 bg-gray-700/70 rounded w-5/6 mb-3"}),s.jsx("div",{className:"h-4 bg-gray-700/70 rounded w-4/6"})]}),(0,s.jsxs)("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-700/70 rounded mb-3"}),s.jsx("div",{className:"h-4 bg-gray-700/70 rounded w-5/6 mb-3"}),s.jsx("div",{className:"h-4 bg-gray-700/70 rounded w-4/6"})]})]}):0===j.length?(0,s.jsxs)("div",{className:"p-6 text-center text-gray-400",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-800/80 mb-4",children:s.jsx(c.Z,{size:24,className:"text-indigo-400"})}),s.jsx("p",{className:"text-sm font-medium text-gray-300",children:p?"No chats match your search":"No chats yet"}),s.jsx("p",{className:"text-xs text-indigo-300/50 mt-1",children:p?"Try another search term":"Start a new conversation"})]}):s.jsx("div",{className:"divide-y divide-indigo-900/10",children:j.map(e=>s.jsx("div",{className:`relative ${t===e.id?"bg-indigo-600/20 border-l-4 border-l-indigo-500":"hover:bg-gray-700/40 border-l-4 border-l-transparent"} transition-all duration-200 cursor-pointer`,onMouseEnter:()=>b(e.id),onMouseLeave:()=>{b(null),w||v(null)},children:(0,s.jsxs)("div",{className:"px-4 py-3.5",onClick:()=>r(e.id),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"font-medium text-sm truncate text-white",style:{maxWidth:"80%"},children:e.title||"New Chat"}),s.jsx("span",{className:"text-xs text-indigo-300/70",children:N(e.createdAt)})]}),s.jsx("p",{className:"text-xs text-gray-400 truncate mt-1",children:e.messages.length>0?e.messages[e.messages.length-1].content.substring(0,50)+(e.messages[e.messages.length-1].content.length>50?"...":""):"No messages yet"}),(y===e.id||w===e.id)&&s.jsx("div",{className:"absolute top-2 right-2",children:w===e.id?(0,s.jsxs)("div",{className:"flex items-center bg-gray-900/90 rounded-lg overflow-hidden shadow-lg border border-gray-700/50",children:[(0,s.jsxs)("button",{onClick:t=>{t.stopPropagation(),m(e.id),v(null)},className:"px-2 py-1.5 text-xs bg-red-600 hover:bg-red-700 text-white flex items-center",title:"Confirm Delete",children:[s.jsx(d.Z,{size:14,className:"mr-1"}),"Delete"]}),(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),v(null)},className:"px-2 py-1.5 text-xs bg-gray-700 hover:bg-gray-800 text-white flex items-center",title:"Cancel",children:[s.jsx(u.Z,{size:14,className:"mr-1"}),"Cancel"]})]}):s.jsx("button",{onClick:t=>{t.stopPropagation(),v(e.id)},className:"p-1.5 rounded-full bg-gray-800/80 hover:bg-red-600/80 text-gray-400 hover:text-white transition-all duration-200",title:"Delete Chat",children:s.jsx(g.Z,{size:14})})})]})},e.id))})}),s.jsx("div",{className:"p-3 text-center border-t border-indigo-900/30 text-xs text-gray-500 bg-gradient-to-t from-gray-900 to-gray-800/70",children:s.jsx("p",{children:"LegacyCore Manager AI v1.0"})})]})},h=[{quote:"The best time to plant a tree was 20 years ago. The second best time is now.",author:"Chinese Proverb",message:"Every client interaction is an opportunity to build your business for the future."},{quote:"Success is not final, failure is not fatal: It is the courage to continue that counts.",author:"Winston Churchill",message:"Insurance is about resilience. Your clients look to you for guidance through uncertainty."},{quote:"Your work is going to fill a large part of your life, and the only way to be truly satisfied is to do what you believe is great work.",author:"Steve Jobs",message:"When you protect families and businesses, you're doing truly meaningful work."},{quote:"The future belongs to those who believe in the beauty of their dreams.",author:"Eleanor Roosevelt",message:"Help your clients protect their dreams and secure their future."},{quote:"Don't watch the clock; do what it does. Keep going.",author:"Sam Levenson",message:"Consistency in client outreach leads to long-term success in insurance."},{quote:"The only limit to our realization of tomorrow will be our doubts of today.",author:"Franklin D. Roosevelt",message:"Each conversation is a step toward securing someone's future."},{quote:"Believe you can and you're halfway there.",author:"Theodore Roosevelt",message:"Your confidence in your products gives clients peace of mind."},{quote:"The best preparation for tomorrow is doing your best today.",author:"H. Jackson Brown, Jr.",message:"The right planning today prevents emergencies tomorrow."},{quote:"Your attitude, not your aptitude, will determine your altitude.",author:"Zig Ziglar",message:"A positive approach to client service will elevate your insurance practice."},{quote:"The key is not to prioritize what's on your schedule, but to schedule your priorities.",author:"Stephen Covey",message:"Make time for your most valuable clients and prospects each day."},{quote:"People don't care how much you know until they know how much you care.",author:"Theodore Roosevelt",message:"In insurance, relationships matter more than policies."},{quote:"The expert in anything was once a beginner.",author:"Helen Hayes",message:"Every insurance professional started with their first client conversation."},{quote:"Success is walking from failure to failure with no loss of enthusiasm.",author:"Winston Churchill",message:"Every 'no' brings you closer to your next 'yes'."},{quote:"It's not about having time, it's about making time.",author:"Unknown",message:"Schedule your follow-ups and client check-ins like they're your most important meetings."},{quote:"The pessimist sees difficulty in every opportunity. The optimist sees opportunity in every difficulty.",author:"Winston Churchill",message:"Every client problem is a chance to demonstrate your value as an insurance professional."}],x=()=>{let e=new Date,t=Math.floor((e-new Date(e.getFullYear(),0,0))/864e5)%h.length;return h[t]},p=()=>{let[e,t]=(0,a.useState)(x()),[r,o]=(0,a.useState)(new Date);(0,a.useEffect)(()=>{let e=setInterval(()=>{o(new Date)},6e4);return()=>clearInterval(e)},[]);let n=r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),i=r.toLocaleDateString([],{month:"long",day:"numeric",year:"numeric"});return(0,s.jsxs)("div",{className:"welcome-container p-6 flex flex-col items-center justify-center text-center",children:[(0,s.jsxs)("div",{className:"time-display mb-3",children:[s.jsx("h2",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:n}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i})]}),s.jsx("div",{className:"inspiration-card max-w-2xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden transition-all duration-500 hover:shadow-lg mt-6",children:(0,s.jsxs)("div",{className:"p-8",children:[s.jsx("div",{className:"quote-icon flex justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600 dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})})}),(0,s.jsxs)("blockquote",{className:"text-xl italic font-medium text-gray-800 dark:text-gray-200 mb-4",children:['"',e.quote,'"']}),(0,s.jsxs)("p",{className:"text-right text-gray-600 dark:text-gray-400 font-medium mb-6",children:["— ",e.author]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e.message})})]})}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col items-center",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Start a new conversation or select a previous chat"}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500 animate-bounce",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})]})};var f=r(78012);let y=({id:e,role:t,content:r,timestamp:o,onDelete:i})=>{let[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:`flex ${"assistant"===t?"bg-gray-50":"bg-white"} rounded-lg p-4 relative group`,onMouseLeave:()=>{c(!1),setTimeout(()=>{u(!1)},200)},children:[s.jsx("div",{className:"mr-4 flex-shrink-0",children:"assistant"===t?s.jsx(n.default,{src:"/images/agent-icon.png",alt:"Assistant",width:36,height:36,className:"rounded-full"}):s.jsx("div",{className:"w-9 h-9 rounded-full bg-indigo-500 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:"U"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[s.jsx("p",{className:"font-medium text-gray-900 mr-2",children:"assistant"===t?"LegacyCore AI":"You"}),s.jsx("p",{className:"text-xs text-gray-500",children:(e=>{try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(e){return""}})(o)})]}),s.jsx("div",{className:"message-content prose prose-sm max-w-none text-gray-600",dangerouslySetInnerHTML:{__html:r}})]}),e&&i&&(0,s.jsxs)("div",{className:`absolute top-2 right-2 ${l?"block":"hidden group-hover:block"}`,children:[s.jsx("button",{className:"p-1 rounded hover:bg-gray-200 text-gray-500 hover:text-gray-700",onClick:()=>c(!l),children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"1"}),s.jsx("circle",{cx:"19",cy:"12",r:"1"}),s.jsx("circle",{cx:"5",cy:"12",r:"1"})]})}),l&&s.jsx("div",{className:"absolute top-full right-0 mt-1 w-32 bg-white border border-gray-200 rounded shadow-lg z-10",children:(0,s.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-sm text-left hover:bg-gray-100 text-red-600",onClick:()=>{d&&e&&i?(i(e),c(!1),u(!1)):u(!0)},children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[s.jsx("path",{d:"M3 6h18"}),s.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),s.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),d?"Confirm":"Delete"]})})]})]})},b=e=>e.includes("Error:")||e.includes("I apologize")||e.includes("sorry")?"error":[/\$\d+(\.\d+)?/g,/\d+%/g,/total:/i,/summary:/i,/statistics:/i,/\|\s*[\w\s]+\s*\|/g,/\b(database|query|result)\b/i].some(t=>t.test(e))?"data":(e.match(/\d+\.\s+/g)||[]).length+(e.match(/^\s*[\*\-\•]\s+/gm)||[]).length>3?"list":"conversation",w=e=>e.replace(/\n{2,}/g,"<br><br>").replace(/\n/g," ").replace(/(\d+\.\s+)([^\n]+)/g,'<span class="text-teal-300">$1</span>$2<br>').replace(/^[\*\-\•]\s+([^\n]+)/gm,"• $1<br>").replace(/"([^"]+)"/g,'<span class="text-indigo-300">"$1"</span>').replace(/!(Important|Note|Warning|Tip):/gi,'<strong class="text-yellow-300">$1:</strong>').replace(/`([^`]+)`/g,'<code class="bg-gray-700 rounded px-1 py-0.5 text-sm">$1</code>'),v=e=>e.replace(/\n{2,}/g,"<br><br>").replace(/(\$\d+(\.\d+)?)/g,'<span class="text-green-400 font-medium">$1</span>').replace(/(\d+%)/g,'<span class="text-indigo-300 font-medium">$1</span>').replace(/\n?(#+)\s+([^\n]+)/g,(e,t,r)=>{let s=t.length;return`<div class="font-bold text-${1===s?"xl":2===s?"lg":"md"} my-3 text-teal-300">${r}</div>`}).replace(/(Total:|Summary:|Results:|Statistics:)(\s*[\w\s\$\d\.\,]+)/gi,'<div class="my-2"><span class="text-teal-300 font-medium">$1</span>$2</div>').replace(/`([^`]+)`/g,'<code class="bg-gray-700 rounded px-1 py-0.5 text-sm">$1</code>').replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank" class="text-blue-400 underline">$1</a>'),j=e=>{let t=e.replace(/"list-item">/g,"");if(t.split(/(\d+\.\s+|\*\s+|\-\s+|\•\s+)/).length<=1)return w(t);let r=t.search(/(\d+\.\s+|\*\s+|\-\s+|\•\s+)/),s=r>0?t.substring(0,r):"",a=t.substring(r);return(s?w(s)+"<br><br>":"")+a.replace(/(\d+\.\s+)([^\n]+)/g,'<div class="list-item"><span class="text-teal-300 font-medium">$1</span>$2</div>').replace(/^[\*\-\•]\s+([^\n]+)/gm,'<div class="list-item">$1</div>').replace(/\n/g,"<br>").replace(/"([^"]+)"/g,'<span class="text-indigo-300">"$1"</span>').replace(/!(Important|Note|Warning|Tip):/gi,'<strong class="text-yellow-300">$1:</strong>')},N=e=>`<div class="text-red-400">${e}</div>`,k=e=>{if(!e)return"";let t=e.trim();switch(b(t=(t=t.replace(/"list-item">([^<\n]*)/g,"<li>$1</li>")).replace(/"list-item">\s*-\s*([^<\n]*)/g,"<li>$1</li>"))){case"data":return v(t);case"list":return j(t);case"error":return N(t);default:return w(t)}};var C=r(40617);let S=`
  .message-content p {
    margin-bottom: 0.75rem;
  }
  
  .message-content ul, .message-content ol {
    margin-left: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  .message-content li {
    margin-bottom: 0.25rem;
  }
  
  .message-content h1, .message-content h2, .message-content h3 {
    font-weight: bold;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
  }
  
  .message-content blockquote {
    border-left: 4px solid #e5e7eb;
    padding-left: 1rem;
    font-style: italic;
    margin: 0.75rem 0;
  }
  
  .message-content pre {
    background-color: #f3f4f6;
    padding: 0.75rem;
    border-radius: 0.25rem;
    overflow-x: auto;
    margin: 0.75rem 0;
  }
  
  .message-content code {
    background-color: #f3f4f6;
    padding: 0.25rem;
    border-radius: 0.25rem;
    font-family: monospace;
  }
  
  .message-content table {
    border-collapse: collapse;
    width: 100%;
    margin: 0.75rem 0;
  }
  
  .message-content th, .message-content td {
    border: 1px solid #e5e7eb;
    padding: 0.5rem;
    text-align: left;
  }
  
  .message-content th {
    background-color: #f9fafb;
  }
  
  .key-point {
    font-weight: 600;
    color: #1e40af;
  }
  
  .list-item {
    display: block;
    padding-left: 1.5rem;
    position: relative;
    margin-bottom: 0.5rem;
  }
  
  .list-item:before {
    content: "•";
    position: absolute;
    left: 0.5rem;
  }
`,$=()=>{let{user:e,loading:t}=(0,i.E)(),[r,n]=(0,a.useState)(""),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[g,h]=(0,a.useState)([]),[x,b]=(0,a.useState)(null),[w,v]=(0,a.useState)(!0),[j,N]=(0,a.useState)(!1),$=(0,a.useRef)(null),D=(0,a.useRef)(null),A=(0,a.useRef)(null),_=(0,a.useRef)(null),q=(0,a.useRef)(null),[E,L]=(0,a.useState)(""),[M,T]=(0,a.useState)({messageCount:0,lastAction:"Initial load"}),I=e=>({id:e.id,title:e.title,messages:e.messages.map(e=>({role:e.role,content:e.content,timestamp:e.timestamp})),createdAt:e.createdAt}),P=e=>({role:e.role,content:e.content,timestamp:e.timestamp}),U=()=>{_.current&&q.current&&(_.current.classList.toggle("translate-x-0"),q.current.classList.toggle("opacity-0"),q.current.classList.toggle("pointer-events-none"))};(0,a.useEffect)(()=>{t||(async()=>{if(!e){h([]),v(!1);return}v(!0);try{let e=await f.A.getChats(),t=e.map(I);h(t),e.length>0&&!x&&(b(e[0].id),c(t[0].messages))}catch(e){console.error("Error loading chats:",e)}finally{v(!1)}})()},[e,t]),(0,a.useEffect)(()=>{L((0,o.Z)()),$.current&&($.current.scrollTop=$.current.scrollHeight)},[]),(0,a.useEffect)(()=>{if($.current){let e=setTimeout(()=>{let e=$.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},100);return()=>clearTimeout(e)}},[l,d]),(0,a.useEffect)(()=>{let e=e=>{"/"===e.key&&document.activeElement!==A.current&&(e.preventDefault(),A.current?.focus())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let W=async(t,r)=>{console.log("Attempting to connect to webhook with:",{message:t,sessionId:r});try{let s=await fetch("https://n8n-mybh5-u38603.vm.elestio.app/webhook/AICHAT",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({message:t,sessionId:r,managerId:e?.id||"",timestamp:new Date().toISOString()})});if(console.log("Webhook response status:",s.status),s.status>=200&&s.status<300){let e=await s.json().catch(()=>({}));return console.log("Webhook raw response data:",e),{success:!0,data:e}}{let e=await s.text().catch(()=>"Unknown error");return console.error(`Webhook error: ${s.status}`,e),{success:!1,error:`Webhook error: ${s.status}`,details:e}}}catch(e){return console.error("Webhook connection error:",e),{success:!1,error:"Failed to connect to webhook",details:e.message||"Unknown error occurred"}}},R=async()=>{if(e)try{let e=await f.A.createChat();if(!e){console.error("Failed to create new chat");return}let t=I(e);h([t,...g]),b(t.id),c([]),T({messageCount:0,lastAction:"Created new chat"})}catch(e){console.error("Error creating new chat:",e)}},z=async e=>{b(e);let t=g.find(t=>t.id===e);if(t)c(t.messages);else{let t=await f.A.getChat(e);t&&c(I(t).messages)}T({messageCount:t?.messages.length||0,lastAction:"Selected chat"})},H=async e=>{let t=g.filter(t=>t.id!==e);h(t),x===e&&(t.length>0?(b(t[0].id),c(t[0].messages)):(b(null),c([])));try{if(console.log(`Attempting to delete chat ${e} and its messages...`),await f.A.deleteChat(e))console.log(`Successfully deleted chat ${e}`);else{console.error("Failed to delete chat from Supabase");let t=await f.A.getChats(),r=t.map(I);if(h(r),x===e&&t.some(t=>t.id===e)){b(e);let t=r.find(t=>t.id===e);t&&c(t.messages)}}}catch(e){console.error("Error deleting chat:",e)}},O=async e=>{if(e&&e.preventDefault(),!r.trim())return;if(!x){let e=await f.A.createChat(r);if(e){let t=I(e);b(t.id),h([t,...g])}else{console.error("Failed to create new chat");return}}u(!0);let t={role:"user",content:r,timestamp:new Date().toISOString()},s=[...l,t];c(s),await f.A.addMessage(x,P(t)),n(""),T({messageCount:s.length,lastAction:"Added user message"});try{let e=await W(r,E);if(e){let t;if(e.success&&e.data){if("string"==typeof e.data)t=e.data;else if(e.data.response)t=e.data.response;else if(e.data.output)t=e.data.output;else if(e.data.text)t=e.data.text;else if(e.data.message)t=e.data.message;else try{t=JSON.stringify(e.data)}catch(e){t="Received data in an unexpected format."}}else t=e.error?`Error: ${e.error}. ${e.details||""}`:"No readable response received from the assistant.";let a=k(t),o={role:"assistant",content:a,timestamp:new Date().toISOString()},n=[...s,o];if(c(n),await f.A.addMessage(x,P(o)),T({messageCount:n.length,lastAction:"Added assistant response"}),1===s.length){let e=r.length>30?`${r.substring(0,30)}...`:r;await f.A.updateChatTitle(x,e);let t=g.map(t=>t.id===x?{...t,title:e,messages:n}:t);h(t)}else{let e=g.map(e=>e.id===x?{...e,messages:n}:e);h(e)}}}catch(t){console.error("Error sending message to webhook:",t);let e={role:"assistant",content:"I apologize, but I encountered an error while processing your request. Please try again later.",timestamp:new Date().toISOString()};c([...s,e]),await f.A.addMessage(x,P(e))}finally{u(!1)}},Z=async e=>{if(x)try{if(console.log(`Attempting to delete message ${e}...`),await f.A.deleteMessage(e)){console.log(`Successfully deleted message ${e}`);let t=l.filter(t=>t.id!==e);c(t);let r=g.map(t=>t.id===x?{...t,messages:t.messages.filter(t=>t.id!==e)}:t);h(r),T({messageCount:t.length,lastAction:"Deleted message"})}else console.error(`Failed to delete message ${e}`)}catch(e){console.error("Error deleting message:",e)}};return(0,s.jsxs)("div",{className:"flex min-h-screen bg-white",children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:S}}),s.jsx("div",{ref:q,className:"fixed inset-0 z-20 bg-black/50 opacity-0 pointer-events-none transition-opacity md:hidden",onClick:U}),s.jsx("div",{ref:_,className:"fixed top-0 left-0 z-30 h-full w-72 -translate-x-full transform transition-transform md:translate-x-0 md:static md:z-0",children:s.jsx(m,{chats:g,activeChat:x,onSelectChat:z,onCreateNewChat:R,onDeleteChat:H,loading:w})}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,s.jsxs)("header",{className:"border-b border-gray-200 bg-white py-3 px-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("button",{className:"mr-3 rounded p-1 text-gray-500 hover:bg-gray-100 md:hidden",onClick:U,children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-menu",children:[s.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),s.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),s.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]})}),s.jsx("h1",{className:"text-lg font-semibold",children:(()=>{if(!x)return"New Chat";let e=g.find(e=>e.id===x);return e?e.title:"Chat"})()})]}),s.jsx("button",{onClick:R,className:"rounded p-1 text-gray-500 hover:bg-gray-100",title:"New Chat",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-plus",children:[s.jsx("path",{d:"M5 12h14"}),s.jsx("path",{d:"M12 5v14"})]})})]}),s.jsx("div",{ref:$,className:"flex-1 overflow-y-auto p-4 chat-messages",children:0===l.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-8 px-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4 shadow-lg",children:s.jsx(C.Z,{size:32,className:"text-white"})}),s.jsx("h2",{className:"text-3xl font-bold mb-3 text-center bg-clip-text text-transparent bg-gradient-to-r from-indigo-500 to-purple-600",children:"LegacyCore Manager AI"}),s.jsx("p",{className:"text-center text-gray-600 mb-8 max-w-md",children:"Welcome to your AI-powered insurance assistant. Ask me anything about your agents, carriers, policies, or insurance questions."}),s.jsx(p,{}),s.jsx("div",{className:"mt-8 w-full max-w-md",children:(0,s.jsxs)("div",{className:"border border-gray-300 rounded-lg p-2 bg-gray-50",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Try asking:"}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>n("How can I improve my team's performance?"),className:"block w-full rounded-md bg-white px-3 py-2 text-left text-sm text-gray-700 shadow-sm hover:bg-gray-100 transition-colors",children:"How can I improve my team's performance?"}),s.jsx("button",{onClick:()=>n("What are some best practices for hiring new agents?"),className:"block w-full rounded-md bg-white px-3 py-2 text-left text-sm text-gray-700 shadow-sm hover:bg-gray-100 transition-colors",children:"What are some best practices for hiring new agents?"}),s.jsx("button",{onClick:()=>n("Summarize the latest carriers' payout rates"),className:"block w-full rounded-md bg-white px-3 py-2 text-left text-sm text-gray-700 shadow-sm hover:bg-gray-100 transition-colors",children:"Summarize the latest carriers' payout rates"})]})]})})]}):(0,s.jsxs)("div",{className:"max-w-3xl mx-auto space-y-4",children:[l.map(e=>s.jsx(y,{id:e.id,role:e.role,content:e.content,timestamp:e.timestamp,onDelete:e.id?Z:void 0},e.id)),d&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded-lg bg-gray-50 animate-pulse",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200"}),(0,s.jsxs)("div",{className:"space-y-2 flex-1",children:[s.jsx("div",{className:"h-2 w-1/4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-2 w-1/2 bg-gray-200 rounded"})]})]}),s.jsx("div",{ref:D})]})}),s.jsx("div",{className:"border-t border-gray-200 bg-white p-4",children:(0,s.jsxs)("form",{onSubmit:O,className:"mx-auto max-w-3xl",children:[(0,s.jsxs)("div",{className:"relative rounded-lg border border-gray-300 bg-white shadow-sm focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500",children:[s.jsx("input",{ref:A,type:"text",placeholder:"Ask anything about insurance, carriers, or agent management...",className:"block w-full rounded-lg border-0 py-3 pl-4 pr-12 text-gray-900 shadow-none outline-none focus:ring-0 sm:text-sm sm:leading-6",value:r,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&(e.preventDefault(),n("")):(e.preventDefault(),O())},disabled:d}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex py-1.5 pr-1.5",children:s.jsx("button",{type:"submit",disabled:d||!r.trim(),className:`inline-flex items-center rounded-md px-2 py-1 text-sm ${d||!r.trim()?"text-gray-400":"text-indigo-600 hover:bg-indigo-50"}`,children:d?(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[s.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),s.jsx("path",{d:"M22 2 11 13"})]})})})]}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("kbd",{className:"px-1 py-0.5 bg-gray-100 border border-gray-300 rounded",children:"Shift"}),"+",s.jsx("kbd",{className:"px-1 py-0.5 bg-gray-100 border border-gray-300 rounded",children:"Enter"})," ","for new line"]}),(0,s.jsxs)("div",{children:[s.jsx("kbd",{className:"px-1 py-0.5 bg-gray-100 border border-gray-300 rounded",children:"/"})," ","to focus"]})]})]})})]})]})}},7705:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(10326),a=r(37711),o=r(35047),n=r(34009);function i({children:e}){let{role:t,loading:r}=(0,n.q)();return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):"manager"!==t&&"admin"!==t?((0,o.redirect)("/login"),null):s.jsx(a.M,{children:s.jsx("div",{className:"p-6",children:e})})}},58234:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var s=r(17577),a=r(69701);let o=()=>{let[e,t]=(0,s.useState)(null),[r,o]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0),l=(0,a.e)();return(0,s.useEffect)(()=>{(async()=>{let{data:{session:e}}=await l.auth.getSession();o(e),t(e?.user||null),i(!1)})();let{data:{subscription:e}}=l.auth.onAuthStateChange((e,r)=>{o(r),t(r?.user||null),i(!1)});return()=>{e.unsubscribe()}},[l]),{user:e,session:r,loading:n}}},78012:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(69701);let a=[{id:(0,r(22665).Z)(),title:"Demo Chat (Database Setup Required)",messages:[{role:"assistant",content:"Welcome to the AI chat! This is a demo chat because your database tables need to be set up. Please run the migrations to enable full functionality.",timestamp:new Date().toISOString()}],createdAt:new Date().toISOString()}],o=(0,s.e)(),n=e=>e&&("42P01"===e.code||e.message?.includes("does not exist")||e.message?.toLowerCase().includes("relation")&&e.message?.toLowerCase().includes("does not exist")),i={async getChats(){try{let{data:e,error:t}=await o.from("chats").select("*").order("created_at",{ascending:!1});if(t){if(console.error("Error fetching chats:",t),n(t))return console.log("Chats table does not exist, returning mock data"),a;return[]}return await Promise.all(e.map(async e=>{try{let{data:t,error:r}=await o.from("messages").select("*").eq("chat_id",e.id).order("created_at",{ascending:!0});if(r)return console.error(`Error fetching messages for chat ${e.id}:`,r),{id:e.id,title:e.title,messages:[],createdAt:e.created_at};return{id:e.id,title:e.title,messages:t.map(e=>({role:e.role,content:e.content,timestamp:e.created_at})),createdAt:e.created_at}}catch(t){return console.error(`Error processing chat ${e.id}:`,t),{id:e.id,title:e.title,messages:[],createdAt:e.created_at}}}))}catch(e){return console.error("Unexpected error in getChats:",e),a}},async createChat(e=""){try{let t=e?e.substring(0,30)+(e.length>30?"...":""):`New chat ${new Date().toLocaleDateString()}`,{data:r}=await o.auth.getUser(),s=r?.user?.id;if(!s)return console.error("No user ID found"),null;let{data:i,error:l}=await o.from("chats").insert({title:t,user_id:s}).select().single();if(l){if(console.error("Error creating chat:",l),n(l))return console.log("Chats table does not exist, returning mock chat"),a[0];return null}return{id:i.id,title:i.title,messages:[],createdAt:i.created_at}}catch(e){return console.error("Unexpected error in createChat:",e),a[0]}},async getChat(e){try{if(a.some(t=>t.id===e))return a.find(t=>t.id===e)||null;let{data:t,error:r}=await o.from("chats").select("*").eq("id",e).single();if(r){if(console.error(`Error fetching chat ${e}:`,r),n(r))return console.log("Chats table does not exist, returning mock chat"),a[0];return null}try{let{data:r,error:s}=await o.from("messages").select("*").eq("chat_id",e).order("created_at",{ascending:!0});if(s)return console.error(`Error fetching messages for chat ${e}:`,s),n(s),{id:t.id,title:t.title,messages:[],createdAt:t.created_at};return{id:t.id,title:t.title,messages:r.map(e=>({role:e.role,content:e.content,timestamp:e.created_at})),createdAt:t.created_at}}catch(r){return console.error(`Error processing messages for chat ${e}:`,r),{id:t.id,title:t.title,messages:[],createdAt:t.created_at}}}catch(e){return console.error("Unexpected error in getChat:",e),a[0]}},async addMessage(e,t){try{if(a.some(t=>t.id===e))return console.log("Mock chat detected, simulating successful message add"),!0;let{error:r}=await o.from("messages").insert({chat_id:e,role:t.role,content:t.content,created_at:t.timestamp||new Date().toISOString()});if(r)return console.error(`Error adding message to chat ${e}:`,r),!1;let{error:s}=await o.from("chats").update({updated_at:new Date().toISOString()}).eq("id",e);return s&&console.error(`Error updating chat timestamp for ${e}:`,s),!0}catch(e){return console.error("Unexpected error in addMessage:",e),!1}},async deleteChat(e){try{if(a.some(t=>t.id===e))return console.log("Mock chat detected, simulating successful deletion"),!0;let{error:t,count:r}=await o.from("messages").delete().eq("chat_id",e);t?console.error(`Error deleting messages for chat ${e}:`,t):console.log(`Successfully deleted ${r} messages for chat ${e}`);let{error:s}=await o.from("chats").delete().eq("id",e);if(s)return console.error(`Error deleting chat ${e}:`,s),!1;return console.log(`Successfully deleted chat ${e}`),!0}catch(e){return console.error("Unexpected error in deleteChat:",e),!1}},async updateChatTitle(e,t){try{if(a.some(t=>t.id===e))return console.log("Mock chat detected, simulating successful title update"),!0;let{error:r}=await o.from("chats").update({title:t,updated_at:new Date().toISOString()}).eq("id",e);if(r)return console.error(`Error updating title for chat ${e}:`,r),!1;return!0}catch(e){return console.error("Unexpected error in updateChatTitle:",e),!1}},async deleteMessage(e){try{if(a.some(t=>t.messages.some(t=>t.id===e)))return console.log("Mock message detected, simulating successful deletion"),!0;let{error:t}=await o.from("messages").delete().eq("id",e);if(t)return console.error(`Error deleting message ${e}:`,t),!1;return console.log(`Successfully deleted message ${e}`),!0}catch(e){return console.error("Unexpected error in deleteMessage:",e),!1}}}},23898:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>o,default:()=>i});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\Users\Ronel\Downloads\New folder (5)\legacycore\legacy-core\src\app\manager\ai-chat\page.tsx`),{__esModule:o,$$typeof:n}=a;a.default;let i=(0,s.createProxy)(String.raw`C:\Users\Ronel\Downloads\New folder (5)\legacycore\legacy-core\src\app\manager\ai-chat\page.tsx#default`)},46431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>o,default:()=>i});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\Users\Ronel\Downloads\New folder (5)\legacycore\legacy-core\src\app\manager\layout.tsx`),{__esModule:o,$$typeof:n}=a;a.default;let i=(0,s.createProxy)(String.raw`C:\Users\Ronel\Downloads\New folder (5)\legacycore\legacy-core\src\app\manager\layout.tsx#default`)},90376:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,3841,9813,224,6256,9344,7711],()=>r(28891));module.exports=s})();