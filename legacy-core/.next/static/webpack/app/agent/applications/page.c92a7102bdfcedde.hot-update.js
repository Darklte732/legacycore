"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/agent/applications/page",{

/***/ "(app-pages-browser)/./src/app/agent/applications/components/PaymentComponents.tsx":
/*!*********************************************************************!*\
  !*** ./src/app/agent/applications/components/PaymentComponents.tsx ***!
  \*********************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PaymentGrid: function() { return /* binding */ PaymentGrid; },\n/* harmony export */   PaymentHistoryGrid: function() { return /* binding */ PaymentHistoryGrid; },\n/* harmony export */   PaymentHistoryLegend: function() { return /* binding */ PaymentHistoryLegend; },\n/* harmony export */   PaymentIndicator: function() { return /* binding */ PaymentIndicator; },\n/* harmony export */   PaymentLegend: function() { return /* binding */ PaymentLegend; },\n/* harmony export */   PaymentUpdateModal: function() { return /* binding */ PaymentUpdateModal; },\n/* harmony export */   SafePaymentHistoryGrid: function() { return /* binding */ SafePaymentHistoryGrid; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase/client */ \"(app-pages-browser)/./src/lib/supabase/client.ts\");\n/* harmony import */ var _utils_statusUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/statusUtils */ \"(app-pages-browser)/./src/app/agent/applications/utils/statusUtils.ts\");\n/* harmony import */ var _components_status_styles_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/status-styles.css */ \"(app-pages-browser)/./src/app/agent/applications/components/status-styles.css\");\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n/* harmony import */ var _components_ui_popover__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/popover */ \"(app-pages-browser)/./src/components/ui/popover.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./src/components/ui/button.tsx\");\n/* harmony import */ var _components_ui_calendar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ui/calendar */ \"(app-pages-browser)/./src/components/ui/calendar.tsx\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"(app-pages-browser)/./node_modules/date-fns/format.mjs\");\n/* harmony import */ var _barrel_optimize_names_CalendarIcon_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/calendar.js\");\n/* harmony import */ var _ErrorBoundary__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ErrorBoundary */ \"(app-pages-browser)/./src/app/agent/applications/components/ErrorBoundary.tsx\");\n/* __next_internal_client_entry_do_not_use__ PaymentIndicator,PaymentGrid,PaymentUpdateModal,PaymentLegend,SafePaymentHistoryGrid,PaymentHistoryGrid,PaymentHistoryLegend auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$(), _s3 = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n// Single payment indicator component with improved error handling\nconst PaymentIndicator = (param)=>{\n    let { status, monthNumber, applicationId, paymentDate, onPaymentUpdated } = param;\n    _s();\n    const [isUpdating, setIsUpdating] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showPaymentMenu, setShowPaymentMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedDate, setSelectedDate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(paymentDate ? new Date(paymentDate) : undefined);\n    const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    // Clear state and refs on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        isMounted.current = true;\n        return ()=>{\n            isMounted.current = false;\n        };\n    }, []);\n    // Use larger sizes and more visible styles for important indicators\n    const getIndicatorClasses = ()=>{\n        const baseClass = (0,_utils_statusUtils__WEBPACK_IMPORTED_MODULE_3__.getPaymentIndicatorClass)(status);\n        const firstMonthClass = monthNumber === 1 ? \"first-month \" : \"\";\n        // Make all indicators consistently small\n        const size = \"w-3 h-3\";\n        return `payment-indicator ${baseClass} ${firstMonthClass} ${size} ${isUpdating ? \"animate-pulse\" : \"\"}`;\n    };\n    const indicatorClass = getIndicatorClasses();\n    // Ensure all indicators have a meaningful tooltip with payment dates\n    const tooltipTitle = !status ? `Month ${monthNumber}: Click to set payment status` : paymentDate ? `Month ${monthNumber}: ${status} (${new Date(paymentDate).toLocaleDateString()})` : `Month ${monthNumber}: ${status}`;\n    // Check if this is the first payment and it should be marked as paid\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let isActive = true; // Track whether this effect should still update state\n        const checkFirstPayment = async ()=>{\n            if (monthNumber === 1 && !status) {\n                // Fetch the application details\n                try {\n                    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n                    const { data, error } = await supabase.from(\"agent_applications\").select(\"status, paid_status, effective_policy_date\").eq(\"id\", applicationId).single();\n                    if (error) throw error;\n                    // Only proceed if component is still mounted and effect is still active\n                    if (isMounted.current && isActive) {\n                        // MUCH stricter check - only mark as paid if explicitly paid_status='Paid'\n                        if (data && data.paid_status === \"Paid\" && data.effective_policy_date !== null) {\n                            // This should be marked as paid, so update it\n                            updatePaymentStatus(\"PAID\");\n                        }\n                    }\n                } catch (err) {\n                    console.error(\"Error checking first payment status:\", err);\n                }\n            }\n        };\n        // Check if we need to mark as paid\n        checkFirstPayment();\n        // Cleanup function\n        return ()=>{\n            isActive = false; // Mark effect as inactive when unmounted\n        };\n    }, [\n        monthNumber,\n        status,\n        applicationId\n    ]);\n    const updatePaymentStatus = async (newStatus, date)=>{\n        if (!isMounted.current) return; // Don't proceed if unmounted\n        setIsUpdating(true);\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n            // Use the payment date logic\n            const paymentDate = date || (newStatus === \"PAID\" ? new Date() : null);\n            // Use our new track_payment RPC function for proper payment tracking\n            const { data: trackResult, error: trackError } = await supabase.rpc(\"track_payment\", {\n                p_application_id: applicationId,\n                p_month_number: monthNumber,\n                p_payment_status: newStatus,\n                p_payment_date: paymentDate ? paymentDate.toISOString() : null\n            });\n            if (trackError) {\n                console.error(\"Payment tracking failed:\", trackError);\n                // Fallback to basic update if RPC fails\n                console.log(\"Falling back to basic update...\");\n                await fallbackPaymentUpdate(supabase, newStatus, paymentDate);\n            } else {\n                // Check if the tracking was successful\n                if (trackResult && trackResult.success) {\n                    console.log(\"Payment tracking successful:\", trackResult.message);\n                    // If we have a next payment scheduled, log it\n                    if (trackResult.next_payment) {\n                        console.log(\"Next payment scheduled:\", trackResult.next_payment);\n                    }\n                    if (isMounted.current) {\n                        sonner__WEBPACK_IMPORTED_MODULE_5__.toast.success(trackResult.message || `Payment for month ${monthNumber} marked as ${newStatus || \"cleared\"}`);\n                        if (onPaymentUpdated) {\n                            onPaymentUpdated();\n                        }\n                    }\n                } else {\n                    // RPC succeeded but returned an error message\n                    const errorMsg = trackResult?.message || \"Payment update failed\";\n                    console.error(\"Payment tracking returned error:\", errorMsg);\n                    if (isMounted.current) {\n                        sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(errorMsg);\n                    }\n                }\n            }\n        } catch (error) {\n            console.error(\"Error updating payment status:\", error);\n            if (isMounted.current) {\n                sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Failed to update payment status\");\n            }\n        } finally{\n            if (isMounted.current) {\n                setIsUpdating(false);\n                setShowPaymentMenu(false);\n            }\n        }\n    };\n    // Fallback payment update function when RPC fails\n    const fallbackPaymentUpdate = async (supabase, newStatus, paymentDate)=>{\n        // First try agent_applications table update (most reliable)\n        const monthField = `month_${monthNumber}`;\n        const { error: appError } = await supabase.from(\"agent_applications\").update({\n            [monthField]: newStatus\n        }).eq(\"id\", applicationId);\n        if (appError) {\n            console.error(\"Failed to update month field in agent_applications:\", appError);\n            if (isMounted.current) {\n                sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(`Unable to update payment status. Please try again later.`);\n            }\n            return false;\n        }\n        // Then try application_payments table as a best effort\n        try {\n            await supabase.from(\"application_payments\").upsert({\n                application_id: applicationId,\n                month_number: monthNumber,\n                payment_status: newStatus,\n                payment_date: paymentDate ? paymentDate.toISOString() : null,\n                updated_at: new Date().toISOString()\n            }, {\n                onConflict: \"application_id,month_number\"\n            });\n        } catch (paymentErr) {\n            // Just log this error - we already updated the agent_applications table\n            console.error(\"Failed to update application_payments table:\", paymentErr);\n        }\n        // If this is the first month and marking as PAID, update paid_status\n        if (monthNumber === 1 && newStatus === \"PAID\") {\n            try {\n                // First check if the application is truly issued and valid for payment\n                const { data: appData } = await supabase.from(\"agent_applications\").select(\"status, paid_status, effective_policy_date\").eq(\"id\", applicationId).single();\n                // Only update if the application is valid for payment\n                if (appData && (appData.status === \"Approved\" || appData.status === \"Live\" || appData.status?.includes(\"Paid\") || appData.paid_status === \"Paid\") && appData.effective_policy_date) {\n                    await supabase.from(\"agent_applications\").update({\n                        paid_status: \"Paid\",\n                        policy_health: \"Active\"\n                    }).eq(\"id\", applicationId);\n                } else {\n                    if (isMounted.current) {\n                        sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"First payment can only be marked as paid for issued and approved applications\");\n                    }\n                    return false;\n                }\n            } catch (error) {\n                console.error(\"Error updating paid_status:\", error);\n            }\n        }\n        if (isMounted.current) {\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.success(`Payment for month ${monthNumber} marked as ${newStatus || \"cleared\"}`);\n            if (onPaymentUpdated) {\n                onPaymentUpdated();\n            }\n        }\n        return true;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ErrorBoundary__WEBPACK_IMPORTED_MODULE_9__.ErrorBoundary, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.Popover, {\n            open: showPaymentMenu,\n            onOpenChange: setShowPaymentMenu,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverTrigger, {\n                    asChild: true,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: indicatorClass,\n                        title: tooltipTitle,\n                        style: {\n                            border: monthNumber === 1 ? \"2px solid #666\" : \"1px solid #d0d0d0\",\n                            boxShadow: status === \"PAID\" ? \"0 0 2px 1px rgba(19, 115, 51, 0.5)\" : \"none\",\n                            backgroundColor: status ? undefined : \"white\",\n                            opacity: 1 // Ensure full opacity at all times\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 265,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 264,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverContent, {\n                    className: \"w-72\",\n                    style: {\n                        backgroundColor: \"white\",\n                        opacity: 1,\n                        boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\",\n                        border: \"1px solid #d0d0d0\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"font-medium\",\n                                children: [\n                                    \"Month \",\n                                    monthNumber,\n                                    \" Payment\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                lineNumber: 278,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"text-sm font-medium\",\n                                        children: \"Payment Date\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                        lineNumber: 282,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.Popover, {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverTrigger, {\n                                                asChild: true,\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                                    variant: \"outline\",\n                                                    className: \"w-full justify-start text-left font-normal\",\n                                                    disabled: isUpdating,\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarIcon_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                                            className: \"mr-2 h-4 w-4\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                            lineNumber: 290,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        selectedDate ? (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__.format)(selectedDate, \"PPP\") : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            children: \"Pick a date\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                            lineNumber: 291,\n                                                            columnNumber: 67\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 285,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                lineNumber: 284,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverContent, {\n                                                className: \"w-auto p-0\",\n                                                style: {\n                                                    backgroundColor: \"white\",\n                                                    opacity: 1\n                                                },\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_calendar__WEBPACK_IMPORTED_MODULE_8__.Calendar, {\n                                                    mode: \"single\",\n                                                    selected: selectedDate,\n                                                    onSelect: (date)=>setSelectedDate(date),\n                                                    initialFocus: true\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 295,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                lineNumber: 294,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                        lineNumber: 283,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                lineNumber: 281,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-2 gap-2\",\n                                children: isUpdating ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"col-span-2 flex justify-center items-center py-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"animate-spin h-5 w-5 text-gray-500\",\n                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                            fill: \"none\",\n                                            viewBox: \"0 0 24 24\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                                    className: \"opacity-25\",\n                                                    cx: \"12\",\n                                                    cy: \"12\",\n                                                    r: \"10\",\n                                                    stroke: \"currentColor\",\n                                                    strokeWidth: \"4\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 310,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    className: \"opacity-75\",\n                                                    fill: \"currentColor\",\n                                                    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 311,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 309,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"ml-2\",\n                                            children: \"Updating...\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 313,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 308,\n                                    columnNumber: 17\n                                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#e6f4ea] text-[#137333] hover:bg-[#d3eedb] hover:text-[#137333]\",\n                                            onClick: ()=>updatePaymentStatus(\"PAID\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Paid\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 317,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#fce8e6] text-[#c5221f] hover:bg-[#fadad7] hover:text-[#c5221f]\",\n                                            onClick: ()=>updatePaymentStatus(\"MISSED\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Missed\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 325,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#e8f0fe] text-[#1a73e8] hover:bg-[#d4e2fc] hover:text-[#1a73e8]\",\n                                            onClick: ()=>updatePaymentStatus(\"PENDING\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Pending\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 333,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#fef7e0] text-[#ea8600] hover:bg-[#fdf3d0] hover:text-[#ea8600]\",\n                                            onClick: ()=>updatePaymentStatus(\"NSF\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"NSF\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 341,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#f1f3f4] text-[#80868b] hover:bg-[#e4e6e8] hover:text-[#80868b]\",\n                                            onClick: ()=>updatePaymentStatus(\"WAIVED\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Waived\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 349,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-white text-gray-700 hover:bg-gray-100\",\n                                            onClick: ()=>updatePaymentStatus(null, null),\n                                            disabled: isUpdating,\n                                            children: \"Clear\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 357,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                lineNumber: 306,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 277,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 276,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 263,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 262,\n        columnNumber: 5\n    }, undefined);\n};\n_s(PaymentIndicator, \"WTdeEFElfe9KIVBmV5svdc37hHk=\");\n_c = PaymentIndicator;\n// Payment history grid component (12 months)\nconst PaymentGrid = (param)=>{\n    let { application, onPaymentUpdated } = param;\n    _s1();\n    const [payments, setPayments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const fetchPayments = async ()=>{\n            if (!application?.id) return;\n            setLoading(true);\n            try {\n                const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n                const { data, error } = await supabase.from(\"application_payments\").select(\"month_number, payment_status, payment_date, updated_at\").eq(\"application_id\", application.id).order(\"month_number\");\n                if (error) {\n                    console.error(\"Error fetching payments:\", error);\n                    // Don't show error toast for permission issues\n                    if (!error.message.includes(\"permission\") && !error.message.includes(\"must be owner\")) {\n                        sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Failed to load payment history\");\n                    }\n                // Continue without data - we'll fallback to application month fields\n                } else {\n                    setPayments(data || []);\n                }\n            } catch (error) {\n                console.error(\"Error fetching payments:\", error);\n            // Don't show error toast to avoid overwhelming the user\n            } finally{\n                setLoading(false);\n            }\n        };\n        fetchPayments();\n    }, [\n        application?.id\n    ]);\n    // Custom refresh function for when payments are updated\n    const refreshPayments = ()=>{\n        if (onPaymentUpdated) {\n            onPaymentUpdated();\n        }\n    };\n    // Create an array of 12 months\n    const months = Array.from({\n        length: 12\n    }, (_, i)=>i + 1);\n    // Get payment status for a specific month\n    const getMonthStatus = (month)=>{\n        // First try to get from payments data\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment) {\n            return payment.payment_status;\n        }\n        // Auto-set first month as paid if application status contains \"Paid\" or \"paid_status\" is \"Paid\"\n        if (month === 1 && (application.status?.includes(\"Paid\") || application.paid_status === \"Paid\" || application.status === \"Live\" || application.status === \"Approved\")) {\n            console.log(`Auto-marking month 1 as PAID for application with status=${application.status}, paid_status=${application.paid_status}`);\n            return \"PAID\";\n        }\n        // Fallback to month_X fields for backward compatibility\n        const monthKey = `month_${month}`;\n        return application[monthKey] || null;\n    };\n    // Get payment date for a specific month\n    const getPaymentDate = (month)=>{\n        // First check from payments data\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment && payment.payment_date) {\n            return payment.payment_date;\n        }\n        // For first month, use effective_policy_date if it exists and month is paid\n        if (month === 1 && getMonthStatus(month) === \"PAID\" && application.effective_policy_date) {\n            return application.effective_policy_date;\n        }\n        return null;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Auto-update first payment if status is \"Paid & Issued\" or paid_status is \"Paid\"\n        const autoUpdateFirstPayment = async ()=>{\n            if (!application?.id) return;\n            // Check if status qualifies for auto-marking first payment\n            const shouldAutoMarkFirstPayment = (application.status?.includes(\"Paid\") || application.paid_status === \"Paid\" || application.status === \"Live\" || application.status === \"Approved\") && !payments.some((p)=>p.month_number === 1 && p.payment_status === \"PAID\");\n            if (shouldAutoMarkFirstPayment) {\n                try {\n                    console.log(`Auto-updating first payment record for application ${application.id}`);\n                    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n                    // First check if the RPC function exists\n                    const { data: rpcCheck, error: rpcCheckError } = await supabase.rpc(\"update_payment_and_policy_health\", {\n                        p_application_id: application.id,\n                        p_month_number: 1,\n                        p_payment_status: \"PAID\",\n                        p_payment_date: application.effective_policy_date || new Date().toISOString()\n                    }, {\n                        count: \"exact\"\n                    });\n                    if (rpcCheckError) {\n                        console.error(\"Error checking RPC function:\", rpcCheckError);\n                        // Fallback to direct insert if RPC is not available\n                        console.log(\"Falling back to direct insert into application_payments\");\n                        // Check if payment record exists\n                        const { data: existingPayments } = await supabase.from(\"application_payments\").select(\"id\").eq(\"application_id\", application.id).eq(\"month_number\", 1);\n                        if (!existingPayments || existingPayments.length === 0) {\n                            // Insert new payment record\n                            await supabase.from(\"application_payments\").insert({\n                                application_id: application.id,\n                                month_number: 1,\n                                payment_status: \"PAID\",\n                                payment_date: application.effective_policy_date || new Date().toISOString()\n                            });\n                        } else {\n                            // Update existing payment record\n                            await supabase.from(\"application_payments\").update({\n                                payment_status: \"PAID\",\n                                payment_date: application.effective_policy_date || new Date().toISOString(),\n                                updated_at: new Date().toISOString()\n                            }).eq(\"application_id\", application.id).eq(\"month_number\", 1);\n                        }\n                    }\n                    // Also update legacy month_1 field directly\n                    await supabase.from(\"agent_applications\").update({\n                        month_1: \"PAID\"\n                    }).eq(\"id\", application.id);\n                    refreshPayments();\n                    console.log(\"First payment auto-updated successfully\");\n                } catch (error) {\n                    console.error(\"Error auto-updating first payment:\", error);\n                }\n            }\n        };\n        autoUpdateFirstPayment();\n    }, [\n        application?.id,\n        application?.status,\n        application?.paid_status,\n        payments\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"payment-history-container\",\n        children: loading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Loading payment history...\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 557,\n            columnNumber: 9\n        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: months.map((month)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PaymentIndicator, {\n                    status: getMonthStatus(month),\n                    monthNumber: month,\n                    applicationId: application.id,\n                    paymentDate: getPaymentDate(month),\n                    onPaymentUpdated: refreshPayments\n                }, month, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 561,\n                    columnNumber: 13\n                }, undefined))\n        }, void 0, false)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 555,\n        columnNumber: 5\n    }, undefined);\n};\n_s1(PaymentGrid, \"XznPJkF/FJRogWEef9Xsl0ix/TA=\");\n_c1 = PaymentGrid;\n// Payment Update Modal Component\nconst PaymentUpdateModal = (param)=>{\n    let { applicationId, monthNumber, currentStatus, currentPaymentDate, onClose } = param;\n    _s2();\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(currentStatus || \"\");\n    const [paymentDate, setPaymentDate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(currentPaymentDate || \"\");\n    const [isSaving, setIsSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n    const handleSave = async ()=>{\n        if (!status) {\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Please select a payment status\");\n            return;\n        }\n        setIsSaving(true);\n        try {\n            // Check if payment record exists\n            const { data: existingPayments, error: fetchError } = await supabase.from(\"application_payments\").select(\"*\").eq(\"application_id\", applicationId).eq(\"month_number\", monthNumber);\n            if (fetchError) throw fetchError;\n            // If record exists, update it, otherwise insert new record\n            if (existingPayments && existingPayments.length > 0) {\n                const { error } = await supabase.from(\"application_payments\").update({\n                    payment_status: status,\n                    payment_date: status === \"PAID\" ? paymentDate || null : null,\n                    updated_at: new Date().toISOString()\n                }).eq(\"application_id\", applicationId).eq(\"month_number\", monthNumber);\n                if (error) throw error;\n            } else {\n                const { error } = await supabase.from(\"application_payments\").insert({\n                    application_id: applicationId,\n                    month_number: monthNumber,\n                    payment_status: status,\n                    payment_date: status === \"PAID\" ? paymentDate || null : null\n                });\n                if (error) throw error;\n            }\n            // Update policy health\n            await updatePolicyHealth(applicationId);\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.success(\"Payment status updated\");\n            onClose();\n        } catch (error) {\n            console.error(\"Error saving payment status:\", error);\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Error saving payment status\");\n        } finally{\n            setIsSaving(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"payment-update-modal\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"payment-modal-content\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"payment-modal-header\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            children: [\n                                \"Update Payment Status - Month \",\n                                monthNumber\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 656,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"close-modal\",\n                            onClick: onClose,\n                            children: \"\\xd7\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 657,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 655,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"payment-modal-body\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"form-group\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"payment-status\",\n                                    children: \"Payment Status\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 661,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                    id: \"payment-status\",\n                                    className: \"payment-status-select\",\n                                    value: status,\n                                    onChange: (e)=>setStatus(e.target.value),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"\",\n                                            children: \"Select Status\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 668,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"PAID\",\n                                            children: \"Paid\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 669,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"MISSED\",\n                                            children: \"Missed\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 670,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"PENDING\",\n                                            children: \"Pending\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 671,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"NSF\",\n                                            children: \"NSF (Insufficient Funds)\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 672,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"WAIVED\",\n                                            children: \"Waived\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 673,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 662,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 660,\n                            columnNumber: 11\n                        }, undefined),\n                        status === \"PAID\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"form-group\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"payment-date\",\n                                    children: \"Payment Date\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 678,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"date\",\n                                    id: \"payment-date\",\n                                    className: \"payment-date-input\",\n                                    value: paymentDate || \"\",\n                                    onChange: (e)=>setPaymentDate(e.target.value)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 679,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 677,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 659,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"payment-modal-footer\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"cancel-btn\",\n                            onClick: onClose,\n                            disabled: isSaving,\n                            children: \"Cancel\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 690,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"save-btn\",\n                            onClick: handleSave,\n                            disabled: isSaving,\n                            children: isSaving ? \"Saving...\" : \"Save Changes\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 691,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 689,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 654,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 653,\n        columnNumber: 5\n    }, undefined);\n};\n_s2(PaymentUpdateModal, \"d3JZo53ISmzkg7u2ZDUPcAL95X4=\");\n_c2 = PaymentUpdateModal;\n// Function to update policy health based on payment statuses\nasync function updatePolicyHealth(applicationId) {\n    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n    try {\n        // Get all payments for this application\n        const { data: payments, error: fetchError } = await supabase.from(\"application_payments\").select(\"*\").eq(\"application_id\", applicationId);\n        if (fetchError) throw fetchError;\n        // Get application details\n        const { data: applications, error: appError } = await supabase.from(\"agent_applications\").select(\"status, paid_status\").eq(\"id\", applicationId);\n        if (appError) throw appError;\n        if (!applications || applications.length === 0) return;\n        const app = applications[0];\n        // Check if policy is already cancelled\n        if (app.status?.includes(\"Cancelled\") || app.status === \"Declined\") {\n            return; // Don't change cancelled policies\n        }\n        // Count missed payments\n        const missedPayments = payments?.filter((p)=>p.payment_status === \"MISSED\" || p.payment_status === \"NSF\").length || 0;\n        // Determine new policy health\n        let newPolicyHealth;\n        if (missedPayments >= 2) {\n            newPolicyHealth = \"Payment Issues\";\n        } else if (app.status === \"Approved\" && app.paid_status === \"Paid\") {\n            newPolicyHealth = \"Active\";\n        } else if (app.status === \"Approved\" && app.paid_status === \"Unpaid\") {\n            newPolicyHealth = \"Pending First Payment\";\n        } else {\n            // Keep existing policy health\n            return;\n        }\n        // Update policy health\n        const { error: updateError } = await supabase.from(\"agent_applications\").update({\n            policy_health: newPolicyHealth\n        }).eq(\"id\", applicationId);\n        if (updateError) throw updateError;\n    } catch (error) {\n        console.error(\"Error updating policy health:\", error);\n        throw error;\n    }\n}\n// Payment status legend component\nconst PaymentLegend = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-paid\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 765,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Paid\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 766,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 764,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-missed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 769,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Missed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 770,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 768,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-pending\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 773,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Pending\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 774,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 772,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-nsf\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 777,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"NSF\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 778,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 776,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-waived\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 781,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Waived\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 782,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 780,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-empty\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 785,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Not Due\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 786,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 784,\n                columnNumber: 5\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 763,\n        columnNumber: 3\n    }, undefined);\n_c3 = PaymentLegend;\n// NEW: Create a wrapper component for the payment history grid\nconst SafePaymentHistoryGrid = (param)=>{\n    let { applicationId } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ErrorBoundary__WEBPACK_IMPORTED_MODULE_9__.ErrorBoundary, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PaymentHistoryGrid, {\n            applicationId: applicationId\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 795,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 794,\n        columnNumber: 5\n    }, undefined);\n};\n_c4 = SafePaymentHistoryGrid;\n// NEW: Payment history grid component for the applications table\nconst PaymentHistoryGrid = (param)=>{\n    let { applicationId } = param;\n    _s3();\n    const [payments, setPayments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [application, setApplication] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [shouldShowPayments, setShouldShowPayments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [nextPaymentDates, setNextPaymentDates] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    // Use a stable key for rendering indicators\n    const stableKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(`payment-grid-${applicationId}`).current;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Set isMounted ref to true when component mounts\n        isMounted.current = true;\n        // Only fetch if we have an application ID\n        if (applicationId) {\n            fetchApplicationDetails();\n            fetchPayments();\n        }\n        // Clean up function that runs when component unmounts\n        return ()=>{\n            // Mark component as unmounted to prevent state updates\n            isMounted.current = false;\n        };\n    }, [\n        applicationId\n    ]);\n    // Fetch application details to get effective policy date and status\n    const fetchApplicationDetails = async ()=>{\n        if (!applicationId) return;\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n            const { data, error } = await supabase.from(\"agent_applications\").select(\"effective_policy_date, status, paid_status, month_1\").eq(\"id\", applicationId).single();\n            if (error) {\n                console.error(\"Error fetching application details:\", error);\n                return;\n            }\n            if (data && isMounted.current) {\n                setApplication(data);\n                // MUCH STRICTER check - Only show payment history for applications explicitly marked as paid\n                const isIssuedAndPaid = data.paid_status === \"Paid\" && data.effective_policy_date !== null;\n                setShouldShowPayments(isIssuedAndPaid);\n            }\n        } catch (error) {\n            console.error(\"Error in fetchApplicationDetails:\", error);\n        }\n    };\n    const fetchPayments = async ()=>{\n        if (!applicationId) return;\n        setLoading(true);\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n            const { data, error } = await supabase.from(\"application_payments\").select(\"month_number, payment_status, payment_date, updated_at\").eq(\"application_id\", applicationId).order(\"month_number\");\n            if (error) {\n                // Still log the error but don't show to user\n                console.error(\"Error fetching payments:\", error);\n            } else if (data && isMounted.current) {\n                setPayments(data);\n                // Extract and track next payment dates\n                const paymentDates = {};\n                data.forEach((payment)=>{\n                    if (payment.payment_date) {\n                        paymentDates[payment.month_number] = payment.payment_date;\n                    }\n                });\n                setNextPaymentDates(paymentDates);\n            }\n        } catch (error) {\n            console.error(\"Error in payment history:\", error);\n        } finally{\n            if (isMounted.current) {\n                setLoading(false);\n            }\n        }\n    };\n    const getMonthStatus = (month)=>{\n        // First check payment record\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment?.payment_status) {\n            return payment.payment_status;\n        }\n        // For first month, ONLY show as PAID if it's explicitly set that way\n        if (month === 1 && application) {\n            // Only trust the explicit month_1 field or payments table records\n            // Do not automatically assume paid based on status\n            if (application.month_1 === \"PAID\") {\n                return \"PAID\";\n            }\n        }\n        return null;\n    };\n    const getPaymentDate = (month)=>{\n        // First check from payments data\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment?.payment_date) {\n            return payment.payment_date;\n        }\n        // For first month with effective policy date\n        if (month === 1 && application?.effective_policy_date && getMonthStatus(1) === \"PAID\") {\n            return application.effective_policy_date;\n        }\n        // Check if this is a consecutive month that should be scheduled\n        if (month > 1 && nextPaymentDates[month]) {\n            return nextPaymentDates[month];\n        }\n        return null;\n    };\n    const getTooltipText = (month)=>{\n        const status = getMonthStatus(month);\n        const date = getPaymentDate(month);\n        if (!status) {\n            return `Month ${month}: Not yet due`;\n        }\n        if (date) {\n            const formattedDate = new Date(date).toLocaleDateString();\n            return `Month ${month}: ${status} (${formattedDate})`;\n        }\n        return `Month ${month}: ${status}`;\n    };\n    const handlePaymentUpdated = ()=>{\n        if (isMounted.current) {\n            fetchPayments();\n            fetchApplicationDetails();\n        }\n    };\n    // Create indicators for months 1-12 with careful key management\n    const renderPaymentIndicators = ()=>{\n        const months = Array.from({\n            length: 12\n        }, (_, i)=>i + 1);\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex gap-1 items-center\",\n            children: months.map((month)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PaymentIndicator, {\n                    status: getMonthStatus(month),\n                    monthNumber: month,\n                    applicationId: applicationId,\n                    paymentDate: getPaymentDate(month),\n                    onPaymentUpdated: handlePaymentUpdated\n                }, `${stableKey}-month-${month}`, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 967,\n                    columnNumber: 11\n                }, undefined))\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 965,\n            columnNumber: 7\n        }, undefined);\n    };\n    // Show nothing if the application isn't issued and paid\n    if (!shouldShowPayments) {\n        if (application?.effective_policy_date && application?.paid_status !== \"Paid\") {\n            // Show a placeholder with explanation for applications with effective date but not paid\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"payment-history-container flex items-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-xs text-gray-500\",\n                    children: \"Payment tracking begins after first payment\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 986,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 985,\n                columnNumber: 9\n            }, undefined);\n        }\n        // Otherwise show nothing\n        return null;\n    }\n    // Create a simpler display if loading is taking too long\n    if (loading && payments.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"payment-history-container flex items-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-xs text-gray-500\",\n                children: \"Loading...\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 998,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 997,\n            columnNumber: 7\n        }, undefined);\n    }\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"payment-history-container\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-xs text-red-500\",\n                children: error\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1006,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 1005,\n            columnNumber: 7\n        }, undefined);\n    }\n    // Render the actual component\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"payment-history-container\",\n        children: renderPaymentIndicators()\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 1013,\n        columnNumber: 5\n    }, undefined);\n};\n_s3(PaymentHistoryGrid, \"4czBWxCtPAxC1C2/c1WF62kcndk=\");\n_c5 = PaymentHistoryGrid;\n// Payment history legend component\nconst PaymentHistoryLegend = ()=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center gap-3 text-xs text-gray-600 mt-2 mb-4\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"font-medium\",\n                children: \"Payment Legend:\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1023,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#137333] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1025,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Paid\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1026,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1024,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#1a73e8] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1029,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Pending\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1030,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1028,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#c5221f] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1033,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Missed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1034,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1032,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#ea8600] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1037,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"NSF\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1038,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1036,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#80868b] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1041,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Waived\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1042,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1040,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full border border-gray-300 mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1045,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Not Set\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1046,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1044,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 1022,\n        columnNumber: 5\n    }, undefined);\n};\n_c6 = PaymentHistoryLegend;\nvar _c, _c1, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"PaymentIndicator\");\n$RefreshReg$(_c1, \"PaymentGrid\");\n$RefreshReg$(_c2, \"PaymentUpdateModal\");\n$RefreshReg$(_c3, \"PaymentLegend\");\n$RefreshReg$(_c4, \"SafePaymentHistoryGrid\");\n$RefreshReg$(_c5, \"PaymentHistoryGrid\");\n$RefreshReg$(_c6, \"PaymentHistoryLegend\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYWdlbnQvYXBwbGljYXRpb25zL2NvbXBvbmVudHMvUGF5bWVudENvbXBvbmVudHMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFbUQ7QUFFQztBQUNxQztBQUNqRDtBQUNWO0FBQ21EO0FBQ2xDO0FBQ0k7QUFDbEI7QUFDVTtBQUNJO0FBVS9DLGtFQUFrRTtBQUMzRCxNQUFNYyxtQkFBbUI7UUFBQyxFQUMvQkMsTUFBTSxFQUNOQyxXQUFXLEVBQ1hDLGFBQWEsRUFDYkMsV0FBVyxFQUNYQyxnQkFBZ0IsRUFPakI7O0lBQ0MsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUdyQiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUNzQixpQkFBaUJDLG1CQUFtQixHQUFHdkIsK0NBQVFBLENBQUM7SUFDdkQsTUFBTSxDQUFDd0IsY0FBY0MsZ0JBQWdCLEdBQUd6QiwrQ0FBUUEsQ0FDOUNrQixjQUFjLElBQUlRLEtBQUtSLGVBQWVTO0lBRXhDLE1BQU1DLFlBQVkxQiw2Q0FBTUEsQ0FBQztJQUV6QixrQ0FBa0M7SUFDbENELGdEQUFTQSxDQUFDO1FBQ1IyQixVQUFVQyxPQUFPLEdBQUc7UUFFcEIsT0FBTztZQUNMRCxVQUFVQyxPQUFPLEdBQUc7UUFDdEI7SUFDRixHQUFHLEVBQUU7SUFFTCxvRUFBb0U7SUFDcEUsTUFBTUMsc0JBQXNCO1FBQzFCLE1BQU1DLFlBQVkzQiw0RUFBd0JBLENBQUNXO1FBQzNDLE1BQU1pQixrQkFBa0JoQixnQkFBZ0IsSUFBSSxpQkFBaUI7UUFDN0QseUNBQXlDO1FBQ3pDLE1BQU1pQixPQUFPO1FBQ2IsT0FBTyxDQUFDLGtCQUFrQixFQUFFRixVQUFVLENBQUMsRUFBRUMsZ0JBQWdCLENBQUMsRUFBRUMsS0FBSyxDQUFDLEVBQUViLGFBQWEsa0JBQWtCLEdBQUcsQ0FBQztJQUN6RztJQUVBLE1BQU1jLGlCQUFpQko7SUFDdkIscUVBQXFFO0lBQ3JFLE1B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IndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwcC9hZ2VudC9hcHBsaWNhdGlvbnMvY29tcG9uZW50cy9QYXltZW50Q29tcG9uZW50cy50c3g/ZDQ4OSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcclxuXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBBZ2VudEFwcGxpY2F0aW9uLCBQYXltZW50U3RhdHVzIH0gZnJvbSAnQC90eXBlcy9hcHBsaWNhdGlvbidcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2UvY2xpZW50J1xyXG5pbXBvcnQgeyBnZXRQYXltZW50SW5kaWNhdG9yQ2xhc3MsIGdldFBheW1lbnRJbmRpY2F0b3JUaXRsZSB9IGZyb20gJy4uL3V0aWxzL3N0YXR1c1V0aWxzJ1xyXG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvc3RhdHVzLXN0eWxlcy5jc3MnXHJcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSAnc29ubmVyJ1xyXG5pbXBvcnQgeyBQb3BvdmVyLCBQb3BvdmVyQ29udGVudCwgUG9wb3ZlclRyaWdnZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvcG9wb3ZlcidcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2J1dHRvbidcclxuaW1wb3J0IHsgQ2FsZW5kYXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2FsZW5kYXInXHJcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJ1xyXG5pbXBvcnQgeyBDYWxlbmRhckljb24gfSBmcm9tICdsdWNpZGUtcmVhY3QnXHJcbmltcG9ydCB7IEVycm9yQm91bmRhcnkgfSBmcm9tICcuL0Vycm9yQm91bmRhcnknXHJcblxyXG4vLyBEZWZpbmUgdGhlIHR5cGUgZm9yIHBheW1lbnQgZGF0YSBmcm9tIGRhdGFiYXNlXHJcbmludGVyZmFjZSBQYXltZW50RGF0YSB7XHJcbiAgbW9udGhfbnVtYmVyOiBudW1iZXJcclxuICBwYXltZW50X3N0YXR1czogUGF5bWVudFN0YXR1cyB8IG51bGxcclxuICBwYXltZW50X2RhdGU6IHN0cmluZyB8IG51bGxcclxuICB1cGRhdGVkX2F0OiBzdHJpbmcgfCBudWxsXHJcbn1cclxuXHJcbi8vIFNpbmdsZSBwYXltZW50IGluZGljYXRvciBjb21wb25lbnQgd2l0aCBpbXByb3ZlZCBlcnJvciBoYW5kbGluZ1xyXG5leHBvcnQgY29uc3QgUGF5bWVudEluZGljYXRvciA9ICh7IFxyXG4gIHN0YXR1cywgXHJcbiAgbW9udGhOdW1iZXIsIFxyXG4gIGFwcGxpY2F0aW9uSWQsXHJcbiAgcGF5bWVudERhdGUsXHJcbiAgb25QYXltZW50VXBkYXRlZFxyXG59OiB7IFxyXG4gIHN0YXR1czogUGF5bWVudFN0YXR1cyB8IG51bGwsIFxyXG4gIG1vbnRoTnVtYmVyOiBudW1iZXIsIFxyXG4gIGFwcGxpY2F0aW9uSWQ6IHN0cmluZyxcclxuICBwYXltZW50RGF0ZT86IHN0cmluZyB8IG51bGwsXHJcbiAgb25QYXltZW50VXBkYXRlZD86ICgpID0+IHZvaWRcclxufSkgPT4ge1xyXG4gIGNvbnN0IFtpc1VwZGF0aW5nLCBzZXRJc1VwZGF0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbc2hvd1BheW1lbnRNZW51LCBzZXRTaG93UGF5bWVudE1lbnVdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtzZWxlY3RlZERhdGUsIHNldFNlbGVjdGVkRGF0ZV0gPSB1c2VTdGF0ZTxEYXRlIHwgdW5kZWZpbmVkPihcclxuICAgIHBheW1lbnREYXRlID8gbmV3IERhdGUocGF5bWVudERhdGUpIDogdW5kZWZpbmVkXHJcbiAgKTtcclxuICBjb25zdCBpc01vdW50ZWQgPSB1c2VSZWYodHJ1ZSk7XHJcbiAgXHJcbiAgLy8gQ2xlYXIgc3RhdGUgYW5kIHJlZnMgb24gdW5tb3VudFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpc01vdW50ZWQuY3VycmVudCA9IHRydWU7XHJcbiAgICBcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlzTW91bnRlZC5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuICBcclxuICAvLyBVc2UgbGFyZ2VyIHNpemVzIGFuZCBtb3JlIHZpc2libGUgc3R5bGVzIGZvciBpbXBvcnRhbnQgaW5kaWNhdG9yc1xyXG4gIGNvbnN0IGdldEluZGljYXRvckNsYXNzZXMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBiYXNlQ2xhc3MgPSBnZXRQYXltZW50SW5kaWNhdG9yQ2xhc3Moc3RhdHVzKTtcclxuICAgIGNvbnN0IGZpcnN0TW9udGhDbGFzcyA9IG1vbnRoTnVtYmVyID09PSAxID8gJ2ZpcnN0LW1vbnRoICcgOiAnJztcclxuICAgIC8vIE1ha2UgYWxsIGluZGljYXRvcnMgY29uc2lzdGVudGx5IHNtYWxsXHJcbiAgICBjb25zdCBzaXplID0gJ3ctMyBoLTMnO1xyXG4gICAgcmV0dXJuIGBwYXltZW50LWluZGljYXRvciAke2Jhc2VDbGFzc30gJHtmaXJzdE1vbnRoQ2xhc3N9ICR7c2l6ZX0gJHtpc1VwZGF0aW5nID8gJ2FuaW1hdGUtcHVsc2UnIDogJyd9YDtcclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IGluZGljYXRvckNsYXNzID0gZ2V0SW5kaWNhdG9yQ2xhc3NlcygpO1xyXG4gIC8vIEVuc3VyZSBhbGwgaW5kaWNhdG9ycyBoYXZlIGEgbWVhbmluZ2Z1bCB0b29sdGlwIHdpdGggcGF5bWVudCBkYXRlc1xyXG4gIGNvbnN0IHRvb2x0aXBUaXRsZSA9ICFzdGF0dXMgXHJcbiAgICA/IGBNb250aCAke21vbnRoTnVtYmVyfTogQ2xpY2sgdG8gc2V0IHBheW1lbnQgc3RhdHVzYFxyXG4gICAgOiBwYXltZW50RGF0ZSBcclxuICAgICAgPyBgTW9udGggJHttb250aE51bWJlcn06ICR7c3RhdHVzfSAoJHtuZXcgRGF0ZShwYXltZW50RGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9KWBcclxuICAgICAgOiBgTW9udGggJHttb250aE51bWJlcn06ICR7c3RhdHVzfWA7XHJcbiAgXHJcbiAgLy8gQ2hlY2sgaWYgdGhpcyBpcyB0aGUgZmlyc3QgcGF5bWVudCBhbmQgaXQgc2hvdWxkIGJlIG1hcmtlZCBhcyBwYWlkXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBpc0FjdGl2ZSA9IHRydWU7IC8vIFRyYWNrIHdoZXRoZXIgdGhpcyBlZmZlY3Qgc2hvdWxkIHN0aWxsIHVwZGF0ZSBzdGF0ZVxyXG4gICAgXHJcbiAgICBjb25zdCBjaGVja0ZpcnN0UGF5bWVudCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKG1vbnRoTnVtYmVyID09PSAxICYmICFzdGF0dXMpIHtcclxuICAgICAgICAvLyBGZXRjaCB0aGUgYXBwbGljYXRpb24gZGV0YWlsc1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgLmZyb20oJ2FnZW50X2FwcGxpY2F0aW9ucycpXHJcbiAgICAgICAgICAgIC5zZWxlY3QoJ3N0YXR1cywgcGFpZF9zdGF0dXMsIGVmZmVjdGl2ZV9wb2xpY3lfZGF0ZScpXHJcbiAgICAgICAgICAgIC5lcSgnaWQnLCBhcHBsaWNhdGlvbklkKVxyXG4gICAgICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gT25seSBwcm9jZWVkIGlmIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkIGFuZCBlZmZlY3QgaXMgc3RpbGwgYWN0aXZlXHJcbiAgICAgICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQgJiYgaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgLy8gTVVDSCBzdHJpY3RlciBjaGVjayAtIG9ubHkgbWFyayBhcyBwYWlkIGlmIGV4cGxpY2l0bHkgcGFpZF9zdGF0dXM9J1BhaWQnXHJcbiAgICAgICAgICAgIGlmIChkYXRhICYmIFxyXG4gICAgICAgICAgICAgICAgZGF0YS5wYWlkX3N0YXR1cyA9PT0gJ1BhaWQnICYmIFxyXG4gICAgICAgICAgICAgICAgZGF0YS5lZmZlY3RpdmVfcG9saWN5X2RhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBtYXJrZWQgYXMgcGFpZCwgc28gdXBkYXRlIGl0XHJcbiAgICAgICAgICAgICAgdXBkYXRlUGF5bWVudFN0YXR1cygnUEFJRCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBmaXJzdCBwYXltZW50IHN0YXR1czonLCBlcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBtYXJrIGFzIHBhaWRcclxuICAgIGNoZWNrRmlyc3RQYXltZW50KCk7XHJcbiAgICBcclxuICAgIC8vIENsZWFudXAgZnVuY3Rpb25cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlzQWN0aXZlID0gZmFsc2U7IC8vIE1hcmsgZWZmZWN0IGFzIGluYWN0aXZlIHdoZW4gdW5tb3VudGVkXHJcbiAgICB9O1xyXG4gIH0sIFttb250aE51bWJlciwgc3RhdHVzLCBhcHBsaWNhdGlvbklkXSk7XHJcbiAgXHJcbiAgY29uc3QgdXBkYXRlUGF5bWVudFN0YXR1cyA9IGFzeW5jIChuZXdTdGF0dXM6IFBheW1lbnRTdGF0dXMsIGRhdGU/OiBEYXRlIHwgbnVsbCkgPT4ge1xyXG4gICAgaWYgKCFpc01vdW50ZWQuY3VycmVudCkgcmV0dXJuOyAvLyBEb24ndCBwcm9jZWVkIGlmIHVubW91bnRlZFxyXG4gICAgXHJcbiAgICBzZXRJc1VwZGF0aW5nKHRydWUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFVzZSB0aGUgcGF5bWVudCBkYXRlIGxvZ2ljXHJcbiAgICAgIGNvbnN0IHBheW1lbnREYXRlID0gZGF0ZSB8fCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAobmV3U3RhdHVzID09PSAnUEFJRCcgPyBuZXcgRGF0ZSgpIDogbnVsbCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBVc2Ugb3VyIG5ldyB0cmFja19wYXltZW50IFJQQyBmdW5jdGlvbiBmb3IgcHJvcGVyIHBheW1lbnQgdHJhY2tpbmdcclxuICAgICAgY29uc3QgeyBkYXRhOiB0cmFja1Jlc3VsdCwgZXJyb3I6IHRyYWNrRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYyhcclxuICAgICAgICAndHJhY2tfcGF5bWVudCcsXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIHBfYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uSWQsXHJcbiAgICAgICAgICBwX21vbnRoX251bWJlcjogbW9udGhOdW1iZXIsXHJcbiAgICAgICAgICBwX3BheW1lbnRfc3RhdHVzOiBuZXdTdGF0dXMsXHJcbiAgICAgICAgICBwX3BheW1lbnRfZGF0ZTogcGF5bWVudERhdGUgPyBwYXltZW50RGF0ZS50b0lTT1N0cmluZygpIDogbnVsbFxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGlmICh0cmFja0Vycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCB0cmFja2luZyBmYWlsZWQ6JywgdHJhY2tFcnJvcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gYmFzaWMgdXBkYXRlIGlmIFJQQyBmYWlsc1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWxsaW5nIGJhY2sgdG8gYmFzaWMgdXBkYXRlLi4uJyk7XHJcbiAgICAgICAgYXdhaXQgZmFsbGJhY2tQYXltZW50VXBkYXRlKHN1cGFiYXNlLCBuZXdTdGF0dXMsIHBheW1lbnREYXRlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdHJhY2tpbmcgd2FzIHN1Y2Nlc3NmdWxcclxuICAgICAgICBpZiAodHJhY2tSZXN1bHQgJiYgdHJhY2tSZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1BheW1lbnQgdHJhY2tpbmcgc3VjY2Vzc2Z1bDonLCB0cmFja1Jlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIG5leHQgcGF5bWVudCBzY2hlZHVsZWQsIGxvZyBpdFxyXG4gICAgICAgICAgaWYgKHRyYWNrUmVzdWx0Lm5leHRfcGF5bWVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTmV4dCBwYXltZW50IHNjaGVkdWxlZDonLCB0cmFja1Jlc3VsdC5uZXh0X3BheW1lbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgdG9hc3Quc3VjY2Vzcyh0cmFja1Jlc3VsdC5tZXNzYWdlIHx8IGBQYXltZW50IGZvciBtb250aCAke21vbnRoTnVtYmVyfSBtYXJrZWQgYXMgJHtuZXdTdGF0dXMgfHwgJ2NsZWFyZWQnfWApO1xyXG4gICAgICAgICAgICBpZiAob25QYXltZW50VXBkYXRlZCkge1xyXG4gICAgICAgICAgICAgIG9uUGF5bWVudFVwZGF0ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBSUEMgc3VjY2VlZGVkIGJ1dCByZXR1cm5lZCBhbiBlcnJvciBtZXNzYWdlXHJcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IHRyYWNrUmVzdWx0Py5tZXNzYWdlIHx8ICdQYXltZW50IHVwZGF0ZSBmYWlsZWQnO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCB0cmFja2luZyByZXR1cm5lZCBlcnJvcjonLCBlcnJvck1zZyk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgICAgICB0b2FzdC5lcnJvcihlcnJvck1zZyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwYXltZW50IHN0YXR1czonLCBlcnJvcik7XHJcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIHRvYXN0LmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHBheW1lbnQgc3RhdHVzJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIHNldElzVXBkYXRpbmcoZmFsc2UpO1xyXG4gICAgICAgIHNldFNob3dQYXltZW50TWVudShmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG4gIFxyXG4gIC8vIEZhbGxiYWNrIHBheW1lbnQgdXBkYXRlIGZ1bmN0aW9uIHdoZW4gUlBDIGZhaWxzXHJcbiAgY29uc3QgZmFsbGJhY2tQYXltZW50VXBkYXRlID0gYXN5bmMgKHN1cGFiYXNlOiBhbnksIG5ld1N0YXR1czogUGF5bWVudFN0YXR1cywgcGF5bWVudERhdGU6IERhdGUgfCBudWxsKSA9PiB7XHJcbiAgICAvLyBGaXJzdCB0cnkgYWdlbnRfYXBwbGljYXRpb25zIHRhYmxlIHVwZGF0ZSAobW9zdCByZWxpYWJsZSlcclxuICAgIGNvbnN0IG1vbnRoRmllbGQgPSBgbW9udGhfJHttb250aE51bWJlcn1gO1xyXG4gICAgY29uc3QgeyBlcnJvcjogYXBwRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdhZ2VudF9hcHBsaWNhdGlvbnMnKVxyXG4gICAgICAudXBkYXRlKHsgW21vbnRoRmllbGRdOiBuZXdTdGF0dXMgfSlcclxuICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICBcclxuICAgIGlmIChhcHBFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIG1vbnRoIGZpZWxkIGluIGFnZW50X2FwcGxpY2F0aW9uczonLCBhcHBFcnJvcik7XHJcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIHRvYXN0LmVycm9yKGBVbmFibGUgdG8gdXBkYXRlIHBheW1lbnQgc3RhdHVzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLmApO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVGhlbiB0cnkgYXBwbGljYXRpb25fcGF5bWVudHMgdGFibGUgYXMgYSBiZXN0IGVmZm9ydFxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgIC51cHNlcnQoe1xyXG4gICAgICAgICAgYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uSWQsXHJcbiAgICAgICAgICBtb250aF9udW1iZXI6IG1vbnRoTnVtYmVyLFxyXG4gICAgICAgICAgcGF5bWVudF9zdGF0dXM6IG5ld1N0YXR1cyxcclxuICAgICAgICAgIHBheW1lbnRfZGF0ZTogcGF5bWVudERhdGUgPyBwYXltZW50RGF0ZS50b0lTT1N0cmluZygpIDogbnVsbCxcclxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0sIHsgXHJcbiAgICAgICAgICBvbkNvbmZsaWN0OiAnYXBwbGljYXRpb25faWQsbW9udGhfbnVtYmVyJyBcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKHBheW1lbnRFcnIpIHtcclxuICAgICAgLy8gSnVzdCBsb2cgdGhpcyBlcnJvciAtIHdlIGFscmVhZHkgdXBkYXRlZCB0aGUgYWdlbnRfYXBwbGljYXRpb25zIHRhYmxlXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgYXBwbGljYXRpb25fcGF5bWVudHMgdGFibGU6JywgcGF5bWVudEVycik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IG1vbnRoIGFuZCBtYXJraW5nIGFzIFBBSUQsIHVwZGF0ZSBwYWlkX3N0YXR1c1xyXG4gICAgaWYgKG1vbnRoTnVtYmVyID09PSAxICYmIG5ld1N0YXR1cyA9PT0gJ1BBSUQnKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhlIGFwcGxpY2F0aW9uIGlzIHRydWx5IGlzc3VlZCBhbmQgdmFsaWQgZm9yIHBheW1lbnRcclxuICAgICAgICBjb25zdCB7IGRhdGE6IGFwcERhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnYWdlbnRfYXBwbGljYXRpb25zJylcclxuICAgICAgICAgIC5zZWxlY3QoJ3N0YXR1cywgcGFpZF9zdGF0dXMsIGVmZmVjdGl2ZV9wb2xpY3lfZGF0ZScpXHJcbiAgICAgICAgICAuZXEoJ2lkJywgYXBwbGljYXRpb25JZClcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHRoZSBhcHBsaWNhdGlvbiBpcyB2YWxpZCBmb3IgcGF5bWVudFxyXG4gICAgICAgIGlmIChhcHBEYXRhICYmIFxyXG4gICAgICAgICAgICAoYXBwRGF0YS5zdGF0dXMgPT09ICdBcHByb3ZlZCcgfHwgXHJcbiAgICAgICAgICAgICBhcHBEYXRhLnN0YXR1cyA9PT0gJ0xpdmUnIHx8IFxyXG4gICAgICAgICAgICAgYXBwRGF0YS5zdGF0dXM/LmluY2x1ZGVzKCdQYWlkJykgfHwgXHJcbiAgICAgICAgICAgICBhcHBEYXRhLnBhaWRfc3RhdHVzID09PSAnUGFpZCcpICYmIFxyXG4gICAgICAgICAgICBhcHBEYXRhLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZSkge1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAuZnJvbSgnYWdlbnRfYXBwbGljYXRpb25zJylcclxuICAgICAgICAgICAgLnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgIHBhaWRfc3RhdHVzOiAnUGFpZCcsXHJcbiAgICAgICAgICAgICAgcG9saWN5X2hlYWx0aDogJ0FjdGl2ZSdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgdG9hc3QuZXJyb3IoJ0ZpcnN0IHBheW1lbnQgY2FuIG9ubHkgYmUgbWFya2VkIGFzIHBhaWQgZm9yIGlzc3VlZCBhbmQgYXBwcm92ZWQgYXBwbGljYXRpb25zJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHBhaWRfc3RhdHVzOicsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgdG9hc3Quc3VjY2VzcyhgUGF5bWVudCBmb3IgbW9udGggJHttb250aE51bWJlcn0gbWFya2VkIGFzICR7bmV3U3RhdHVzIHx8ICdjbGVhcmVkJ31gKTtcclxuICAgICAgaWYgKG9uUGF5bWVudFVwZGF0ZWQpIHtcclxuICAgICAgICBvblBheW1lbnRVcGRhdGVkKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxFcnJvckJvdW5kYXJ5PlxyXG4gICAgICA8UG9wb3ZlciBvcGVuPXtzaG93UGF5bWVudE1lbnV9IG9uT3BlbkNoYW5nZT17c2V0U2hvd1BheW1lbnRNZW51fT5cclxuICAgICAgICA8UG9wb3ZlclRyaWdnZXIgYXNDaGlsZD5cclxuICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17aW5kaWNhdG9yQ2xhc3N9XHJcbiAgICAgICAgICAgIHRpdGxlPXt0b29sdGlwVGl0bGV9XHJcbiAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgYm9yZGVyOiBtb250aE51bWJlciA9PT0gMSA/ICcycHggc29saWQgIzY2NicgOiAnMXB4IHNvbGlkICNkMGQwZDAnLFxyXG4gICAgICAgICAgICAgIGJveFNoYWRvdzogc3RhdHVzID09PSAnUEFJRCcgPyAnMCAwIDJweCAxcHggcmdiYSgxOSwgMTE1LCA1MSwgMC41KScgOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBzdGF0dXMgPyB1bmRlZmluZWQgOiAnd2hpdGUnLCAvLyBGb3JjZSB3aGl0ZSBiYWNrZ3JvdW5kIGZvciBlbXB0eSBpbmRpY2F0b3JzXHJcbiAgICAgICAgICAgICAgb3BhY2l0eTogMSAvLyBFbnN1cmUgZnVsbCBvcGFjaXR5IGF0IGFsbCB0aW1lc1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8L1BvcG92ZXJUcmlnZ2VyPlxyXG4gICAgICAgIDxQb3BvdmVyQ29udGVudCBjbGFzc05hbWU9XCJ3LTcyXCIgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLCBvcGFjaXR5OiAxLCBib3hTaGFkb3c6ICcwIDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpJywgYm9yZGVyOiAnMXB4IHNvbGlkICNkMGQwZDAnIH19PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPk1vbnRoIHttb250aE51bWJlcn0gUGF5bWVudDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgey8qIERhdGUgcGlja2VyICovfVxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxyXG4gICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+UGF5bWVudCBEYXRlPC9sYWJlbD5cclxuICAgICAgICAgICAgICA8UG9wb3Zlcj5cclxuICAgICAgICAgICAgICAgIDxQb3BvdmVyVHJpZ2dlciBhc0NoaWxkPlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBqdXN0aWZ5LXN0YXJ0IHRleHQtbGVmdCBmb250LW5vcm1hbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzVXBkYXRpbmd9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJJY29uIGNsYXNzTmFtZT1cIm1yLTIgaC00IHctNFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkRGF0ZSA/IGZvcm1hdChzZWxlY3RlZERhdGUsICdQUFAnKSA6IDxzcGFuPlBpY2sgYSBkYXRlPC9zcGFuPn1cclxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L1BvcG92ZXJUcmlnZ2VyPlxyXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJDb250ZW50IGNsYXNzTmFtZT1cInctYXV0byBwLTBcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsIG9wYWNpdHk6IDEgfX0+XHJcbiAgICAgICAgICAgICAgICAgIDxDYWxlbmRhclxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGU9XCJzaW5nbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPXtzZWxlY3RlZERhdGV9XHJcbiAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9eyhkYXRlKSA9PiBzZXRTZWxlY3RlZERhdGUoZGF0ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbEZvY3VzXHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L1BvcG92ZXJDb250ZW50PlxyXG4gICAgICAgICAgICAgIDwvUG9wb3Zlcj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB7LyogUGF5bWVudCBzdGF0dXMgYnV0dG9ucyAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAge2lzVXBkYXRpbmcgPyAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTIgZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgcHktNFwiPlxyXG4gICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiBoLTUgdy01IHRleHQtZ3JheS01MDBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9XCJvcGFjaXR5LTI1XCIgY3g9XCIxMlwiIGN5PVwiMTJcIiByPVwiMTBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2VXaWR0aD1cIjRcIj48L2NpcmNsZT5cclxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBjbGFzc05hbWU9XCJvcGFjaXR5LTc1XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNNCAxMmE4IDggMCAwMTgtOFYwQzUuMzczIDAgMCA1LjM3MyAwIDEyaDR6bTIgNS4yOTFBNy45NjIgNy45NjIgMCAwMTQgMTJIMGMwIDMuMDQyIDEuMTM1IDUuODI0IDMgNy45MzhsMy0yLjY0N3pcIj48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0yXCI+VXBkYXRpbmcuLi48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1bI2U2ZjRlYV0gdGV4dC1bIzEzNzMzM10gaG92ZXI6YmctWyNkM2VlZGJdIGhvdmVyOnRleHQtWyMxMzczMzNdXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB1cGRhdGVQYXltZW50U3RhdHVzKCdQQUlEJywgc2VsZWN0ZWREYXRlKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNVcGRhdGluZ31cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIFBhaWRcclxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNmY2U4ZTZdIHRleHQtWyNjNTIyMWZdIGhvdmVyOmJnLVsjZmFkYWQ3XSBob3Zlcjp0ZXh0LVsjYzUyMjFmXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdXBkYXRlUGF5bWVudFN0YXR1cygnTUlTU0VEJywgc2VsZWN0ZWREYXRlKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNVcGRhdGluZ31cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIE1pc3NlZFxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1bI2U4ZjBmZV0gdGV4dC1bIzFhNzNlOF0gaG92ZXI6YmctWyNkNGUyZmNdIGhvdmVyOnRleHQtWyMxYTczZThdXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB1cGRhdGVQYXltZW50U3RhdHVzKCdQRU5ESU5HJywgc2VsZWN0ZWREYXRlKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNVcGRhdGluZ31cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIFBlbmRpbmdcclxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNmZWY3ZTBdIHRleHQtWyNlYTg2MDBdIGhvdmVyOmJnLVsjZmRmM2QwXSBob3Zlcjp0ZXh0LVsjZWE4NjAwXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdXBkYXRlUGF5bWVudFN0YXR1cygnTlNGJywgc2VsZWN0ZWREYXRlKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNVcGRhdGluZ31cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIE5TRlxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1bI2YxZjNmNF0gdGV4dC1bIzgwODY4Yl0gaG92ZXI6YmctWyNlNGU2ZThdIGhvdmVyOnRleHQtWyM4MDg2OGJdXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB1cGRhdGVQYXltZW50U3RhdHVzKCdXQUlWRUQnLCBzZWxlY3RlZERhdGUpfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwZGF0aW5nfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgV2FpdmVkXHJcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXdoaXRlIHRleHQtZ3JheS03MDAgaG92ZXI6YmctZ3JheS0xMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHVwZGF0ZVBheW1lbnRTdGF0dXMobnVsbCwgbnVsbCl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzVXBkYXRpbmd9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICBDbGVhclxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9Qb3BvdmVyQ29udGVudD5cclxuICAgICAgPC9Qb3BvdmVyPlxyXG4gICAgPC9FcnJvckJvdW5kYXJ5PlxyXG4gICk7XHJcbn07XHJcblxyXG4vLyBQYXltZW50IGhpc3RvcnkgZ3JpZCBjb21wb25lbnQgKDEyIG1vbnRocylcclxuZXhwb3J0IGNvbnN0IFBheW1lbnRHcmlkID0gKHsgXHJcbiAgYXBwbGljYXRpb24sXHJcbiAgb25QYXltZW50VXBkYXRlZFxyXG59OiB7IFxyXG4gIGFwcGxpY2F0aW9uOiBBZ2VudEFwcGxpY2F0aW9uLFxyXG4gIG9uUGF5bWVudFVwZGF0ZWQ/OiAoKSA9PiB2b2lkXHJcbn0pID0+IHtcclxuICBjb25zdCBbcGF5bWVudHMsIHNldFBheW1lbnRzXSA9IHVzZVN0YXRlPFBheW1lbnREYXRhW10+KFtdKTtcclxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZTxib29sZWFuPih0cnVlKTtcclxuICBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgZmV0Y2hQYXltZW50cyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKCFhcHBsaWNhdGlvbj8uaWQpIHJldHVybjtcclxuICAgICAgXHJcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ2FwcGxpY2F0aW9uX3BheW1lbnRzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ21vbnRoX251bWJlciwgcGF5bWVudF9zdGF0dXMsIHBheW1lbnRfZGF0ZSwgdXBkYXRlZF9hdCcpXHJcbiAgICAgICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb24uaWQpXHJcbiAgICAgICAgICAub3JkZXIoJ21vbnRoX251bWJlcicpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwYXltZW50czonLCBlcnJvcik7XHJcbiAgICAgICAgICAvLyBEb24ndCBzaG93IGVycm9yIHRvYXN0IGZvciBwZXJtaXNzaW9uIGlzc3Vlc1xyXG4gICAgICAgICAgaWYgKCFlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdwZXJtaXNzaW9uJykgJiYgIWVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ211c3QgYmUgb3duZXInKSkge1xyXG4gICAgICAgICAgICB0b2FzdC5lcnJvcignRmFpbGVkIHRvIGxvYWQgcGF5bWVudCBoaXN0b3J5Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGRhdGEgLSB3ZSdsbCBmYWxsYmFjayB0byBhcHBsaWNhdGlvbiBtb250aCBmaWVsZHNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2V0UGF5bWVudHMoZGF0YSB8fCBbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBheW1lbnRzOicsIGVycm9yKTtcclxuICAgICAgICAvLyBEb24ndCBzaG93IGVycm9yIHRvYXN0IHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgdXNlclxyXG4gICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBmZXRjaFBheW1lbnRzKCk7XHJcbiAgfSwgW2FwcGxpY2F0aW9uPy5pZF0pO1xyXG4gIFxyXG4gIC8vIEN1c3RvbSByZWZyZXNoIGZ1bmN0aW9uIGZvciB3aGVuIHBheW1lbnRzIGFyZSB1cGRhdGVkXHJcbiAgY29uc3QgcmVmcmVzaFBheW1lbnRzID0gKCkgPT4ge1xyXG4gICAgaWYgKG9uUGF5bWVudFVwZGF0ZWQpIHtcclxuICAgICAgb25QYXltZW50VXBkYXRlZCgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgXHJcbiAgLy8gQ3JlYXRlIGFuIGFycmF5IG9mIDEyIG1vbnRoc1xyXG4gIGNvbnN0IG1vbnRocyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEyIH0sIChfLCBpKSA9PiBpICsgMSk7XHJcblxyXG4gIC8vIEdldCBwYXltZW50IHN0YXR1cyBmb3IgYSBzcGVjaWZpYyBtb250aFxyXG4gIGNvbnN0IGdldE1vbnRoU3RhdHVzID0gKG1vbnRoOiBudW1iZXIpOiBQYXltZW50U3RhdHVzIHwgbnVsbCA9PiB7XHJcbiAgICAvLyBGaXJzdCB0cnkgdG8gZ2V0IGZyb20gcGF5bWVudHMgZGF0YVxyXG4gICAgY29uc3QgcGF5bWVudCA9IHBheW1lbnRzLmZpbmQocCA9PiBwLm1vbnRoX251bWJlciA9PT0gbW9udGgpO1xyXG4gICAgaWYgKHBheW1lbnQpIHtcclxuICAgICAgcmV0dXJuIHBheW1lbnQucGF5bWVudF9zdGF0dXM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEF1dG8tc2V0IGZpcnN0IG1vbnRoIGFzIHBhaWQgaWYgYXBwbGljYXRpb24gc3RhdHVzIGNvbnRhaW5zIFwiUGFpZFwiIG9yIFwicGFpZF9zdGF0dXNcIiBpcyBcIlBhaWRcIlxyXG4gICAgaWYgKG1vbnRoID09PSAxICYmIChcclxuICAgICAgICBhcHBsaWNhdGlvbi5zdGF0dXM/LmluY2x1ZGVzKCdQYWlkJykgfHwgXHJcbiAgICAgICAgYXBwbGljYXRpb24ucGFpZF9zdGF0dXMgPT09ICdQYWlkJyB8fCBcclxuICAgICAgICBhcHBsaWNhdGlvbi5zdGF0dXMgPT09ICdMaXZlJyB8fFxyXG4gICAgICAgIGFwcGxpY2F0aW9uLnN0YXR1cyA9PT0gJ0FwcHJvdmVkJ1xyXG4gICAgICApKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBBdXRvLW1hcmtpbmcgbW9udGggMSBhcyBQQUlEIGZvciBhcHBsaWNhdGlvbiB3aXRoIHN0YXR1cz0ke2FwcGxpY2F0aW9uLnN0YXR1c30sIHBhaWRfc3RhdHVzPSR7YXBwbGljYXRpb24ucGFpZF9zdGF0dXN9YCk7XHJcbiAgICAgIHJldHVybiAnUEFJRCc7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZhbGxiYWNrIHRvIG1vbnRoX1ggZmllbGRzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XHJcbiAgICBjb25zdCBtb250aEtleSA9IGBtb250aF8ke21vbnRofWAgYXMga2V5b2YgdHlwZW9mIGFwcGxpY2F0aW9uO1xyXG4gICAgcmV0dXJuIChhcHBsaWNhdGlvblttb250aEtleV0gYXMgUGF5bWVudFN0YXR1cykgfHwgbnVsbDtcclxuICB9O1xyXG4gIFxyXG4gIC8vIEdldCBwYXltZW50IGRhdGUgZm9yIGEgc3BlY2lmaWMgbW9udGhcclxuICBjb25zdCBnZXRQYXltZW50RGF0ZSA9IChtb250aDogbnVtYmVyKTogc3RyaW5nIHwgbnVsbCA9PiB7XHJcbiAgICAvLyBGaXJzdCBjaGVjayBmcm9tIHBheW1lbnRzIGRhdGFcclxuICAgIGNvbnN0IHBheW1lbnQgPSBwYXltZW50cy5maW5kKHAgPT4gcC5tb250aF9udW1iZXIgPT09IG1vbnRoKTtcclxuICAgIGlmIChwYXltZW50ICYmIHBheW1lbnQucGF5bWVudF9kYXRlKSB7XHJcbiAgICAgIHJldHVybiBwYXltZW50LnBheW1lbnRfZGF0ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRm9yIGZpcnN0IG1vbnRoLCB1c2UgZWZmZWN0aXZlX3BvbGljeV9kYXRlIGlmIGl0IGV4aXN0cyBhbmQgbW9udGggaXMgcGFpZFxyXG4gICAgaWYgKG1vbnRoID09PSAxICYmIGdldE1vbnRoU3RhdHVzKG1vbnRoKSA9PT0gJ1BBSUQnICYmIGFwcGxpY2F0aW9uLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZSkge1xyXG4gICAgICByZXR1cm4gYXBwbGljYXRpb24uZWZmZWN0aXZlX3BvbGljeV9kYXRlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9O1xyXG4gIFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBBdXRvLXVwZGF0ZSBmaXJzdCBwYXltZW50IGlmIHN0YXR1cyBpcyBcIlBhaWQgJiBJc3N1ZWRcIiBvciBwYWlkX3N0YXR1cyBpcyBcIlBhaWRcIlxyXG4gICAgY29uc3QgYXV0b1VwZGF0ZUZpcnN0UGF5bWVudCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKCFhcHBsaWNhdGlvbj8uaWQpIHJldHVybjtcclxuICAgICAgXHJcbiAgICAgIC8vIENoZWNrIGlmIHN0YXR1cyBxdWFsaWZpZXMgZm9yIGF1dG8tbWFya2luZyBmaXJzdCBwYXltZW50XHJcbiAgICAgIGNvbnN0IHNob3VsZEF1dG9NYXJrRmlyc3RQYXltZW50ID0gKFxyXG4gICAgICAgIChhcHBsaWNhdGlvbi5zdGF0dXM/LmluY2x1ZGVzKCdQYWlkJykgfHwgXHJcbiAgICAgICAgIGFwcGxpY2F0aW9uLnBhaWRfc3RhdHVzID09PSAnUGFpZCcgfHwgXHJcbiAgICAgICAgIGFwcGxpY2F0aW9uLnN0YXR1cyA9PT0gJ0xpdmUnIHx8XHJcbiAgICAgICAgIGFwcGxpY2F0aW9uLnN0YXR1cyA9PT0gJ0FwcHJvdmVkJykgJiYgXHJcbiAgICAgICAgIXBheW1lbnRzLnNvbWUocCA9PiBwLm1vbnRoX251bWJlciA9PT0gMSAmJiBwLnBheW1lbnRfc3RhdHVzID09PSAnUEFJRCcpXHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoc2hvdWxkQXV0b01hcmtGaXJzdFBheW1lbnQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYEF1dG8tdXBkYXRpbmcgZmlyc3QgcGF5bWVudCByZWNvcmQgZm9yIGFwcGxpY2F0aW9uICR7YXBwbGljYXRpb24uaWR9YCk7XHJcbiAgICAgICAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGUgUlBDIGZ1bmN0aW9uIGV4aXN0c1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBycGNDaGVjaywgZXJyb3I6IHJwY0NoZWNrRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYyhcclxuICAgICAgICAgICAgJ3VwZGF0ZV9wYXltZW50X2FuZF9wb2xpY3lfaGVhbHRoJywgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBwX2FwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbi5pZCxcclxuICAgICAgICAgICAgICBwX21vbnRoX251bWJlcjogMSxcclxuICAgICAgICAgICAgICBwX3BheW1lbnRfc3RhdHVzOiAnUEFJRCcsXHJcbiAgICAgICAgICAgICAgcF9wYXltZW50X2RhdGU6IGFwcGxpY2F0aW9uLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeyBjb3VudDogJ2V4YWN0JyB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAocnBjQ2hlY2tFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBSUEMgZnVuY3Rpb246JywgcnBjQ2hlY2tFcnJvcik7XHJcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGRpcmVjdCBpbnNlcnQgaWYgUlBDIGlzIG5vdCBhdmFpbGFibGVcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhbGxpbmcgYmFjayB0byBkaXJlY3QgaW5zZXJ0IGludG8gYXBwbGljYXRpb25fcGF5bWVudHMnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHBheW1lbnQgcmVjb3JkIGV4aXN0c1xyXG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nUGF5bWVudHMgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgICAgLmZyb20oJ2FwcGxpY2F0aW9uX3BheW1lbnRzJylcclxuICAgICAgICAgICAgICAuc2VsZWN0KCdpZCcpXHJcbiAgICAgICAgICAgICAgLmVxKCdhcHBsaWNhdGlvbl9pZCcsIGFwcGxpY2F0aW9uLmlkKVxyXG4gICAgICAgICAgICAgIC5lcSgnbW9udGhfbnVtYmVyJywgMSk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdQYXltZW50cyB8fCBleGlzdGluZ1BheW1lbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgIC8vIEluc2VydCBuZXcgcGF5bWVudCByZWNvcmRcclxuICAgICAgICAgICAgICBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAgICAgLmZyb20oJ2FwcGxpY2F0aW9uX3BheW1lbnRzJylcclxuICAgICAgICAgICAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb24uaWQsXHJcbiAgICAgICAgICAgICAgICAgIG1vbnRoX251bWJlcjogMSxcclxuICAgICAgICAgICAgICAgICAgcGF5bWVudF9zdGF0dXM6ICdQQUlEJyxcclxuICAgICAgICAgICAgICAgICAgcGF5bWVudF9kYXRlOiBhcHBsaWNhdGlvbi5lZmZlY3RpdmVfcG9saWN5X2RhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcGF5bWVudCByZWNvcmRcclxuICAgICAgICAgICAgICBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAgICAgLmZyb20oJ2FwcGxpY2F0aW9uX3BheW1lbnRzJylcclxuICAgICAgICAgICAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICBwYXltZW50X3N0YXR1czogJ1BBSUQnLFxyXG4gICAgICAgICAgICAgICAgICBwYXltZW50X2RhdGU6IGFwcGxpY2F0aW9uLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5lcSgnYXBwbGljYXRpb25faWQnLCBhcHBsaWNhdGlvbi5pZClcclxuICAgICAgICAgICAgICAgIC5lcSgnbW9udGhfbnVtYmVyJywgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQWxzbyB1cGRhdGUgbGVnYWN5IG1vbnRoXzEgZmllbGQgZGlyZWN0bHlcclxuICAgICAgICAgIGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdhZ2VudF9hcHBsaWNhdGlvbnMnKVxyXG4gICAgICAgICAgICAudXBkYXRlKHsgbW9udGhfMTogJ1BBSUQnIH0pXHJcbiAgICAgICAgICAgIC5lcSgnaWQnLCBhcHBsaWNhdGlvbi5pZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgcmVmcmVzaFBheW1lbnRzKCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmlyc3QgcGF5bWVudCBhdXRvLXVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGF1dG8tdXBkYXRpbmcgZmlyc3QgcGF5bWVudDonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBhdXRvVXBkYXRlRmlyc3RQYXltZW50KCk7XHJcbiAgfSwgW2FwcGxpY2F0aW9uPy5pZCwgYXBwbGljYXRpb24/LnN0YXR1cywgYXBwbGljYXRpb24/LnBhaWRfc3RhdHVzLCBwYXltZW50c10pO1xyXG4gIFxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaGlzdG9yeS1jb250YWluZXJcIj5cclxuICAgICAge2xvYWRpbmcgPyAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5Mb2FkaW5nIHBheW1lbnQgaGlzdG9yeS4uLjwvZGl2PlxyXG4gICAgICApIDogKFxyXG4gICAgICAgIDw+XHJcbiAgICAgICAgICB7bW9udGhzLm1hcChtb250aCA9PiAoXHJcbiAgICAgICAgICAgIDxQYXltZW50SW5kaWNhdG9yXHJcbiAgICAgICAgICAgICAga2V5PXttb250aH1cclxuICAgICAgICAgICAgICBzdGF0dXM9e2dldE1vbnRoU3RhdHVzKG1vbnRoKX1cclxuICAgICAgICAgICAgICBtb250aE51bWJlcj17bW9udGh9XHJcbiAgICAgICAgICAgICAgYXBwbGljYXRpb25JZD17YXBwbGljYXRpb24uaWR9XHJcbiAgICAgICAgICAgICAgcGF5bWVudERhdGU9e2dldFBheW1lbnREYXRlKG1vbnRoKX1cclxuICAgICAgICAgICAgICBvblBheW1lbnRVcGRhdGVkPXtyZWZyZXNoUGF5bWVudHN9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICApKX1cclxuICAgICAgICA8Lz5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG4vLyBQYXltZW50IFVwZGF0ZSBNb2RhbCBDb21wb25lbnRcclxuZXhwb3J0IGNvbnN0IFBheW1lbnRVcGRhdGVNb2RhbCA9ICh7IFxyXG4gIGFwcGxpY2F0aW9uSWQsIFxyXG4gIG1vbnRoTnVtYmVyLCBcclxuICBjdXJyZW50U3RhdHVzLFxyXG4gIGN1cnJlbnRQYXltZW50RGF0ZSxcclxuICBvbkNsb3NlIFxyXG59OiB7IFxyXG4gIGFwcGxpY2F0aW9uSWQ6IHN0cmluZywgXHJcbiAgbW9udGhOdW1iZXI6IG51bWJlciwgXHJcbiAgY3VycmVudFN0YXR1czogc3RyaW5nLFxyXG4gIGN1cnJlbnRQYXltZW50RGF0ZT86IHN0cmluZyB8IG51bGwsXHJcbiAgb25DbG9zZTogKCkgPT4gdm9pZCBcclxufSkgPT4ge1xyXG4gIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZShjdXJyZW50U3RhdHVzIHx8ICcnKTtcclxuICBjb25zdCBbcGF5bWVudERhdGUsIHNldFBheW1lbnREYXRlXSA9IHVzZVN0YXRlKGN1cnJlbnRQYXltZW50RGF0ZSB8fCAnJyk7XHJcbiAgY29uc3QgW2lzU2F2aW5nLCBzZXRJc1NhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICBcclxuICBjb25zdCBoYW5kbGVTYXZlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFzdGF0dXMpIHtcclxuICAgICAgdG9hc3QuZXJyb3IoJ1BsZWFzZSBzZWxlY3QgYSBwYXltZW50IHN0YXR1cycpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldElzU2F2aW5nKHRydWUpO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDaGVjayBpZiBwYXltZW50IHJlY29yZCBleGlzdHNcclxuICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1BheW1lbnRzLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5lcSgnYXBwbGljYXRpb25faWQnLCBhcHBsaWNhdGlvbklkKVxyXG4gICAgICAgIC5lcSgnbW9udGhfbnVtYmVyJywgbW9udGhOdW1iZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICBpZiAoZmV0Y2hFcnJvcikgdGhyb3cgZmV0Y2hFcnJvcjtcclxuICAgICAgXHJcbiAgICAgIC8vIElmIHJlY29yZCBleGlzdHMsIHVwZGF0ZSBpdCwgb3RoZXJ3aXNlIGluc2VydCBuZXcgcmVjb3JkXHJcbiAgICAgIGlmIChleGlzdGluZ1BheW1lbnRzICYmIGV4aXN0aW5nUGF5bWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgIHBheW1lbnRfc3RhdHVzOiBzdGF0dXMsXHJcbiAgICAgICAgICAgIHBheW1lbnRfZGF0ZTogc3RhdHVzID09PSAnUEFJRCcgPyBwYXltZW50RGF0ZSB8fCBudWxsIDogbnVsbCxcclxuICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVxKCdhcHBsaWNhdGlvbl9pZCcsIGFwcGxpY2F0aW9uSWQpXHJcbiAgICAgICAgICAuZXEoJ21vbnRoX251bWJlcicsIG1vbnRoTnVtYmVyKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgICAgYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG1vbnRoX251bWJlcjogbW9udGhOdW1iZXIsXHJcbiAgICAgICAgICAgIHBheW1lbnRfc3RhdHVzOiBzdGF0dXMsXHJcbiAgICAgICAgICAgIHBheW1lbnRfZGF0ZTogc3RhdHVzID09PSAnUEFJRCcgPyBwYXltZW50RGF0ZSB8fCBudWxsIDogbnVsbFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBVcGRhdGUgcG9saWN5IGhlYWx0aFxyXG4gICAgICBhd2FpdCB1cGRhdGVQb2xpY3lIZWFsdGgoYXBwbGljYXRpb25JZCk7XHJcbiAgICAgIFxyXG4gICAgICB0b2FzdC5zdWNjZXNzKCdQYXltZW50IHN0YXR1cyB1cGRhdGVkJyk7XHJcbiAgICAgIG9uQ2xvc2UoKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBwYXltZW50IHN0YXR1czonLCBlcnJvcik7XHJcbiAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBzYXZpbmcgcGF5bWVudCBzdGF0dXMnKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzU2F2aW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG4gIFxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtdXBkYXRlLW1vZGFsXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1tb2RhbC1jb250ZW50XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LW1vZGFsLWhlYWRlclwiPlxyXG4gICAgICAgICAgPGgzPlVwZGF0ZSBQYXltZW50IFN0YXR1cyAtIE1vbnRoIHttb250aE51bWJlcn08L2gzPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjbG9zZS1tb2RhbFwiIG9uQ2xpY2s9e29uQ2xvc2V9PiZ0aW1lczs8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtbW9kYWwtYm9keVwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwicGF5bWVudC1zdGF0dXNcIj5QYXltZW50IFN0YXR1czwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxzZWxlY3RcclxuICAgICAgICAgICAgICBpZD1cInBheW1lbnQtc3RhdHVzXCJcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwYXltZW50LXN0YXR1cy1zZWxlY3RcIlxyXG4gICAgICAgICAgICAgIHZhbHVlPXtzdGF0dXN9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTdGF0dXMoZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPlNlbGVjdCBTdGF0dXM8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiUEFJRFwiPlBhaWQ8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiTUlTU0VEXCI+TWlzc2VkPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlBFTkRJTkdcIj5QZW5kaW5nPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIk5TRlwiPk5TRiAoSW5zdWZmaWNpZW50IEZ1bmRzKTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJXQUlWRURcIj5XYWl2ZWQ8L29wdGlvbj5cclxuICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIHtzdGF0dXMgPT09ICdQQUlEJyAmJiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwicGF5bWVudC1kYXRlXCI+UGF5bWVudCBEYXRlPC9sYWJlbD5cclxuICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgIHR5cGU9XCJkYXRlXCJcclxuICAgICAgICAgICAgICAgIGlkPVwicGF5bWVudC1kYXRlXCJcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInBheW1lbnQtZGF0ZS1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17cGF5bWVudERhdGUgfHwgJyd9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFBheW1lbnREYXRlKGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LW1vZGFsLWZvb3RlclwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjYW5jZWwtYnRuXCIgb25DbGljaz17b25DbG9zZX0gZGlzYWJsZWQ9e2lzU2F2aW5nfT5DYW5jZWw8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwic2F2ZS1idG5cIiBvbkNsaWNrPXtoYW5kbGVTYXZlfSBkaXNhYmxlZD17aXNTYXZpbmd9PlxyXG4gICAgICAgICAgICB7aXNTYXZpbmcgPyAnU2F2aW5nLi4uJyA6ICdTYXZlIENoYW5nZXMnfVxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSBwb2xpY3kgaGVhbHRoIGJhc2VkIG9uIHBheW1lbnQgc3RhdHVzZXNcclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUG9saWN5SGVhbHRoKGFwcGxpY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCBhbGwgcGF5bWVudHMgZm9yIHRoaXMgYXBwbGljYXRpb25cclxuICAgIGNvbnN0IHsgZGF0YTogcGF5bWVudHMsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdhcHBsaWNhdGlvbl9pZCcsIGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICBcclxuICAgIGlmIChmZXRjaEVycm9yKSB0aHJvdyBmZXRjaEVycm9yO1xyXG4gICAgXHJcbiAgICAvLyBHZXQgYXBwbGljYXRpb24gZGV0YWlsc1xyXG4gICAgY29uc3QgeyBkYXRhOiBhcHBsaWNhdGlvbnMsIGVycm9yOiBhcHBFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2FnZW50X2FwcGxpY2F0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJ3N0YXR1cywgcGFpZF9zdGF0dXMnKVxyXG4gICAgICAuZXEoJ2lkJywgYXBwbGljYXRpb25JZCk7XHJcbiAgICAgIFxyXG4gICAgaWYgKGFwcEVycm9yKSB0aHJvdyBhcHBFcnJvcjtcclxuICAgIGlmICghYXBwbGljYXRpb25zIHx8IGFwcGxpY2F0aW9ucy5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgIFxyXG4gICAgY29uc3QgYXBwID0gYXBwbGljYXRpb25zWzBdO1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiBwb2xpY3kgaXMgYWxyZWFkeSBjYW5jZWxsZWRcclxuICAgIGlmIChhcHAuc3RhdHVzPy5pbmNsdWRlcygnQ2FuY2VsbGVkJykgfHwgYXBwLnN0YXR1cyA9PT0gJ0RlY2xpbmVkJykge1xyXG4gICAgICByZXR1cm47IC8vIERvbid0IGNoYW5nZSBjYW5jZWxsZWQgcG9saWNpZXNcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ291bnQgbWlzc2VkIHBheW1lbnRzXHJcbiAgICBjb25zdCBtaXNzZWRQYXltZW50cyA9IHBheW1lbnRzPy5maWx0ZXIocCA9PiBcclxuICAgICAgcC5wYXltZW50X3N0YXR1cyA9PT0gJ01JU1NFRCcgfHwgcC5wYXltZW50X3N0YXR1cyA9PT0gJ05TRidcclxuICAgICkubGVuZ3RoIHx8IDA7XHJcbiAgICBcclxuICAgIC8vIERldGVybWluZSBuZXcgcG9saWN5IGhlYWx0aFxyXG4gICAgbGV0IG5ld1BvbGljeUhlYWx0aDtcclxuICAgIFxyXG4gICAgaWYgKG1pc3NlZFBheW1lbnRzID49IDIpIHtcclxuICAgICAgbmV3UG9saWN5SGVhbHRoID0gJ1BheW1lbnQgSXNzdWVzJztcclxuICAgIH0gZWxzZSBpZiAoYXBwLnN0YXR1cyA9PT0gJ0FwcHJvdmVkJyAmJiBhcHAucGFpZF9zdGF0dXMgPT09ICdQYWlkJykge1xyXG4gICAgICBuZXdQb2xpY3lIZWFsdGggPSAnQWN0aXZlJztcclxuICAgIH0gZWxzZSBpZiAoYXBwLnN0YXR1cyA9PT0gJ0FwcHJvdmVkJyAmJiBhcHAucGFpZF9zdGF0dXMgPT09ICdVbnBhaWQnKSB7XHJcbiAgICAgIG5ld1BvbGljeUhlYWx0aCA9ICdQZW5kaW5nIEZpcnN0IFBheW1lbnQnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gS2VlcCBleGlzdGluZyBwb2xpY3kgaGVhbHRoXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVXBkYXRlIHBvbGljeSBoZWFsdGhcclxuICAgIGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYWdlbnRfYXBwbGljYXRpb25zJylcclxuICAgICAgLnVwZGF0ZSh7IHBvbGljeV9oZWFsdGg6IG5ld1BvbGljeUhlYWx0aCB9KVxyXG4gICAgICAuZXEoJ2lkJywgYXBwbGljYXRpb25JZCk7XHJcbiAgICAgIFxyXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB0aHJvdyB1cGRhdGVFcnJvcjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcG9saWN5IGhlYWx0aDonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIFBheW1lbnQgc3RhdHVzIGxlZ2VuZCBjb21wb25lbnRcclxuZXhwb3J0IGNvbnN0IFBheW1lbnRMZWdlbmQgPSAoKSA9PiAoXHJcbiAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgZ2FwLXgtNCBnYXAteS0yIHRleHQtc21cIj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWluZGljYXRvciBwYXltZW50LXBhaWRcIj48L2Rpdj5cclxuICAgICAgPHNwYW4+UGFpZDwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaW5kaWNhdG9yIHBheW1lbnQtbWlzc2VkXCI+PC9kaXY+XHJcbiAgICAgIDxzcGFuPk1pc3NlZDwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaW5kaWNhdG9yIHBheW1lbnQtcGVuZGluZ1wiPjwvZGl2PlxyXG4gICAgICA8c3Bhbj5QZW5kaW5nPC9zcGFuPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1pbmRpY2F0b3IgcGF5bWVudC1uc2ZcIj48L2Rpdj5cclxuICAgICAgPHNwYW4+TlNGPC9zcGFuPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1pbmRpY2F0b3IgcGF5bWVudC13YWl2ZWRcIj48L2Rpdj5cclxuICAgICAgPHNwYW4+V2FpdmVkPC9zcGFuPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1pbmRpY2F0b3IgcGF5bWVudC1lbXB0eVwiPjwvZGl2PlxyXG4gICAgICA8c3Bhbj5Ob3QgRHVlPC9zcGFuPlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbik7XHJcblxyXG4vLyBORVc6IENyZWF0ZSBhIHdyYXBwZXIgY29tcG9uZW50IGZvciB0aGUgcGF5bWVudCBoaXN0b3J5IGdyaWRcclxuZXhwb3J0IGNvbnN0IFNhZmVQYXltZW50SGlzdG9yeUdyaWQgPSAoeyBhcHBsaWNhdGlvbklkIH06IHsgYXBwbGljYXRpb25JZDogc3RyaW5nIH0pID0+IHtcclxuICByZXR1cm4gKFxyXG4gICAgPEVycm9yQm91bmRhcnk+XHJcbiAgICAgIDxQYXltZW50SGlzdG9yeUdyaWQgYXBwbGljYXRpb25JZD17YXBwbGljYXRpb25JZH0gLz5cclxuICAgIDwvRXJyb3JCb3VuZGFyeT5cclxuICApO1xyXG59O1xyXG5cclxuLy8gTkVXOiBQYXltZW50IGhpc3RvcnkgZ3JpZCBjb21wb25lbnQgZm9yIHRoZSBhcHBsaWNhdGlvbnMgdGFibGVcclxuZXhwb3J0IGNvbnN0IFBheW1lbnRIaXN0b3J5R3JpZCA9ICh7IGFwcGxpY2F0aW9uSWQgfTogeyBhcHBsaWNhdGlvbklkOiBzdHJpbmcgfSkgPT4ge1xyXG4gIGNvbnN0IFtwYXltZW50cywgc2V0UGF5bWVudHNdID0gdXNlU3RhdGU8UGF5bWVudERhdGFbXT4oW10pO1xyXG4gIGNvbnN0IFthcHBsaWNhdGlvbiwgc2V0QXBwbGljYXRpb25dID0gdXNlU3RhdGU8YW55PihudWxsKTtcclxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtzaG91bGRTaG93UGF5bWVudHMsIHNldFNob3VsZFNob3dQYXltZW50c10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW25leHRQYXltZW50RGF0ZXMsIHNldE5leHRQYXltZW50RGF0ZXNdID0gdXNlU3RhdGU8e1trZXk6IG51bWJlcl06IHN0cmluZ30+KHt9KTtcclxuICBjb25zdCBpc01vdW50ZWQgPSB1c2VSZWYodHJ1ZSk7XHJcbiAgXHJcbiAgLy8gVXNlIGEgc3RhYmxlIGtleSBmb3IgcmVuZGVyaW5nIGluZGljYXRvcnNcclxuICBjb25zdCBzdGFibGVLZXkgPSB1c2VSZWYoYHBheW1lbnQtZ3JpZC0ke2FwcGxpY2F0aW9uSWR9YCkuY3VycmVudDtcclxuICBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gU2V0IGlzTW91bnRlZCByZWYgdG8gdHJ1ZSB3aGVuIGNvbXBvbmVudCBtb3VudHNcclxuICAgIGlzTW91bnRlZC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgLy8gT25seSBmZXRjaCBpZiB3ZSBoYXZlIGFuIGFwcGxpY2F0aW9uIElEXHJcbiAgICBpZiAoYXBwbGljYXRpb25JZCkge1xyXG4gICAgICBmZXRjaEFwcGxpY2F0aW9uRGV0YWlscygpO1xyXG4gICAgICBmZXRjaFBheW1lbnRzKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENsZWFuIHVwIGZ1bmN0aW9uIHRoYXQgcnVucyB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgLy8gTWFyayBjb21wb25lbnQgYXMgdW5tb3VudGVkIHRvIHByZXZlbnQgc3RhdGUgdXBkYXRlc1xyXG4gICAgICBpc01vdW50ZWQuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgfTtcclxuICB9LCBbYXBwbGljYXRpb25JZF0pO1xyXG5cclxuICAvLyBGZXRjaCBhcHBsaWNhdGlvbiBkZXRhaWxzIHRvIGdldCBlZmZlY3RpdmUgcG9saWN5IGRhdGUgYW5kIHN0YXR1c1xyXG4gIGNvbnN0IGZldGNoQXBwbGljYXRpb25EZXRhaWxzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFhcHBsaWNhdGlvbklkKSByZXR1cm47XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2FnZW50X2FwcGxpY2F0aW9ucycpXHJcbiAgICAgICAgLnNlbGVjdCgnZWZmZWN0aXZlX3BvbGljeV9kYXRlLCBzdGF0dXMsIHBhaWRfc3RhdHVzLCBtb250aF8xJylcclxuICAgICAgICAuZXEoJ2lkJywgYXBwbGljYXRpb25JZClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFwcGxpY2F0aW9uIGRldGFpbHM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGRhdGEgJiYgaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgICBzZXRBcHBsaWNhdGlvbihkYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBNVUNIIFNUUklDVEVSIGNoZWNrIC0gT25seSBzaG93IHBheW1lbnQgaGlzdG9yeSBmb3IgYXBwbGljYXRpb25zIGV4cGxpY2l0bHkgbWFya2VkIGFzIHBhaWRcclxuICAgICAgICBjb25zdCBpc0lzc3VlZEFuZFBhaWQgPSBcclxuICAgICAgICAgIGRhdGEucGFpZF9zdGF0dXMgPT09ICdQYWlkJyAmJiBcclxuICAgICAgICAgIGRhdGEuZWZmZWN0aXZlX3BvbGljeV9kYXRlICE9PSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNldFNob3VsZFNob3dQYXltZW50cyhpc0lzc3VlZEFuZFBhaWQpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBmZXRjaEFwcGxpY2F0aW9uRGV0YWlsczonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfTtcclxuICBcclxuICBjb25zdCBmZXRjaFBheW1lbnRzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFhcHBsaWNhdGlvbklkKSByZXR1cm47XHJcbiAgICBcclxuICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgLnNlbGVjdCgnbW9udGhfbnVtYmVyLCBwYXltZW50X3N0YXR1cywgcGF5bWVudF9kYXRlLCB1cGRhdGVkX2F0JylcclxuICAgICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb25JZClcclxuICAgICAgICAub3JkZXIoJ21vbnRoX251bWJlcicpO1xyXG4gICAgICAgIFxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAvLyBTdGlsbCBsb2cgdGhlIGVycm9yIGJ1dCBkb24ndCBzaG93IHRvIHVzZXJcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwYXltZW50czonLCBlcnJvcik7XHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YSAmJiBpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIHNldFBheW1lbnRzKGRhdGEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEV4dHJhY3QgYW5kIHRyYWNrIG5leHQgcGF5bWVudCBkYXRlc1xyXG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRlczoge1trZXk6IG51bWJlcl06IHN0cmluZ30gPSB7fTtcclxuICAgICAgICBkYXRhLmZvckVhY2gocGF5bWVudCA9PiB7XHJcbiAgICAgICAgICBpZiAocGF5bWVudC5wYXltZW50X2RhdGUpIHtcclxuICAgICAgICAgICAgcGF5bWVudERhdGVzW3BheW1lbnQubW9udGhfbnVtYmVyXSA9IHBheW1lbnQucGF5bWVudF9kYXRlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNldE5leHRQYXltZW50RGF0ZXMocGF5bWVudERhdGVzKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gcGF5bWVudCBoaXN0b3J5OicsIGVycm9yKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0TW9udGhTdGF0dXMgPSAobW9udGg6IG51bWJlcik6IFBheW1lbnRTdGF0dXMgfCBudWxsID0+IHtcclxuICAgIC8vIEZpcnN0IGNoZWNrIHBheW1lbnQgcmVjb3JkXHJcbiAgICBjb25zdCBwYXltZW50ID0gcGF5bWVudHMuZmluZChwID0+IHAubW9udGhfbnVtYmVyID09PSBtb250aCk7XHJcbiAgICBpZiAocGF5bWVudD8ucGF5bWVudF9zdGF0dXMpIHtcclxuICAgICAgcmV0dXJuIHBheW1lbnQucGF5bWVudF9zdGF0dXM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZvciBmaXJzdCBtb250aCwgT05MWSBzaG93IGFzIFBBSUQgaWYgaXQncyBleHBsaWNpdGx5IHNldCB0aGF0IHdheVxyXG4gICAgaWYgKG1vbnRoID09PSAxICYmIGFwcGxpY2F0aW9uKSB7XHJcbiAgICAgIC8vIE9ubHkgdHJ1c3QgdGhlIGV4cGxpY2l0IG1vbnRoXzEgZmllbGQgb3IgcGF5bWVudHMgdGFibGUgcmVjb3Jkc1xyXG4gICAgICAvLyBEbyBub3QgYXV0b21hdGljYWxseSBhc3N1bWUgcGFpZCBiYXNlZCBvbiBzdGF0dXNcclxuICAgICAgaWYgKGFwcGxpY2F0aW9uLm1vbnRoXzEgPT09ICdQQUlEJykge1xyXG4gICAgICAgIHJldHVybiAnUEFJRCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfTtcclxuICBcclxuICBjb25zdCBnZXRQYXltZW50RGF0ZSA9IChtb250aDogbnVtYmVyKTogc3RyaW5nIHwgbnVsbCA9PiB7XHJcbiAgICAvLyBGaXJzdCBjaGVjayBmcm9tIHBheW1lbnRzIGRhdGFcclxuICAgIGNvbnN0IHBheW1lbnQgPSBwYXltZW50cy5maW5kKHAgPT4gcC5tb250aF9udW1iZXIgPT09IG1vbnRoKTtcclxuICAgIGlmIChwYXltZW50Py5wYXltZW50X2RhdGUpIHtcclxuICAgICAgcmV0dXJuIHBheW1lbnQucGF5bWVudF9kYXRlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGb3IgZmlyc3QgbW9udGggd2l0aCBlZmZlY3RpdmUgcG9saWN5IGRhdGVcclxuICAgIGlmIChtb250aCA9PT0gMSAmJiBhcHBsaWNhdGlvbj8uZWZmZWN0aXZlX3BvbGljeV9kYXRlICYmIGdldE1vbnRoU3RhdHVzKDEpID09PSAnUEFJRCcpIHtcclxuICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGNvbnNlY3V0aXZlIG1vbnRoIHRoYXQgc2hvdWxkIGJlIHNjaGVkdWxlZFxyXG4gICAgaWYgKG1vbnRoID4gMSAmJiBuZXh0UGF5bWVudERhdGVzW21vbnRoXSkge1xyXG4gICAgICByZXR1cm4gbmV4dFBheW1lbnREYXRlc1ttb250aF07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH07XHJcbiAgXHJcbiAgY29uc3QgZ2V0VG9vbHRpcFRleHQgPSAobW9udGg6IG51bWJlcik6IHN0cmluZyA9PiB7XHJcbiAgICBjb25zdCBzdGF0dXMgPSBnZXRNb250aFN0YXR1cyhtb250aCk7XHJcbiAgICBjb25zdCBkYXRlID0gZ2V0UGF5bWVudERhdGUobW9udGgpO1xyXG4gICAgXHJcbiAgICBpZiAoIXN0YXR1cykge1xyXG4gICAgICByZXR1cm4gYE1vbnRoICR7bW9udGh9OiBOb3QgeWV0IGR1ZWA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChkYXRlKSB7XHJcbiAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBuZXcgRGF0ZShkYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgICAgcmV0dXJuIGBNb250aCAke21vbnRofTogJHtzdGF0dXN9ICgke2Zvcm1hdHRlZERhdGV9KWA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBgTW9udGggJHttb250aH06ICR7c3RhdHVzfWA7XHJcbiAgfTtcclxuICBcclxuICBjb25zdCBoYW5kbGVQYXltZW50VXBkYXRlZCA9ICgpID0+IHtcclxuICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICBmZXRjaFBheW1lbnRzKCk7XHJcbiAgICAgIGZldGNoQXBwbGljYXRpb25EZXRhaWxzKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBcclxuICAvLyBDcmVhdGUgaW5kaWNhdG9ycyBmb3IgbW9udGhzIDEtMTIgd2l0aCBjYXJlZnVsIGtleSBtYW5hZ2VtZW50XHJcbiAgY29uc3QgcmVuZGVyUGF5bWVudEluZGljYXRvcnMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBtb250aHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMiB9LCAoXywgaSkgPT4gaSArIDEpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTEgaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAge21vbnRocy5tYXAoKG1vbnRoKSA9PiAoXHJcbiAgICAgICAgICA8UGF5bWVudEluZGljYXRvclxyXG4gICAgICAgICAgICBrZXk9e2Ake3N0YWJsZUtleX0tbW9udGgtJHttb250aH1gfVxyXG4gICAgICAgICAgICBzdGF0dXM9e2dldE1vbnRoU3RhdHVzKG1vbnRoKX1cclxuICAgICAgICAgICAgbW9udGhOdW1iZXI9e21vbnRofVxyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbklkPXthcHBsaWNhdGlvbklkfVxyXG4gICAgICAgICAgICBwYXltZW50RGF0ZT17Z2V0UGF5bWVudERhdGUobW9udGgpfVxyXG4gICAgICAgICAgICBvblBheW1lbnRVcGRhdGVkPXtoYW5kbGVQYXltZW50VXBkYXRlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9O1xyXG4gIFxyXG4gIC8vIFNob3cgbm90aGluZyBpZiB0aGUgYXBwbGljYXRpb24gaXNuJ3QgaXNzdWVkIGFuZCBwYWlkXHJcbiAgaWYgKCFzaG91bGRTaG93UGF5bWVudHMpIHtcclxuICAgIGlmIChhcHBsaWNhdGlvbj8uZWZmZWN0aXZlX3BvbGljeV9kYXRlICYmIGFwcGxpY2F0aW9uPy5wYWlkX3N0YXR1cyAhPT0gJ1BhaWQnKSB7XHJcbiAgICAgIC8vIFNob3cgYSBwbGFjZWhvbGRlciB3aXRoIGV4cGxhbmF0aW9uIGZvciBhcHBsaWNhdGlvbnMgd2l0aCBlZmZlY3RpdmUgZGF0ZSBidXQgbm90IHBhaWRcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaGlzdG9yeS1jb250YWluZXIgZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+UGF5bWVudCB0cmFja2luZyBiZWdpbnMgYWZ0ZXIgZmlyc3QgcGF5bWVudDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgLy8gT3RoZXJ3aXNlIHNob3cgbm90aGluZ1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIENyZWF0ZSBhIHNpbXBsZXIgZGlzcGxheSBpZiBsb2FkaW5nIGlzIHRha2luZyB0b28gbG9uZ1xyXG4gIGlmIChsb2FkaW5nICYmIHBheW1lbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWhpc3RvcnktY29udGFpbmVyIGZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5Mb2FkaW5nLi4uPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbiAgXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaGlzdG9yeS1jb250YWluZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1yZWQtNTAwXCI+e2Vycm9yfTwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFJlbmRlciB0aGUgYWN0dWFsIGNvbXBvbmVudFxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaGlzdG9yeS1jb250YWluZXJcIj5cclxuICAgICAge3JlbmRlclBheW1lbnRJbmRpY2F0b3JzKCl9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuLy8gUGF5bWVudCBoaXN0b3J5IGxlZ2VuZCBjb21wb25lbnRcclxuZXhwb3J0IGNvbnN0IFBheW1lbnRIaXN0b3J5TGVnZW5kID0gKCkgPT4ge1xyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHRleHQteHMgdGV4dC1ncmF5LTYwMCBtdC0yIG1iLTRcIj5cclxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5QYXltZW50IExlZ2VuZDo8L3NwYW4+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNCBoLTQgcm91bmRlZC1mdWxsIGJnLVsjMTM3MzMzXSBtci0xXCI+PC9kaXY+XHJcbiAgICAgICAgPHNwYW4+UGFpZDwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNCBoLTQgcm91bmRlZC1mdWxsIGJnLVsjMWE3M2U4XSBtci0xXCI+PC9kaXY+XHJcbiAgICAgICAgPHNwYW4+UGVuZGluZzwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNCBoLTQgcm91bmRlZC1mdWxsIGJnLVsjYzUyMjFmXSBtci0xXCI+PC9kaXY+XHJcbiAgICAgICAgPHNwYW4+TWlzc2VkPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy00IGgtNCByb3VuZGVkLWZ1bGwgYmctWyNlYTg2MDBdIG1yLTFcIj48L2Rpdj5cclxuICAgICAgICA8c3Bhbj5OU0Y8L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBiZy1bIzgwODY4Yl0gbXItMVwiPjwvZGl2PlxyXG4gICAgICAgIDxzcGFuPldhaXZlZDwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNCBoLTQgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItZ3JheS0zMDAgbXItMVwiPjwvZGl2PlxyXG4gICAgICAgIDxzcGFuPk5vdCBTZXQ8L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTsgIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiY3JlYXRlQ2xpZW50IiwiZ2V0UGF5bWVudEluZGljYXRvckNsYXNzIiwidG9hc3QiLCJQb3BvdmVyIiwiUG9wb3ZlckNvbnRlbnQiLCJQb3BvdmVyVHJpZ2dlciIsIkJ1dHRvbiIsIkNhbGVuZGFyIiwiZm9ybWF0IiwiQ2FsZW5kYXJJY29uIiwiRXJyb3JCb3VuZGFyeSIsIlBheW1lbnRJbmRpY2F0b3IiLCJzdGF0dXMiLCJtb250aE51bWJlciIsImFwcGxpY2F0aW9uSWQiLCJwYXltZW50RGF0ZSIsIm9uUGF5bWVudFVwZGF0ZWQiLCJpc1VwZGF0aW5nIiwic2V0SXNVcGRhdGluZyIsInNob3dQYXltZW50TWVudSIsInNldFNob3dQYXltZW50TWVudSIsInNlbGVjdGVkRGF0ZSIsInNldFNlbGVjdGVkRGF0ZSIsIkRhdGUiLCJ1bmRlZmluZWQiLCJpc01vdW50ZWQiLCJjdXJyZW50IiwiZ2V0SW5kaWNhdG9yQ2xhc3NlcyIsImJhc2VDbGFzcyIsImZpcnN0TW9udGhDbGFzcyIsInNpemUiLCJpbmRpY2F0b3JDbGFzcyIsInRvb2x0aXBUaXRsZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImlzQWN0aXZlIiwiY2hlY2tGaXJzdFBheW1lbnQiLCJzdXBhYmFzZSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsInBhaWRfc3RhdHVzIiwiZWZmZWN0aXZlX3BvbGljeV9kYXRlIiwidXBkYXRlUGF5bWVudFN0YXR1cyIsImVyciIsImNvbnNvbGUiLCJuZXdTdGF0dXMiLCJkYXRlIiwidHJhY2tSZXN1bHQiLCJ0cmFja0Vycm9yIiwicnBjIiwicF9hcHBsaWNhdGlvbl9pZCIsInBfbW9udGhfbnVtYmVyIiwicF9wYXltZW50X3N0YXR1cyIsInBfcGF5bWVudF9kYXRlIiwidG9JU09TdHJpbmciLCJsb2ciLCJmYWxsYmFja1BheW1lbnRVcGRhdGUiLCJzdWNjZXNzIiwibWVzc2FnZSIsIm5leHRfcGF5bWVudCIsImVycm9yTXNnIiwibW9udGhGaWVsZCIsImFwcEVycm9yIiwidXBkYXRlIiwidXBzZXJ0IiwiYXBwbGljYXRpb25faWQiLCJtb250aF9udW1iZXIiLCJwYXltZW50X3N0YXR1cyIsInBheW1lbnRfZGF0ZSIsInVwZGF0ZWRfYXQiLCJvbkNvbmZsaWN0IiwicGF5bWVudEVyciIsImFwcERhdGEiLCJpbmNsdWRlcyIsInBvbGljeV9oZWFsdGgiLCJvcGVuIiwib25PcGVuQ2hhbmdlIiwiYXNDaGlsZCIsImRpdiIsImNsYXNzTmFtZSIsInRpdGxlIiwic3R5bGUiLCJib3JkZXIiLCJib3hTaGFkb3ciLCJiYWNrZ3JvdW5kQ29sb3IiLCJvcGFjaXR5IiwibGFiZWwiLCJ2YXJpYW50IiwiZGlzYWJsZWQiLCJzcGFuIiwibW9kZSIsInNlbGVjdGVkIiwib25TZWxlY3QiLCJpbml0aWFsRm9jdXMiLCJzdmciLCJ4bWxucyIsImZpbGwiLCJ2aWV3Qm94IiwiY2lyY2xlIiwiY3giLCJjeSIsInIiLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsInBhdGgiLCJkIiwib25DbGljayIsIlBheW1lbnRHcmlkIiwiYXBwbGljYXRpb24iLCJwYXltZW50cyIsInNldFBheW1lbnRzIiwibG9hZGluZyIsInNldExvYWRpbmciLCJmZXRjaFBheW1lbnRzIiwiaWQiLCJvcmRlciIsInJlZnJlc2hQYXltZW50cyIsIm1vbnRocyIsIkFycmF5IiwibGVuZ3RoIiwiXyIsImkiLCJnZXRNb250aFN0YXR1cyIsIm1vbnRoIiwicGF5bWVudCIsImZpbmQiLCJwIiwibW9udGhLZXkiLCJnZXRQYXltZW50RGF0ZSIsImF1dG9VcGRhdGVGaXJzdFBheW1lbnQiLCJzaG91bGRBdXRvTWFya0ZpcnN0UGF5bWVudCIsInNvbWUiLCJycGNDaGVjayIsInJwY0NoZWNrRXJyb3IiLCJjb3VudCIsImV4aXN0aW5nUGF5bWVudHMiLCJpbnNlcnQiLCJtb250aF8xIiwibWFwIiwiUGF5bWVudFVwZGF0ZU1vZGFsIiwiY3VycmVudFN0YXR1cyIsImN1cnJlbnRQYXltZW50RGF0ZSIsIm9uQ2xvc2UiLCJzZXRTdGF0dXMiLCJzZXRQYXltZW50RGF0ZSIsImlzU2F2aW5nIiwic2V0SXNTYXZpbmciLCJoYW5kbGVTYXZlIiwiZmV0Y2hFcnJvciIsInVwZGF0ZVBvbGljeUhlYWx0aCIsImgzIiwiYnV0dG9uIiwiaHRtbEZvciIsInZhbHVlIiwib25DaGFuZ2UiLCJlIiwidGFyZ2V0Iiwib3B0aW9uIiwiaW5wdXQiLCJ0eXBlIiwiYXBwbGljYXRpb25zIiwiYXBwIiwibWlzc2VkUGF5bWVudHMiLCJmaWx0ZXIiLCJuZXdQb2xpY3lIZWFsdGgiLCJ1cGRhdGVFcnJvciIsIlBheW1lbnRMZWdlbmQiLCJTYWZlUGF5bWVudEhpc3RvcnlHcmlkIiwiUGF5bWVudEhpc3RvcnlHcmlkIiwic2V0QXBwbGljYXRpb24iLCJzZXRFcnJvciIsInNob3VsZFNob3dQYXltZW50cyIsInNldFNob3VsZFNob3dQYXltZW50cyIsIm5leHRQYXltZW50RGF0ZXMiLCJzZXROZXh0UGF5bWVudERhdGVzIiwic3RhYmxlS2V5IiwiZmV0Y2hBcHBsaWNhdGlvbkRldGFpbHMiLCJpc0lzc3VlZEFuZFBhaWQiLCJwYXltZW50RGF0ZXMiLCJmb3JFYWNoIiwiZ2V0VG9vbHRpcFRleHQiLCJmb3JtYXR0ZWREYXRlIiwiaGFuZGxlUGF5bWVudFVwZGF0ZWQiLCJyZW5kZXJQYXltZW50SW5kaWNhdG9ycyIsIlBheW1lbnRIaXN0b3J5TGVnZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/agent/applications/components/PaymentComponents.tsx\n"));

/***/ })

});