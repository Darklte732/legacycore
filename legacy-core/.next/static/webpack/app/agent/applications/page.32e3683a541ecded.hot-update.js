"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/agent/applications/page",{

/***/ "(app-pages-browser)/./src/app/agent/applications/components/PaymentComponents.tsx":
/*!*********************************************************************!*\
  !*** ./src/app/agent/applications/components/PaymentComponents.tsx ***!
  \*********************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PaymentGrid: function() { return /* binding */ PaymentGrid; },\n/* harmony export */   PaymentHistoryGrid: function() { return /* binding */ PaymentHistoryGrid; },\n/* harmony export */   PaymentHistoryLegend: function() { return /* binding */ PaymentHistoryLegend; },\n/* harmony export */   PaymentIndicator: function() { return /* binding */ PaymentIndicator; },\n/* harmony export */   PaymentLegend: function() { return /* binding */ PaymentLegend; },\n/* harmony export */   PaymentUpdateModal: function() { return /* binding */ PaymentUpdateModal; },\n/* harmony export */   SafePaymentHistoryGrid: function() { return /* binding */ SafePaymentHistoryGrid; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase/client */ \"(app-pages-browser)/./src/lib/supabase/client.ts\");\n/* harmony import */ var _utils_statusUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/statusUtils */ \"(app-pages-browser)/./src/app/agent/applications/utils/statusUtils.ts\");\n/* harmony import */ var _components_status_styles_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/status-styles.css */ \"(app-pages-browser)/./src/app/agent/applications/components/status-styles.css\");\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n/* harmony import */ var _components_ui_popover__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/popover */ \"(app-pages-browser)/./src/components/ui/popover.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./src/components/ui/button.tsx\");\n/* harmony import */ var _components_ui_calendar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ui/calendar */ \"(app-pages-browser)/./src/components/ui/calendar.tsx\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"(app-pages-browser)/./node_modules/date-fns/format.mjs\");\n/* harmony import */ var _barrel_optimize_names_CalendarIcon_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/calendar.js\");\n/* harmony import */ var _ErrorBoundary__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ErrorBoundary */ \"(app-pages-browser)/./src/app/agent/applications/components/ErrorBoundary.tsx\");\n/* __next_internal_client_entry_do_not_use__ PaymentIndicator,PaymentGrid,PaymentUpdateModal,PaymentLegend,SafePaymentHistoryGrid,PaymentHistoryGrid,PaymentHistoryLegend auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$(), _s3 = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n// Single payment indicator component with improved error handling\nconst PaymentIndicator = (param)=>{\n    let { status, monthNumber, applicationId, paymentDate, onPaymentUpdated } = param;\n    _s();\n    const [isUpdating, setIsUpdating] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showPaymentMenu, setShowPaymentMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedDate, setSelectedDate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(paymentDate ? new Date(paymentDate) : undefined);\n    const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    // Clear state and refs on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        isMounted.current = true;\n        return ()=>{\n            isMounted.current = false;\n        };\n    }, []);\n    // Use larger sizes and more visible styles for important indicators\n    const getIndicatorClasses = ()=>{\n        const baseClass = (0,_utils_statusUtils__WEBPACK_IMPORTED_MODULE_3__.getPaymentIndicatorClass)(status);\n        const firstMonthClass = monthNumber === 1 ? \"first-month \" : \"\";\n        const size = monthNumber === 1 ? \"w-4 h-4\" : \"w-3 h-3\";\n        return `payment-indicator ${baseClass} ${firstMonthClass} ${size} ${isUpdating ? \"animate-pulse\" : \"\"}`;\n    };\n    const indicatorClass = getIndicatorClasses();\n    // Ensure all indicators have a meaningful tooltip, even empty ones\n    const tooltipTitle = status ? (0,_utils_statusUtils__WEBPACK_IMPORTED_MODULE_3__.getPaymentIndicatorTitle)(status, monthNumber, paymentDate) : `Month ${monthNumber}: Click to set payment status`;\n    // Check if this is the first payment and it should be marked as paid\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let isActive = true; // Track whether this effect should still update state\n        const checkFirstPayment = async ()=>{\n            if (monthNumber === 1 && !status) {\n                // Fetch the application details\n                try {\n                    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n                    const { data, error } = await supabase.from(\"agent_applications\").select(\"status, paid_status\").eq(\"id\", applicationId).single();\n                    if (error) throw error;\n                    // Only proceed if component is still mounted and effect is still active\n                    if (isMounted.current && isActive) {\n                        if (data && (data.status?.includes(\"Paid\") || data.paid_status === \"Paid\")) {\n                            // This should be marked as paid, so update it\n                            updatePaymentStatus(\"PAID\");\n                        }\n                    }\n                } catch (err) {\n                    console.error(\"Error checking first payment status:\", err);\n                }\n            }\n        };\n        // Check if we need to mark as paid\n        checkFirstPayment();\n        // Cleanup function\n        return ()=>{\n            isActive = false; // Mark effect as inactive when unmounted\n        };\n    }, [\n        monthNumber,\n        status,\n        applicationId\n    ]);\n    const updatePaymentStatus = async (newStatus, date)=>{\n        if (!isMounted.current) return; // Don't proceed if unmounted\n        setIsUpdating(true);\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n            // Use the payment date logic\n            const paymentDate = date || (newStatus === \"PAID\" ? new Date() : null);\n            // Try to use the safe RPC function first\n            try {\n                const { data: rpcResult, error: rpcError } = await supabase.rpc(\"safe_update_payment\", {\n                    p_application_id: applicationId,\n                    p_month_number: monthNumber,\n                    p_payment_status: newStatus,\n                    p_payment_date: paymentDate ? paymentDate.toISOString() : null\n                });\n                if (rpcError) {\n                    console.error(\"RPC function failed:\", rpcError);\n                // Fall back to direct updates\n                } else if (rpcResult === true) {\n                    // RPC function succeeded, no need for additional updates\n                    if (isMounted.current) {\n                        sonner__WEBPACK_IMPORTED_MODULE_5__.toast.success(`Payment for month ${monthNumber} marked as ${newStatus || \"cleared\"}`);\n                        if (onPaymentUpdated) {\n                            onPaymentUpdated();\n                        }\n                    }\n                    return;\n                }\n            } catch (rpcErr) {\n                console.error(\"Error calling RPC function:\", rpcErr);\n            // Continue with fallback approach\n            }\n            // Fallback: First try agent_applications table update (most reliable)\n            const monthField = `month_${monthNumber}`;\n            const { error: appError } = await supabase.from(\"agent_applications\").update({\n                [monthField]: newStatus\n            }).eq(\"id\", applicationId);\n            if (appError) {\n                console.error(\"Failed to update month field in agent_applications:\", appError);\n                sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(`Unable to update payment status. Please try again later.`);\n                return;\n            }\n            // Then try application_payments table as a best effort\n            try {\n                await supabase.from(\"application_payments\").upsert({\n                    application_id: applicationId,\n                    month_number: monthNumber,\n                    payment_status: newStatus,\n                    payment_date: paymentDate ? paymentDate.toISOString() : null,\n                    updated_at: new Date().toISOString()\n                }, {\n                    onConflict: \"application_id,month_number\"\n                });\n            } catch (paymentErr) {\n                // Just log this error - we already updated the agent_applications table\n                console.error(\"Failed to update application_payments table:\", paymentErr);\n            }\n            // If this is the first month and marking as PAID, update paid_status\n            if (monthNumber === 1 && newStatus === \"PAID\") {\n                try {\n                    await supabase.from(\"agent_applications\").update({\n                        paid_status: \"Paid\",\n                        policy_health: \"Active\"\n                    }).eq(\"id\", applicationId);\n                } catch (error) {\n                    console.error(\"Error updating paid_status:\", error);\n                }\n            }\n            if (isMounted.current) {\n                sonner__WEBPACK_IMPORTED_MODULE_5__.toast.success(`Payment for month ${monthNumber} marked as ${newStatus || \"cleared\"}`);\n                if (onPaymentUpdated) {\n                    onPaymentUpdated();\n                }\n            }\n        } catch (error) {\n            console.error(\"Error updating payment status:\", error);\n            if (isMounted.current) {\n                sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Failed to update payment status\");\n            }\n        } finally{\n            if (isMounted.current) {\n                setIsUpdating(false);\n                setShowPaymentMenu(false);\n            }\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ErrorBoundary__WEBPACK_IMPORTED_MODULE_9__.ErrorBoundary, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.Popover, {\n            open: showPaymentMenu,\n            onOpenChange: setShowPaymentMenu,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverTrigger, {\n                    asChild: true,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: indicatorClass,\n                        title: tooltipTitle,\n                        style: {\n                            border: monthNumber === 1 ? \"2px solid #666\" : \"1px solid #d0d0d0\",\n                            boxShadow: status === \"PAID\" ? \"0 0 2px 1px rgba(19, 115, 51, 0.5)\" : \"none\",\n                            backgroundColor: status ? undefined : \"white\",\n                            opacity: 1 // Ensure full opacity at all times\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 217,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 216,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverContent, {\n                    className: \"w-72\",\n                    style: {\n                        backgroundColor: \"white\",\n                        opacity: 1,\n                        boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\",\n                        border: \"1px solid #d0d0d0\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"font-medium\",\n                                children: [\n                                    \"Month \",\n                                    monthNumber,\n                                    \" Payment\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                lineNumber: 230,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"text-sm font-medium\",\n                                        children: \"Payment Date\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                        lineNumber: 234,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.Popover, {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverTrigger, {\n                                                asChild: true,\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                                    variant: \"outline\",\n                                                    className: \"w-full justify-start text-left font-normal\",\n                                                    disabled: isUpdating,\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarIcon_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                                            className: \"mr-2 h-4 w-4\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                            lineNumber: 242,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        selectedDate ? (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__.format)(selectedDate, \"PPP\") : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            children: \"Pick a date\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                            lineNumber: 243,\n                                                            columnNumber: 67\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 237,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                lineNumber: 236,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverContent, {\n                                                className: \"w-auto p-0\",\n                                                style: {\n                                                    backgroundColor: \"white\",\n                                                    opacity: 1\n                                                },\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_calendar__WEBPACK_IMPORTED_MODULE_8__.Calendar, {\n                                                    mode: \"single\",\n                                                    selected: selectedDate,\n                                                    onSelect: (date)=>setSelectedDate(date),\n                                                    initialFocus: true\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 247,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                lineNumber: 246,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                        lineNumber: 235,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                lineNumber: 233,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-2 gap-2\",\n                                children: isUpdating ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"col-span-2 flex justify-center items-center py-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"animate-spin h-5 w-5 text-gray-500\",\n                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                            fill: \"none\",\n                                            viewBox: \"0 0 24 24\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                                    className: \"opacity-25\",\n                                                    cx: \"12\",\n                                                    cy: \"12\",\n                                                    r: \"10\",\n                                                    stroke: \"currentColor\",\n                                                    strokeWidth: \"4\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 262,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    className: \"opacity-75\",\n                                                    fill: \"currentColor\",\n                                                    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 263,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 261,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"ml-2\",\n                                            children: \"Updating...\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 265,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 260,\n                                    columnNumber: 17\n                                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#e6f4ea] text-[#137333] hover:bg-[#d3eedb] hover:text-[#137333]\",\n                                            onClick: ()=>updatePaymentStatus(\"PAID\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Paid\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 269,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#fce8e6] text-[#c5221f] hover:bg-[#fadad7] hover:text-[#c5221f]\",\n                                            onClick: ()=>updatePaymentStatus(\"MISSED\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Missed\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 277,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#e8f0fe] text-[#1a73e8] hover:bg-[#d4e2fc] hover:text-[#1a73e8]\",\n                                            onClick: ()=>updatePaymentStatus(\"PENDING\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Pending\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 285,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#fef7e0] text-[#ea8600] hover:bg-[#fdf3d0] hover:text-[#ea8600]\",\n                                            onClick: ()=>updatePaymentStatus(\"NSF\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"NSF\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 293,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#f1f3f4] text-[#80868b] hover:bg-[#e4e6e8] hover:text-[#80868b]\",\n                                            onClick: ()=>updatePaymentStatus(\"WAIVED\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Waived\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 301,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-white text-gray-700 hover:bg-gray-100\",\n                                            onClick: ()=>updatePaymentStatus(null, null),\n                                            disabled: isUpdating,\n                                            children: \"Clear\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 309,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                lineNumber: 258,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 229,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 228,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 215,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 214,\n        columnNumber: 5\n    }, undefined);\n};\n_s(PaymentIndicator, \"WTdeEFElfe9KIVBmV5svdc37hHk=\");\n_c = PaymentIndicator;\n// Payment history grid component (12 months)\nconst PaymentGrid = (param)=>{\n    let { application, onPaymentUpdated } = param;\n    _s1();\n    const [payments, setPayments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const fetchPayments = async ()=>{\n            if (!application?.id) return;\n            setLoading(true);\n            try {\n                const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n                const { data, error } = await supabase.from(\"application_payments\").select(\"month_number, payment_status, payment_date, updated_at\").eq(\"application_id\", application.id).order(\"month_number\");\n                if (error) {\n                    console.error(\"Error fetching payments:\", error);\n                    // Don't show error toast for permission issues\n                    if (!error.message.includes(\"permission\") && !error.message.includes(\"must be owner\")) {\n                        sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Failed to load payment history\");\n                    }\n                // Continue without data - we'll fallback to application month fields\n                } else {\n                    setPayments(data || []);\n                }\n            } catch (error) {\n                console.error(\"Error fetching payments:\", error);\n            // Don't show error toast to avoid overwhelming the user\n            } finally{\n                setLoading(false);\n            }\n        };\n        fetchPayments();\n    }, [\n        application?.id\n    ]);\n    // Custom refresh function for when payments are updated\n    const refreshPayments = ()=>{\n        if (onPaymentUpdated) {\n            onPaymentUpdated();\n        }\n    };\n    // Create an array of 12 months\n    const months = Array.from({\n        length: 12\n    }, (_, i)=>i + 1);\n    // Get payment status for a specific month\n    const getMonthStatus = (month)=>{\n        // First try to get from payments data\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment) {\n            return payment.payment_status;\n        }\n        // Auto-set first month as paid if application status contains \"Paid\" or \"paid_status\" is \"Paid\"\n        if (month === 1 && (application.status?.includes(\"Paid\") || application.paid_status === \"Paid\" || application.status === \"Live\" || application.status === \"Approved\")) {\n            console.log(`Auto-marking month 1 as PAID for application with status=${application.status}, paid_status=${application.paid_status}`);\n            return \"PAID\";\n        }\n        // Fallback to month_X fields for backward compatibility\n        const monthKey = `month_${month}`;\n        return application[monthKey] || null;\n    };\n    // Get payment date for a specific month\n    const getPaymentDate = (month)=>{\n        // First check from payments data\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment && payment.payment_date) {\n            return payment.payment_date;\n        }\n        // For first month, use effective_policy_date if it exists and month is paid\n        if (month === 1 && getMonthStatus(month) === \"PAID\" && application.effective_policy_date) {\n            return application.effective_policy_date;\n        }\n        return null;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Auto-update first payment if status is \"Paid & Issued\" or paid_status is \"Paid\"\n        const autoUpdateFirstPayment = async ()=>{\n            if (!application?.id) return;\n            // Check if status qualifies for auto-marking first payment\n            const shouldAutoMarkFirstPayment = (application.status?.includes(\"Paid\") || application.paid_status === \"Paid\" || application.status === \"Live\" || application.status === \"Approved\") && !payments.some((p)=>p.month_number === 1 && p.payment_status === \"PAID\");\n            if (shouldAutoMarkFirstPayment) {\n                try {\n                    console.log(`Auto-updating first payment record for application ${application.id}`);\n                    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n                    // First check if the RPC function exists\n                    const { data: rpcCheck, error: rpcCheckError } = await supabase.rpc(\"update_payment_and_policy_health\", {\n                        p_application_id: application.id,\n                        p_month_number: 1,\n                        p_payment_status: \"PAID\",\n                        p_payment_date: application.effective_policy_date || new Date().toISOString()\n                    }, {\n                        count: \"exact\"\n                    });\n                    if (rpcCheckError) {\n                        console.error(\"Error checking RPC function:\", rpcCheckError);\n                        // Fallback to direct insert if RPC is not available\n                        console.log(\"Falling back to direct insert into application_payments\");\n                        // Check if payment record exists\n                        const { data: existingPayments } = await supabase.from(\"application_payments\").select(\"id\").eq(\"application_id\", application.id).eq(\"month_number\", 1);\n                        if (!existingPayments || existingPayments.length === 0) {\n                            // Insert new payment record\n                            await supabase.from(\"application_payments\").insert({\n                                application_id: application.id,\n                                month_number: 1,\n                                payment_status: \"PAID\",\n                                payment_date: application.effective_policy_date || new Date().toISOString()\n                            });\n                        } else {\n                            // Update existing payment record\n                            await supabase.from(\"application_payments\").update({\n                                payment_status: \"PAID\",\n                                payment_date: application.effective_policy_date || new Date().toISOString(),\n                                updated_at: new Date().toISOString()\n                            }).eq(\"application_id\", application.id).eq(\"month_number\", 1);\n                        }\n                    }\n                    // Also update legacy month_1 field directly\n                    await supabase.from(\"agent_applications\").update({\n                        month_1: \"PAID\"\n                    }).eq(\"id\", application.id);\n                    refreshPayments();\n                    console.log(\"First payment auto-updated successfully\");\n                } catch (error) {\n                    console.error(\"Error auto-updating first payment:\", error);\n                }\n            }\n        };\n        autoUpdateFirstPayment();\n    }, [\n        application?.id,\n        application?.status,\n        application?.paid_status,\n        payments\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"payment-history-container\",\n        children: loading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Loading payment history...\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 509,\n            columnNumber: 9\n        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: months.map((month)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PaymentIndicator, {\n                    status: getMonthStatus(month),\n                    monthNumber: month,\n                    applicationId: application.id,\n                    paymentDate: getPaymentDate(month),\n                    onPaymentUpdated: refreshPayments\n                }, month, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 513,\n                    columnNumber: 13\n                }, undefined))\n        }, void 0, false)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 507,\n        columnNumber: 5\n    }, undefined);\n};\n_s1(PaymentGrid, \"XznPJkF/FJRogWEef9Xsl0ix/TA=\");\n_c1 = PaymentGrid;\n// Payment Update Modal Component\nconst PaymentUpdateModal = (param)=>{\n    let { applicationId, monthNumber, currentStatus, currentPaymentDate, onClose } = param;\n    _s2();\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(currentStatus || \"\");\n    const [paymentDate, setPaymentDate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(currentPaymentDate || \"\");\n    const [isSaving, setIsSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n    const handleSave = async ()=>{\n        if (!status) {\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Please select a payment status\");\n            return;\n        }\n        setIsSaving(true);\n        try {\n            // Check if payment record exists\n            const { data: existingPayments, error: fetchError } = await supabase.from(\"application_payments\").select(\"*\").eq(\"application_id\", applicationId).eq(\"month_number\", monthNumber);\n            if (fetchError) throw fetchError;\n            // If record exists, update it, otherwise insert new record\n            if (existingPayments && existingPayments.length > 0) {\n                const { error } = await supabase.from(\"application_payments\").update({\n                    payment_status: status,\n                    payment_date: status === \"PAID\" ? paymentDate || null : null,\n                    updated_at: new Date().toISOString()\n                }).eq(\"application_id\", applicationId).eq(\"month_number\", monthNumber);\n                if (error) throw error;\n            } else {\n                const { error } = await supabase.from(\"application_payments\").insert({\n                    application_id: applicationId,\n                    month_number: monthNumber,\n                    payment_status: status,\n                    payment_date: status === \"PAID\" ? paymentDate || null : null\n                });\n                if (error) throw error;\n            }\n            // Update policy health\n            await updatePolicyHealth(applicationId);\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.success(\"Payment status updated\");\n            onClose();\n        } catch (error) {\n            console.error(\"Error saving payment status:\", error);\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Error saving payment status\");\n        } finally{\n            setIsSaving(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"payment-update-modal\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"payment-modal-content\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"payment-modal-header\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            children: [\n                                \"Update Payment Status - Month \",\n                                monthNumber\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 608,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"close-modal\",\n                            onClick: onClose,\n                            children: \"\\xd7\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 609,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 607,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"payment-modal-body\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"form-group\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"payment-status\",\n                                    children: \"Payment Status\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 613,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                    id: \"payment-status\",\n                                    className: \"payment-status-select\",\n                                    value: status,\n                                    onChange: (e)=>setStatus(e.target.value),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"\",\n                                            children: \"Select Status\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 620,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"PAID\",\n                                            children: \"Paid\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 621,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"MISSED\",\n                                            children: \"Missed\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 622,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"PENDING\",\n                                            children: \"Pending\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 623,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"NSF\",\n                                            children: \"NSF (Insufficient Funds)\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 624,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"WAIVED\",\n                                            children: \"Waived\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 625,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 614,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 612,\n                            columnNumber: 11\n                        }, undefined),\n                        status === \"PAID\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"form-group\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"payment-date\",\n                                    children: \"Payment Date\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 630,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"date\",\n                                    id: \"payment-date\",\n                                    className: \"payment-date-input\",\n                                    value: paymentDate || \"\",\n                                    onChange: (e)=>setPaymentDate(e.target.value)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 631,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 629,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 611,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"payment-modal-footer\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"cancel-btn\",\n                            onClick: onClose,\n                            disabled: isSaving,\n                            children: \"Cancel\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 642,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"save-btn\",\n                            onClick: handleSave,\n                            disabled: isSaving,\n                            children: isSaving ? \"Saving...\" : \"Save Changes\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 643,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 641,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 606,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 605,\n        columnNumber: 5\n    }, undefined);\n};\n_s2(PaymentUpdateModal, \"d3JZo53ISmzkg7u2ZDUPcAL95X4=\");\n_c2 = PaymentUpdateModal;\n// Function to update policy health based on payment statuses\nasync function updatePolicyHealth(applicationId) {\n    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n    try {\n        // Get all payments for this application\n        const { data: payments, error: fetchError } = await supabase.from(\"application_payments\").select(\"*\").eq(\"application_id\", applicationId);\n        if (fetchError) throw fetchError;\n        // Get application details\n        const { data: applications, error: appError } = await supabase.from(\"agent_applications\").select(\"status, paid_status\").eq(\"id\", applicationId);\n        if (appError) throw appError;\n        if (!applications || applications.length === 0) return;\n        const app = applications[0];\n        // Check if policy is already cancelled\n        if (app.status?.includes(\"Cancelled\") || app.status === \"Declined\") {\n            return; // Don't change cancelled policies\n        }\n        // Count missed payments\n        const missedPayments = payments?.filter((p)=>p.payment_status === \"MISSED\" || p.payment_status === \"NSF\").length || 0;\n        // Determine new policy health\n        let newPolicyHealth;\n        if (missedPayments >= 2) {\n            newPolicyHealth = \"Payment Issues\";\n        } else if (app.status === \"Approved\" && app.paid_status === \"Paid\") {\n            newPolicyHealth = \"Active\";\n        } else if (app.status === \"Approved\" && app.paid_status === \"Unpaid\") {\n            newPolicyHealth = \"Pending First Payment\";\n        } else {\n            // Keep existing policy health\n            return;\n        }\n        // Update policy health\n        const { error: updateError } = await supabase.from(\"agent_applications\").update({\n            policy_health: newPolicyHealth\n        }).eq(\"id\", applicationId);\n        if (updateError) throw updateError;\n    } catch (error) {\n        console.error(\"Error updating policy health:\", error);\n        throw error;\n    }\n}\n// Payment status legend component\nconst PaymentLegend = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-paid\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 717,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Paid\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 718,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 716,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-missed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 721,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Missed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 722,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 720,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-pending\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 725,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Pending\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 726,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 724,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-nsf\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 729,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"NSF\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 730,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 728,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-waived\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 733,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Waived\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 734,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 732,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-empty\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 737,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Not Due\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 738,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 736,\n                columnNumber: 5\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 715,\n        columnNumber: 3\n    }, undefined);\n_c3 = PaymentLegend;\n// NEW: Create a wrapper component for the payment history grid\nconst SafePaymentHistoryGrid = (param)=>{\n    let { applicationId } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ErrorBoundary__WEBPACK_IMPORTED_MODULE_9__.ErrorBoundary, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PaymentHistoryGrid, {\n            applicationId: applicationId\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 747,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 746,\n        columnNumber: 5\n    }, undefined);\n};\n_c4 = SafePaymentHistoryGrid;\n// NEW: Payment history grid component for the applications table\nconst PaymentHistoryGrid = (param)=>{\n    let { applicationId } = param;\n    _s3();\n    const [payments, setPayments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [application, setApplication] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [shouldShowPayments, setShouldShowPayments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    // Use a stable key for rendering indicators\n    const stableKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(`payment-grid-${applicationId}`).current;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Set isMounted ref to true when component mounts\n        isMounted.current = true;\n        // Only fetch if we have an application ID\n        if (applicationId) {\n            fetchApplicationDetails();\n            fetchPayments();\n        }\n        // Clean up function that runs when component unmounts\n        return ()=>{\n            // Mark component as unmounted to prevent state updates\n            isMounted.current = false;\n        };\n    }, [\n        applicationId\n    ]);\n    // Fetch application details to get effective policy date and status\n    const fetchApplicationDetails = async ()=>{\n        if (!applicationId) return;\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n            const { data, error } = await supabase.from(\"agent_applications\").select(\"effective_policy_date, status, paid_status\").eq(\"id\", applicationId).single();\n            if (error) {\n                console.error(\"Error fetching application details:\", error);\n                return;\n            }\n            if (data && isMounted.current) {\n                setApplication(data);\n                // Only show payment history for issued and paid applications\n                const isIssuedAndPaid = data.status === \"Live\" || data.status === \"Approved\" || data.status?.includes(\"Paid\") || data.paid_status === \"Paid\";\n                setShouldShowPayments(isIssuedAndPaid);\n            }\n        } catch (error) {\n            console.error(\"Error in fetchApplicationDetails:\", error);\n        }\n    };\n    const fetchPayments = async ()=>{\n        if (!applicationId) return;\n        setLoading(true);\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n            const { data, error } = await supabase.from(\"application_payments\").select(\"month_number, payment_status, payment_date, updated_at\").eq(\"application_id\", applicationId).order(\"month_number\");\n            if (error) {\n                // Still log the error but don't show to user\n                console.error(\"Error fetching payments:\", error);\n            } else if (data && isMounted.current) {\n                setPayments(data);\n            }\n        } catch (error) {\n            console.error(\"Error in payment history:\", error);\n        } finally{\n            if (isMounted.current) {\n                setLoading(false);\n            }\n        }\n    };\n    const getMonthStatus = (month)=>{\n        // First check payment record\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment?.payment_status) {\n            return payment.payment_status;\n        }\n        // For the first month, check application status\n        if (month === 1 && application) {\n            if (application.status?.includes(\"Paid\") || application.paid_status === \"Paid\" || application.status === \"Live\" || application.status === \"Approved\") {\n                return \"PAID\";\n            }\n        }\n        return null;\n    };\n    const getPaymentDate = (month)=>{\n        // First check from payments data\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment?.payment_date) {\n            return payment.payment_date;\n        }\n        // For first month with effective policy date\n        if (month === 1 && application?.effective_policy_date) {\n            return application.effective_policy_date;\n        }\n        return null;\n    };\n    const handlePaymentUpdated = ()=>{\n        if (isMounted.current) {\n            fetchPayments();\n            fetchApplicationDetails();\n        }\n    };\n    // Create indicators for months 1-12 with careful key management\n    const renderPaymentIndicators = ()=>{\n        const months = Array.from({\n            length: 12\n        }, (_, i)=>i + 1);\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex gap-1 items-center\",\n            children: months.map((month)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PaymentIndicator, {\n                    status: getMonthStatus(month),\n                    monthNumber: month,\n                    applicationId: applicationId,\n                    paymentDate: getPaymentDate(month),\n                    onPaymentUpdated: handlePaymentUpdated\n                }, `${stableKey}-month-${month}`, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 891,\n                    columnNumber: 11\n                }, undefined))\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 889,\n            columnNumber: 7\n        }, undefined);\n    };\n    // Show nothing if the application isn't issued and paid\n    if (!shouldShowPayments) {\n        return null;\n    }\n    // Create a simpler display if loading is taking too long\n    if (loading && payments.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"payment-history-container flex items-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-xs text-gray-500\",\n                children: \"Loading...\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 913,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 912,\n            columnNumber: 7\n        }, undefined);\n    }\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"payment-history-container\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-xs text-red-500\",\n                children: error\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 921,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 920,\n            columnNumber: 7\n        }, undefined);\n    }\n    // Render the actual component\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"payment-history-container\",\n        children: renderPaymentIndicators()\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 928,\n        columnNumber: 5\n    }, undefined);\n};\n_s3(PaymentHistoryGrid, \"YvGcdELHjesQQeo8dXrIFiUUlBg=\");\n_c5 = PaymentHistoryGrid;\n// Payment history legend component\nconst PaymentHistoryLegend = ()=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center gap-3 text-xs text-gray-600 mt-2 mb-4\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"font-medium\",\n                children: \"Payment Legend:\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 938,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#137333] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 940,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Paid\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 941,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 939,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#1a73e8] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 944,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Pending\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 945,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 943,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#c5221f] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 948,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Missed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 949,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 947,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#ea8600] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 952,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"NSF\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 953,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 951,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#80868b] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 956,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Waived\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 957,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 955,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full border border-gray-300 mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 960,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Not Set\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 961,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 959,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 937,\n        columnNumber: 5\n    }, undefined);\n};\n_c6 = PaymentHistoryLegend;\nvar _c, _c1, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"PaymentIndicator\");\n$RefreshReg$(_c1, \"PaymentGrid\");\n$RefreshReg$(_c2, \"PaymentUpdateModal\");\n$RefreshReg$(_c3, \"PaymentLegend\");\n$RefreshReg$(_c4, \"SafePaymentHistoryGrid\");\n$RefreshReg$(_c5, \"PaymentHistoryGrid\");\n$RefreshReg$(_c6, \"PaymentHistoryLegend\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYWdlbnQvYXBwbGljYXRpb25zL2NvbXBvbmVudHMvUGF5bWVudENvbXBvbmVudHMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFbUQ7QUFFQztBQUNxQztBQUNqRDtBQUNWO0FBQ21EO0FBQ2xDO0FBQ0k7QUFDbEI7QUFDVTtBQUNJO0FBVS9DLGtFQUFrRTtBQUMzRCxNQUFNZSxtQkFBbUI7UUFBQyxFQUMvQkMsTUFBTSxFQUNOQyxXQUFXLEVBQ1hDLGFBQWEsRUFDYkMsV0FBVyxFQUNYQyxnQkFBZ0IsRUFPakI7O0lBQ0MsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUd0QiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUN1QixpQkFBaUJDLG1CQUFtQixHQUFHeEIsK0NBQVFBLENBQUM7SUFDdkQsTUFBTSxDQUFDeUIsY0FBY0MsZ0JBQWdCLEdBQUcxQiwrQ0FBUUEsQ0FDOUNtQixjQUFjLElBQUlRLEtBQUtSLGVBQWVTO0lBRXhDLE1BQU1DLFlBQVkzQiw2Q0FBTUEsQ0FBQztJQUV6QixrQ0FBa0M7SUFDbENELGdEQUFTQSxDQUFDO1FBQ1I0QixVQUFVQyxPQUFPLEdBQUc7UUFFcEIsT0FBTztZQUNMRCxVQUFVQyxPQUFPLEdBQUc7UUFDdEI7SUFDRixHQUFHLEVBQUU7SUFFTCxvRUFBb0U7SUFDcEUsTUFBTUMsc0JBQXNCO1FBQzFCLE1BQU1DLFlBQVk1Qiw0RUFBd0JBLENBQUNZO1FBQzNDLE1BQU1pQixrQkFBa0JoQixnQkFBZ0IsSUFBSSxpQkFBaUI7UUFDN0QsTUFBTWlCLE9BQU9qQixnQkFBZ0IsSUFBSSxZQUFZO1FBQzdDLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRWUsVUFBVSxDQUFDLEVBQUVDLGdCQUFnQixDQUFDLEVBQUVDLEtBQUssQ0FBQyxFQUFFYixhQUFhLGtCQUFrQixHQUFHLENBQUM7SUFDekc7SUFFQSxNQUFNYyxpQkFBaUJKO0lBQ3ZCLG1FQUFtRTtJ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a0NBQ2YsOERBQUNVO2tDQUFLOzs7Ozs7Ozs7Ozs7MEJBRVIsOERBQUNYO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0Q7d0JBQUlDLFdBQVU7Ozs7OztrQ0FDZiw4REFBQ1U7a0NBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlkLEVBQUU7TUE5Qlc0RiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvYXBwL2FnZW50L2FwcGxpY2F0aW9ucy9jb21wb25lbnRzL1BheW1lbnRDb21wb25lbnRzLnRzeD9kNDg5Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xyXG5cclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IEFnZW50QXBwbGljYXRpb24sIFBheW1lbnRTdGF0dXMgfSBmcm9tICdAL3R5cGVzL2FwcGxpY2F0aW9uJ1xyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9jbGllbnQnXHJcbmltcG9ydCB7IGdldFBheW1lbnRJbmRpY2F0b3JDbGFzcywgZ2V0UGF5bWVudEluZGljYXRvclRpdGxlIH0gZnJvbSAnLi4vdXRpbHMvc3RhdHVzVXRpbHMnXHJcbmltcG9ydCAnLi4vY29tcG9uZW50cy9zdGF0dXMtc3R5bGVzLmNzcydcclxuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdzb25uZXInXHJcbmltcG9ydCB7IFBvcG92ZXIsIFBvcG92ZXJDb250ZW50LCBQb3BvdmVyVHJpZ2dlciB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9wb3BvdmVyJ1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJ1xyXG5pbXBvcnQgeyBDYWxlbmRhciB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYWxlbmRhcidcclxuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnXHJcbmltcG9ydCB7IENhbGVuZGFySWNvbiB9IGZyb20gJ2x1Y2lkZS1yZWFjdCdcclxuaW1wb3J0IHsgRXJyb3JCb3VuZGFyeSB9IGZyb20gJy4vRXJyb3JCb3VuZGFyeSdcclxuXHJcbi8vIERlZmluZSB0aGUgdHlwZSBmb3IgcGF5bWVudCBkYXRhIGZyb20gZGF0YWJhc2VcclxuaW50ZXJmYWNlIFBheW1lbnREYXRhIHtcclxuICBtb250aF9udW1iZXI6IG51bWJlclxyXG4gIHBheW1lbnRfc3RhdHVzOiBQYXltZW50U3RhdHVzIHwgbnVsbFxyXG4gIHBheW1lbnRfZGF0ZTogc3RyaW5nIHwgbnVsbFxyXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZyB8IG51bGxcclxufVxyXG5cclxuLy8gU2luZ2xlIHBheW1lbnQgaW5kaWNhdG9yIGNvbXBvbmVudCB3aXRoIGltcHJvdmVkIGVycm9yIGhhbmRsaW5nXHJcbmV4cG9ydCBjb25zdCBQYXltZW50SW5kaWNhdG9yID0gKHsgXHJcbiAgc3RhdHVzLCBcclxuICBtb250aE51bWJlciwgXHJcbiAgYXBwbGljYXRpb25JZCxcclxuICBwYXltZW50RGF0ZSxcclxuICBvblBheW1lbnRVcGRhdGVkXHJcbn06IHsgXHJcbiAgc3RhdHVzOiBQYXltZW50U3RhdHVzIHwgbnVsbCwgXHJcbiAgbW9udGhOdW1iZXI6IG51bWJlciwgXHJcbiAgYXBwbGljYXRpb25JZDogc3RyaW5nLFxyXG4gIHBheW1lbnREYXRlPzogc3RyaW5nIHwgbnVsbCxcclxuICBvblBheW1lbnRVcGRhdGVkPzogKCkgPT4gdm9pZFxyXG59KSA9PiB7XHJcbiAgY29uc3QgW2lzVXBkYXRpbmcsIHNldElzVXBkYXRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtzaG93UGF5bWVudE1lbnUsIHNldFNob3dQYXltZW50TWVudV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3NlbGVjdGVkRGF0ZSwgc2V0U2VsZWN0ZWREYXRlXSA9IHVzZVN0YXRlPERhdGUgfCB1bmRlZmluZWQ+KFxyXG4gICAgcGF5bWVudERhdGUgPyBuZXcgRGF0ZShwYXltZW50RGF0ZSkgOiB1bmRlZmluZWRcclxuICApO1xyXG4gIGNvbnN0IGlzTW91bnRlZCA9IHVzZVJlZih0cnVlKTtcclxuICBcclxuICAvLyBDbGVhciBzdGF0ZSBhbmQgcmVmcyBvbiB1bm1vdW50XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlzTW91bnRlZC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaXNNb3VudGVkLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG4gIFxyXG4gIC8vIFVzZSBsYXJnZXIgc2l6ZXMgYW5kIG1vcmUgdmlzaWJsZSBzdHlsZXMgZm9yIGltcG9ydGFudCBpbmRpY2F0b3JzXHJcbiAgY29uc3QgZ2V0SW5kaWNhdG9yQ2xhc3NlcyA9ICgpID0+IHtcclxuICAgIGNvbnN0IGJhc2VDbGFzcyA9IGdldFBheW1lbnRJbmRpY2F0b3JDbGFzcyhzdGF0dXMpO1xyXG4gICAgY29uc3QgZmlyc3RNb250aENsYXNzID0gbW9udGhOdW1iZXIgPT09IDEgPyAnZmlyc3QtbW9udGggJyA6ICcnO1xyXG4gICAgY29uc3Qgc2l6ZSA9IG1vbnRoTnVtYmVyID09PSAxID8gJ3ctNCBoLTQnIDogJ3ctMyBoLTMnO1xyXG4gICAgcmV0dXJuIGBwYXltZW50LWluZGljYXRvciAke2Jhc2VDbGFzc30gJHtmaXJzdE1vbnRoQ2xhc3N9ICR7c2l6ZX0gJHtpc1VwZGF0aW5nID8gJ2FuaW1hdGUtcHVsc2UnIDogJyd9YDtcclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IGluZGljYXRvckNsYXNzID0gZ2V0SW5kaWNhdG9yQ2xhc3NlcygpO1xyXG4gIC8vIEVuc3VyZSBhbGwgaW5kaWNhdG9ycyBoYXZlIGEgbWVhbmluZ2Z1bCB0b29sdGlwLCBldmVuIGVtcHR5IG9uZXNcclxuICBjb25zdCB0b29sdGlwVGl0bGUgPSBzdGF0dXMgXHJcbiAgICA/IGdldFBheW1lbnRJbmRpY2F0b3JUaXRsZShzdGF0dXMsIG1vbnRoTnVtYmVyLCBwYXltZW50RGF0ZSlcclxuICAgIDogYE1vbnRoICR7bW9udGhOdW1iZXJ9OiBDbGljayB0byBzZXQgcGF5bWVudCBzdGF0dXNgO1xyXG4gIFxyXG4gIC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHBheW1lbnQgYW5kIGl0IHNob3VsZCBiZSBtYXJrZWQgYXMgcGFpZFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsZXQgaXNBY3RpdmUgPSB0cnVlOyAvLyBUcmFjayB3aGV0aGVyIHRoaXMgZWZmZWN0IHNob3VsZCBzdGlsbCB1cGRhdGUgc3RhdGVcclxuICAgIFxyXG4gICAgY29uc3QgY2hlY2tGaXJzdFBheW1lbnQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGlmIChtb250aE51bWJlciA9PT0gMSAmJiAhc3RhdHVzKSB7XHJcbiAgICAgICAgLy8gRmV0Y2ggdGhlIGFwcGxpY2F0aW9uIGRldGFpbHNcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdhZ2VudF9hcHBsaWNhdGlvbnMnKVxyXG4gICAgICAgICAgICAuc2VsZWN0KCdzdGF0dXMsIHBhaWRfc3RhdHVzJylcclxuICAgICAgICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpXHJcbiAgICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBPbmx5IHByb2NlZWQgaWYgY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWQgYW5kIGVmZmVjdCBpcyBzdGlsbCBhY3RpdmVcclxuICAgICAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCAmJiBpc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiAoZGF0YS5zdGF0dXM/LmluY2x1ZGVzKCdQYWlkJykgfHwgZGF0YS5wYWlkX3N0YXR1cyA9PT0gJ1BhaWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIG1hcmtlZCBhcyBwYWlkLCBzbyB1cGRhdGUgaXRcclxuICAgICAgICAgICAgICB1cGRhdGVQYXltZW50U3RhdHVzKCdQQUlEJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGZpcnN0IHBheW1lbnQgc3RhdHVzOicsIGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIG1hcmsgYXMgcGFpZFxyXG4gICAgY2hlY2tGaXJzdFBheW1lbnQoKTtcclxuICAgIFxyXG4gICAgLy8gQ2xlYW51cCBmdW5jdGlvblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaXNBY3RpdmUgPSBmYWxzZTsgLy8gTWFyayBlZmZlY3QgYXMgaW5hY3RpdmUgd2hlbiB1bm1vdW50ZWRcclxuICAgIH07XHJcbiAgfSwgW21vbnRoTnVtYmVyLCBzdGF0dXMsIGFwcGxpY2F0aW9uSWRdKTtcclxuICBcclxuICBjb25zdCB1cGRhdGVQYXltZW50U3RhdHVzID0gYXN5bmMgKG5ld1N0YXR1czogUGF5bWVudFN0YXR1cywgZGF0ZT86IERhdGUgfCBudWxsKSA9PiB7XHJcbiAgICBpZiAoIWlzTW91bnRlZC5jdXJyZW50KSByZXR1cm47IC8vIERvbid0IHByb2NlZWQgaWYgdW5tb3VudGVkXHJcbiAgICBcclxuICAgIHNldElzVXBkYXRpbmcodHJ1ZSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xyXG4gICAgICBcclxuICAgICAgLy8gVXNlIHRoZSBwYXltZW50IGRhdGUgbG9naWNcclxuICAgICAgY29uc3QgcGF5bWVudERhdGUgPSBkYXRlIHx8IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChuZXdTdGF0dXMgPT09ICdQQUlEJyA/IG5ldyBEYXRlKCkgOiBudWxsKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFRyeSB0byB1c2UgdGhlIHNhZmUgUlBDIGZ1bmN0aW9uIGZpcnN0XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBycGNSZXN1bHQsIGVycm9yOiBycGNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKFxyXG4gICAgICAgICAgJ3NhZmVfdXBkYXRlX3BheW1lbnQnLFxyXG4gICAgICAgICAgeyBcclxuICAgICAgICAgICAgcF9hcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb25JZCxcclxuICAgICAgICAgICAgcF9tb250aF9udW1iZXI6IG1vbnRoTnVtYmVyLFxyXG4gICAgICAgICAgICBwX3BheW1lbnRfc3RhdHVzOiBuZXdTdGF0dXMsXHJcbiAgICAgICAgICAgIHBfcGF5bWVudF9kYXRlOiBwYXltZW50RGF0ZSA/IHBheW1lbnREYXRlLnRvSVNPU3RyaW5nKCkgOiBudWxsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAocnBjRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1JQQyBmdW5jdGlvbiBmYWlsZWQ6JywgcnBjRXJyb3IpO1xyXG4gICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIGRpcmVjdCB1cGRhdGVzXHJcbiAgICAgICAgfSBlbHNlIGlmIChycGNSZXN1bHQgPT09IHRydWUpIHtcclxuICAgICAgICAgIC8vIFJQQyBmdW5jdGlvbiBzdWNjZWVkZWQsIG5vIG5lZWQgZm9yIGFkZGl0aW9uYWwgdXBkYXRlc1xyXG4gICAgICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIHRvYXN0LnN1Y2Nlc3MoYFBheW1lbnQgZm9yIG1vbnRoICR7bW9udGhOdW1iZXJ9IG1hcmtlZCBhcyAke25ld1N0YXR1cyB8fCAnY2xlYXJlZCd9YCk7XHJcbiAgICAgICAgICAgIGlmIChvblBheW1lbnRVcGRhdGVkKSB7XHJcbiAgICAgICAgICAgICAgb25QYXltZW50VXBkYXRlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChycGNFcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxsaW5nIFJQQyBmdW5jdGlvbjonLCBycGNFcnIpO1xyXG4gICAgICAgIC8vIENvbnRpbnVlIHdpdGggZmFsbGJhY2sgYXBwcm9hY2hcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRmFsbGJhY2s6IEZpcnN0IHRyeSBhZ2VudF9hcHBsaWNhdGlvbnMgdGFibGUgdXBkYXRlIChtb3N0IHJlbGlhYmxlKVxyXG4gICAgICBjb25zdCBtb250aEZpZWxkID0gYG1vbnRoXyR7bW9udGhOdW1iZXJ9YDtcclxuICAgICAgY29uc3QgeyBlcnJvcjogYXBwRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2FnZW50X2FwcGxpY2F0aW9ucycpXHJcbiAgICAgICAgLnVwZGF0ZSh7IFttb250aEZpZWxkXTogbmV3U3RhdHVzIH0pXHJcbiAgICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICAgIFxyXG4gICAgICBpZiAoYXBwRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIG1vbnRoIGZpZWxkIGluIGFnZW50X2FwcGxpY2F0aW9uczonLCBhcHBFcnJvcik7XHJcbiAgICAgICAgdG9hc3QuZXJyb3IoYFVuYWJsZSB0byB1cGRhdGUgcGF5bWVudCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuYCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBUaGVuIHRyeSBhcHBsaWNhdGlvbl9wYXltZW50cyB0YWJsZSBhcyBhIGJlc3QgZWZmb3J0XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgICAudXBzZXJ0KHtcclxuICAgICAgICAgICAgYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG1vbnRoX251bWJlcjogbW9udGhOdW1iZXIsXHJcbiAgICAgICAgICAgIHBheW1lbnRfc3RhdHVzOiBuZXdTdGF0dXMsXHJcbiAgICAgICAgICAgIHBheW1lbnRfZGF0ZTogcGF5bWVudERhdGUgPyBwYXltZW50RGF0ZS50b0lTT1N0cmluZygpIDogbnVsbCxcclxuICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9LCB7IFxyXG4gICAgICAgICAgICBvbkNvbmZsaWN0OiAnYXBwbGljYXRpb25faWQsbW9udGhfbnVtYmVyJyBcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGNhdGNoIChwYXltZW50RXJyKSB7XHJcbiAgICAgICAgLy8gSnVzdCBsb2cgdGhpcyBlcnJvciAtIHdlIGFscmVhZHkgdXBkYXRlZCB0aGUgYWdlbnRfYXBwbGljYXRpb25zIHRhYmxlXHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBhcHBsaWNhdGlvbl9wYXltZW50cyB0YWJsZTonLCBwYXltZW50RXJyKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgbW9udGggYW5kIG1hcmtpbmcgYXMgUEFJRCwgdXBkYXRlIHBhaWRfc3RhdHVzXHJcbiAgICAgIGlmIChtb250aE51bWJlciA9PT0gMSAmJiBuZXdTdGF0dXMgPT09ICdQQUlEJykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAuZnJvbSgnYWdlbnRfYXBwbGljYXRpb25zJylcclxuICAgICAgICAgICAgLnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgIHBhaWRfc3RhdHVzOiAnUGFpZCcsXHJcbiAgICAgICAgICAgICAgcG9saWN5X2hlYWx0aDogJ0FjdGl2ZSdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwYWlkX3N0YXR1czonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgICB0b2FzdC5zdWNjZXNzKGBQYXltZW50IGZvciBtb250aCAke21vbnRoTnVtYmVyfSBtYXJrZWQgYXMgJHtuZXdTdGF0dXMgfHwgJ2NsZWFyZWQnfWApO1xyXG4gICAgICAgIGlmIChvblBheW1lbnRVcGRhdGVkKSB7XHJcbiAgICAgICAgICBvblBheW1lbnRVcGRhdGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwYXltZW50IHN0YXR1czonLCBlcnJvcik7XHJcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIHRvYXN0LmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHBheW1lbnQgc3RhdHVzJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIHNldElzVXBkYXRpbmcoZmFsc2UpO1xyXG4gICAgICAgIHNldFNob3dQYXltZW50TWVudShmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPEVycm9yQm91bmRhcnk+XHJcbiAgICAgIDxQb3BvdmVyIG9wZW49e3Nob3dQYXltZW50TWVudX0gb25PcGVuQ2hhbmdlPXtzZXRTaG93UGF5bWVudE1lbnV9PlxyXG4gICAgICAgIDxQb3BvdmVyVHJpZ2dlciBhc0NoaWxkPlxyXG4gICAgICAgICAgPGRpdiBcclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtpbmRpY2F0b3JDbGFzc31cclxuICAgICAgICAgICAgdGl0bGU9e3Rvb2x0aXBUaXRsZX1cclxuICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICBib3JkZXI6IG1vbnRoTnVtYmVyID09PSAxID8gJzJweCBzb2xpZCAjNjY2JyA6ICcxcHggc29saWQgI2QwZDBkMCcsXHJcbiAgICAgICAgICAgICAgYm94U2hhZG93OiBzdGF0dXMgPT09ICdQQUlEJyA/ICcwIDAgMnB4IDFweCByZ2JhKDE5LCAxMTUsIDUxLCAwLjUpJyA6ICdub25lJyxcclxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHN0YXR1cyA/IHVuZGVmaW5lZCA6ICd3aGl0ZScsIC8vIEZvcmNlIHdoaXRlIGJhY2tncm91bmQgZm9yIGVtcHR5IGluZGljYXRvcnNcclxuICAgICAgICAgICAgICBvcGFjaXR5OiAxIC8vIEVuc3VyZSBmdWxsIG9wYWNpdHkgYXQgYWxsIHRpbWVzXHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvUG9wb3ZlclRyaWdnZXI+XHJcbiAgICAgICAgPFBvcG92ZXJDb250ZW50IGNsYXNzTmFtZT1cInctNzJcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsIG9wYWNpdHk6IDEsIGJveFNoYWRvdzogJzAgNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSknLCBib3JkZXI6ICcxcHggc29saWQgI2QwZDBkMCcgfX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+TW9udGgge21vbnRoTnVtYmVyfSBQYXltZW50PC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB7LyogRGF0ZSBwaWNrZXIgKi99XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XHJcbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW1cIj5QYXltZW50IERhdGU8L2xhYmVsPlxyXG4gICAgICAgICAgICAgIDxQb3BvdmVyPlxyXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJUcmlnZ2VyIGFzQ2hpbGQ+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGp1c3RpZnktc3RhcnQgdGV4dC1sZWZ0IGZvbnQtbm9ybWFsXCJcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNVcGRhdGluZ31cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhckljb24gY2xhc3NOYW1lPVwibXItMiBoLTQgdy00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWREYXRlID8gZm9ybWF0KHNlbGVjdGVkRGF0ZSwgJ1BQUCcpIDogPHNwYW4+UGljayBhIGRhdGU8L3NwYW4+fVxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvUG9wb3ZlclRyaWdnZXI+XHJcbiAgICAgICAgICAgICAgICA8UG9wb3ZlckNvbnRlbnQgY2xhc3NOYW1lPVwidy1hdXRvIHAtMFwiIHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogJ3doaXRlJywgb3BhY2l0eTogMSB9fT5cclxuICAgICAgICAgICAgICAgICAgPENhbGVuZGFyXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cInNpbmdsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ9e3NlbGVjdGVkRGF0ZX1cclxuICAgICAgICAgICAgICAgICAgICBvblNlbGVjdD17KGRhdGUpID0+IHNldFNlbGVjdGVkRGF0ZShkYXRlKX1cclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsRm9jdXNcclxuICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvUG9wb3ZlckNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgPC9Qb3BvdmVyPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHsvKiBQYXltZW50IHN0YXR1cyBidXR0b25zICovfVxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTJcIj5cclxuICAgICAgICAgICAgICB7aXNVcGRhdGluZyA/IChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMiBmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBweS00XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIGgtNSB3LTUgdGV4dC1ncmF5LTUwMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzTmFtZT1cIm9wYWNpdHktMjVcIiBjeD1cIjEyXCIgY3k9XCIxMlwiIHI9XCIxMFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZVdpZHRoPVwiNFwiPjwvY2lyY2xlPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIGNsYXNzTmFtZT1cIm9wYWNpdHktNzVcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk00IDEyYTggOCAwIDAxOC04VjBDNS4zNzMgMCAwIDUuMzczIDAgMTJoNHptMiA1LjI5MUE3Ljk2MiA3Ljk2MiAwIDAxNCAxMkgwYzAgMy4wNDIgMS4xMzUgNS44MjQgMyA3LjkzOGwzLTIuNjQ3elwiPjwvcGF0aD5cclxuICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1sLTJcIj5VcGRhdGluZy4uLjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLVsjZTZmNGVhXSB0ZXh0LVsjMTM3MzMzXSBob3ZlcjpiZy1bI2QzZWVkYl0gaG92ZXI6dGV4dC1bIzEzNzMzM11cIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHVwZGF0ZVBheW1lbnRTdGF0dXMoJ1BBSUQnLCBzZWxlY3RlZERhdGUpfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwZGF0aW5nfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgUGFpZFxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1bI2ZjZThlNl0gdGV4dC1bI2M1MjIxZl0gaG92ZXI6YmctWyNmYWRhZDddIGhvdmVyOnRleHQtWyNjNTIyMWZdXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB1cGRhdGVQYXltZW50U3RhdHVzKCdNSVNTRUQnLCBzZWxlY3RlZERhdGUpfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwZGF0aW5nfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgTWlzc2VkXHJcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLVsjZThmMGZlXSB0ZXh0LVsjMWE3M2U4XSBob3ZlcjpiZy1bI2Q0ZTJmY10gaG92ZXI6dGV4dC1bIzFhNzNlOF1cIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHVwZGF0ZVBheW1lbnRTdGF0dXMoJ1BFTkRJTkcnLCBzZWxlY3RlZERhdGUpfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwZGF0aW5nfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgUGVuZGluZ1xyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1bI2ZlZjdlMF0gdGV4dC1bI2VhODYwMF0gaG92ZXI6YmctWyNmZGYzZDBdIGhvdmVyOnRleHQtWyNlYTg2MDBdXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB1cGRhdGVQYXltZW50U3RhdHVzKCdOU0YnLCBzZWxlY3RlZERhdGUpfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwZGF0aW5nfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgTlNGXHJcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLVsjZjFmM2Y0XSB0ZXh0LVsjODA4NjhiXSBob3ZlcjpiZy1bI2U0ZTZlOF0gaG92ZXI6dGV4dC1bIzgwODY4Yl1cIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHVwZGF0ZVBheW1lbnRTdGF0dXMoJ1dBSVZFRCcsIHNlbGVjdGVkRGF0ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzVXBkYXRpbmd9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICBXYWl2ZWRcclxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctd2hpdGUgdGV4dC1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTEwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdXBkYXRlUGF5bWVudFN0YXR1cyhudWxsLCBudWxsKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNVcGRhdGluZ31cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyXHJcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L1BvcG92ZXJDb250ZW50PlxyXG4gICAgICA8L1BvcG92ZXI+XHJcbiAgICA8L0Vycm9yQm91bmRhcnk+XHJcbiAgKTtcclxufTtcclxuXHJcbi8vIFBheW1lbnQgaGlzdG9yeSBncmlkIGNvbXBvbmVudCAoMTIgbW9udGhzKVxyXG5leHBvcnQgY29uc3QgUGF5bWVudEdyaWQgPSAoeyBcclxuICBhcHBsaWNhdGlvbixcclxuICBvblBheW1lbnRVcGRhdGVkXHJcbn06IHsgXHJcbiAgYXBwbGljYXRpb246IEFnZW50QXBwbGljYXRpb24sXHJcbiAgb25QYXltZW50VXBkYXRlZD86ICgpID0+IHZvaWRcclxufSkgPT4ge1xyXG4gIGNvbnN0IFtwYXltZW50cywgc2V0UGF5bWVudHNdID0gdXNlU3RhdGU8UGF5bWVudERhdGFbXT4oW10pO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHRydWUpO1xyXG4gIFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBmZXRjaFBheW1lbnRzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAoIWFwcGxpY2F0aW9uPy5pZCkgcmV0dXJuO1xyXG4gICAgICBcclxuICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnbW9udGhfbnVtYmVyLCBwYXltZW50X3N0YXR1cywgcGF5bWVudF9kYXRlLCB1cGRhdGVkX2F0JylcclxuICAgICAgICAgIC5lcSgnYXBwbGljYXRpb25faWQnLCBhcHBsaWNhdGlvbi5pZClcclxuICAgICAgICAgIC5vcmRlcignbW9udGhfbnVtYmVyJyk7XHJcbiAgICAgICAgICBcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBheW1lbnRzOicsIGVycm9yKTtcclxuICAgICAgICAgIC8vIERvbid0IHNob3cgZXJyb3IgdG9hc3QgZm9yIHBlcm1pc3Npb24gaXNzdWVzXHJcbiAgICAgICAgICBpZiAoIWVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3Blcm1pc3Npb24nKSAmJiAhZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbXVzdCBiZSBvd25lcicpKSB7XHJcbiAgICAgICAgICAgIHRvYXN0LmVycm9yKCdGYWlsZWQgdG8gbG9hZCBwYXltZW50IGhpc3RvcnknKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGhvdXQgZGF0YSAtIHdlJ2xsIGZhbGxiYWNrIHRvIGFwcGxpY2F0aW9uIG1vbnRoIGZpZWxkc1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZXRQYXltZW50cyhkYXRhIHx8IFtdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGF5bWVudHM6JywgZXJyb3IpO1xyXG4gICAgICAgIC8vIERvbid0IHNob3cgZXJyb3IgdG9hc3QgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSB1c2VyXHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGZldGNoUGF5bWVudHMoKTtcclxuICB9LCBbYXBwbGljYXRpb24/LmlkXSk7XHJcbiAgXHJcbiAgLy8gQ3VzdG9tIHJlZnJlc2ggZnVuY3Rpb24gZm9yIHdoZW4gcGF5bWVudHMgYXJlIHVwZGF0ZWRcclxuICBjb25zdCByZWZyZXNoUGF5bWVudHMgPSAoKSA9PiB7XHJcbiAgICBpZiAob25QYXltZW50VXBkYXRlZCkge1xyXG4gICAgICBvblBheW1lbnRVcGRhdGVkKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBcclxuICAvLyBDcmVhdGUgYW4gYXJyYXkgb2YgMTIgbW9udGhzXHJcbiAgY29uc3QgbW9udGhzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTIgfSwgKF8sIGkpID0+IGkgKyAxKTtcclxuXHJcbiAgLy8gR2V0IHBheW1lbnQgc3RhdHVzIGZvciBhIHNwZWNpZmljIG1vbnRoXHJcbiAgY29uc3QgZ2V0TW9udGhTdGF0dXMgPSAobW9udGg6IG51bWJlcik6IFBheW1lbnRTdGF0dXMgfCBudWxsID0+IHtcclxuICAgIC8vIEZpcnN0IHRyeSB0byBnZXQgZnJvbSBwYXltZW50cyBkYXRhXHJcbiAgICBjb25zdCBwYXltZW50ID0gcGF5bWVudHMuZmluZChwID0+IHAubW9udGhfbnVtYmVyID09PSBtb250aCk7XHJcbiAgICBpZiAocGF5bWVudCkge1xyXG4gICAgICByZXR1cm4gcGF5bWVudC5wYXltZW50X3N0YXR1cztcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQXV0by1zZXQgZmlyc3QgbW9udGggYXMgcGFpZCBpZiBhcHBsaWNhdGlvbiBzdGF0dXMgY29udGFpbnMgXCJQYWlkXCIgb3IgXCJwYWlkX3N0YXR1c1wiIGlzIFwiUGFpZFwiXHJcbiAgICBpZiAobW9udGggPT09IDEgJiYgKFxyXG4gICAgICAgIGFwcGxpY2F0aW9uLnN0YXR1cz8uaW5jbHVkZXMoJ1BhaWQnKSB8fCBcclxuICAgICAgICBhcHBsaWNhdGlvbi5wYWlkX3N0YXR1cyA9PT0gJ1BhaWQnIHx8IFxyXG4gICAgICAgIGFwcGxpY2F0aW9uLnN0YXR1cyA9PT0gJ0xpdmUnIHx8XHJcbiAgICAgICAgYXBwbGljYXRpb24uc3RhdHVzID09PSAnQXBwcm92ZWQnXHJcbiAgICAgICkpIHtcclxuICAgICAgY29uc29sZS5sb2coYEF1dG8tbWFya2luZyBtb250aCAxIGFzIFBBSUQgZm9yIGFwcGxpY2F0aW9uIHdpdGggc3RhdHVzPSR7YXBwbGljYXRpb24uc3RhdHVzfSwgcGFpZF9zdGF0dXM9JHthcHBsaWNhdGlvbi5wYWlkX3N0YXR1c31gKTtcclxuICAgICAgcmV0dXJuICdQQUlEJztcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRmFsbGJhY2sgdG8gbW9udGhfWCBmaWVsZHMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcclxuICAgIGNvbnN0IG1vbnRoS2V5ID0gYG1vbnRoXyR7bW9udGh9YCBhcyBrZXlvZiB0eXBlb2YgYXBwbGljYXRpb247XHJcbiAgICByZXR1cm4gKGFwcGxpY2F0aW9uW21vbnRoS2V5XSBhcyBQYXltZW50U3RhdHVzKSB8fCBudWxsO1xyXG4gIH07XHJcbiAgXHJcbiAgLy8gR2V0IHBheW1lbnQgZGF0ZSBmb3IgYSBzcGVjaWZpYyBtb250aFxyXG4gIGNvbnN0IGdldFBheW1lbnREYXRlID0gKG1vbnRoOiBudW1iZXIpOiBzdHJpbmcgfCBudWxsID0+IHtcclxuICAgIC8vIEZpcnN0IGNoZWNrIGZyb20gcGF5bWVudHMgZGF0YVxyXG4gICAgY29uc3QgcGF5bWVudCA9IHBheW1lbnRzLmZpbmQocCA9PiBwLm1vbnRoX251bWJlciA9PT0gbW9udGgpO1xyXG4gICAgaWYgKHBheW1lbnQgJiYgcGF5bWVudC5wYXltZW50X2RhdGUpIHtcclxuICAgICAgcmV0dXJuIHBheW1lbnQucGF5bWVudF9kYXRlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGb3IgZmlyc3QgbW9udGgsIHVzZSBlZmZlY3RpdmVfcG9saWN5X2RhdGUgaWYgaXQgZXhpc3RzIGFuZCBtb250aCBpcyBwYWlkXHJcbiAgICBpZiAobW9udGggPT09IDEgJiYgZ2V0TW9udGhTdGF0dXMobW9udGgpID09PSAnUEFJRCcgJiYgYXBwbGljYXRpb24uZWZmZWN0aXZlX3BvbGljeV9kYXRlKSB7XHJcbiAgICAgIHJldHVybiBhcHBsaWNhdGlvbi5lZmZlY3RpdmVfcG9saWN5X2RhdGU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH07XHJcbiAgXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIEF1dG8tdXBkYXRlIGZpcnN0IHBheW1lbnQgaWYgc3RhdHVzIGlzIFwiUGFpZCAmIElzc3VlZFwiIG9yIHBhaWRfc3RhdHVzIGlzIFwiUGFpZFwiXHJcbiAgICBjb25zdCBhdXRvVXBkYXRlRmlyc3RQYXltZW50ID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAoIWFwcGxpY2F0aW9uPy5pZCkgcmV0dXJuO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgaWYgc3RhdHVzIHF1YWxpZmllcyBmb3IgYXV0by1tYXJraW5nIGZpcnN0IHBheW1lbnRcclxuICAgICAgY29uc3Qgc2hvdWxkQXV0b01hcmtGaXJzdFBheW1lbnQgPSAoXHJcbiAgICAgICAgKGFwcGxpY2F0aW9uLnN0YXR1cz8uaW5jbHVkZXMoJ1BhaWQnKSB8fCBcclxuICAgICAgICAgYXBwbGljYXRpb24ucGFpZF9zdGF0dXMgPT09ICdQYWlkJyB8fCBcclxuICAgICAgICAgYXBwbGljYXRpb24uc3RhdHVzID09PSAnTGl2ZScgfHxcclxuICAgICAgICAgYXBwbGljYXRpb24uc3RhdHVzID09PSAnQXBwcm92ZWQnKSAmJiBcclxuICAgICAgICAhcGF5bWVudHMuc29tZShwID0+IHAubW9udGhfbnVtYmVyID09PSAxICYmIHAucGF5bWVudF9zdGF0dXMgPT09ICdQQUlEJylcclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChzaG91bGRBdXRvTWFya0ZpcnN0UGF5bWVudCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgQXV0by11cGRhdGluZyBmaXJzdCBwYXltZW50IHJlY29yZCBmb3IgYXBwbGljYXRpb24gJHthcHBsaWNhdGlvbi5pZH1gKTtcclxuICAgICAgICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoZSBSUEMgZnVuY3Rpb24gZXhpc3RzXHJcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IHJwY0NoZWNrLCBlcnJvcjogcnBjQ2hlY2tFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKFxyXG4gICAgICAgICAgICAndXBkYXRlX3BheW1lbnRfYW5kX3BvbGljeV9oZWFsdGgnLCBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHBfYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uLmlkLFxyXG4gICAgICAgICAgICAgIHBfbW9udGhfbnVtYmVyOiAxLFxyXG4gICAgICAgICAgICAgIHBfcGF5bWVudF9zdGF0dXM6ICdQQUlEJyxcclxuICAgICAgICAgICAgICBwX3BheW1lbnRfZGF0ZTogYXBwbGljYXRpb24uZWZmZWN0aXZlX3BvbGljeV9kYXRlIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7IGNvdW50OiAnZXhhY3QnIH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChycGNDaGVja0Vycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIFJQQyBmdW5jdGlvbjonLCBycGNDaGVja0Vycm9yKTtcclxuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gZGlyZWN0IGluc2VydCBpZiBSUEMgaXMgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmFsbGluZyBiYWNrIHRvIGRpcmVjdCBpbnNlcnQgaW50byBhcHBsaWNhdGlvbl9wYXltZW50cycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcGF5bWVudCByZWNvcmQgZXhpc3RzXHJcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdQYXltZW50cyB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb24uaWQpXHJcbiAgICAgICAgICAgICAgLmVxKCdtb250aF9udW1iZXInLCAxKTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFleGlzdGluZ1BheW1lbnRzIHx8IGV4aXN0aW5nUGF5bWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgLy8gSW5zZXJ0IG5ldyBwYXltZW50IHJlY29yZFxyXG4gICAgICAgICAgICAgIGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgICAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbi5pZCxcclxuICAgICAgICAgICAgICAgICAgbW9udGhfbnVtYmVyOiAxLFxyXG4gICAgICAgICAgICAgICAgICBwYXltZW50X3N0YXR1czogJ1BBSUQnLFxyXG4gICAgICAgICAgICAgICAgICBwYXltZW50X2RhdGU6IGFwcGxpY2F0aW9uLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBwYXltZW50IHJlY29yZFxyXG4gICAgICAgICAgICAgIGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgICAgICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgIHBheW1lbnRfc3RhdHVzOiAnUEFJRCcsXHJcbiAgICAgICAgICAgICAgICAgIHBheW1lbnRfZGF0ZTogYXBwbGljYXRpb24uZWZmZWN0aXZlX3BvbGljeV9kYXRlIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVxKCdhcHBsaWNhdGlvbl9pZCcsIGFwcGxpY2F0aW9uLmlkKVxyXG4gICAgICAgICAgICAgICAgLmVxKCdtb250aF9udW1iZXInLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBBbHNvIHVwZGF0ZSBsZWdhY3kgbW9udGhfMSBmaWVsZCBkaXJlY3RseVxyXG4gICAgICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgLmZyb20oJ2FnZW50X2FwcGxpY2F0aW9ucycpXHJcbiAgICAgICAgICAgIC51cGRhdGUoeyBtb250aF8xOiAnUEFJRCcgfSlcclxuICAgICAgICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uLmlkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICByZWZyZXNoUGF5bWVudHMoKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdGaXJzdCBwYXltZW50IGF1dG8tdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYXV0by11cGRhdGluZyBmaXJzdCBwYXltZW50OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGF1dG9VcGRhdGVGaXJzdFBheW1lbnQoKTtcclxuICB9LCBbYXBwbGljYXRpb24/LmlkLCBhcHBsaWNhdGlvbj8uc3RhdHVzLCBhcHBsaWNhdGlvbj8ucGFpZF9zdGF0dXMsIHBheW1lbnRzXSk7XHJcbiAgXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1oaXN0b3J5LWNvbnRhaW5lclwiPlxyXG4gICAgICB7bG9hZGluZyA/IChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPkxvYWRpbmcgcGF5bWVudCBoaXN0b3J5Li4uPC9kaXY+XHJcbiAgICAgICkgOiAoXHJcbiAgICAgICAgPD5cclxuICAgICAgICAgIHttb250aHMubWFwKG1vbnRoID0+IChcclxuICAgICAgICAgICAgPFBheW1lbnRJbmRpY2F0b3JcclxuICAgICAgICAgICAgICBrZXk9e21vbnRofVxyXG4gICAgICAgICAgICAgIHN0YXR1cz17Z2V0TW9udGhTdGF0dXMobW9udGgpfVxyXG4gICAgICAgICAgICAgIG1vbnRoTnVtYmVyPXttb250aH1cclxuICAgICAgICAgICAgICBhcHBsaWNhdGlvbklkPXthcHBsaWNhdGlvbi5pZH1cclxuICAgICAgICAgICAgICBwYXltZW50RGF0ZT17Z2V0UGF5bWVudERhdGUobW9udGgpfVxyXG4gICAgICAgICAgICAgIG9uUGF5bWVudFVwZGF0ZWQ9e3JlZnJlc2hQYXltZW50c31cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICkpfVxyXG4gICAgICAgIDwvPlxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbi8vIFBheW1lbnQgVXBkYXRlIE1vZGFsIENvbXBvbmVudFxyXG5leHBvcnQgY29uc3QgUGF5bWVudFVwZGF0ZU1vZGFsID0gKHsgXHJcbiAgYXBwbGljYXRpb25JZCwgXHJcbiAgbW9udGhOdW1iZXIsIFxyXG4gIGN1cnJlbnRTdGF0dXMsXHJcbiAgY3VycmVudFBheW1lbnREYXRlLFxyXG4gIG9uQ2xvc2UgXHJcbn06IHsgXHJcbiAgYXBwbGljYXRpb25JZDogc3RyaW5nLCBcclxuICBtb250aE51bWJlcjogbnVtYmVyLCBcclxuICBjdXJyZW50U3RhdHVzOiBzdHJpbmcsXHJcbiAgY3VycmVudFBheW1lbnREYXRlPzogc3RyaW5nIHwgbnVsbCxcclxuICBvbkNsb3NlOiAoKSA9PiB2b2lkIFxyXG59KSA9PiB7XHJcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKGN1cnJlbnRTdGF0dXMgfHwgJycpO1xyXG4gIGNvbnN0IFtwYXltZW50RGF0ZSwgc2V0UGF5bWVudERhdGVdID0gdXNlU3RhdGUoY3VycmVudFBheW1lbnREYXRlIHx8ICcnKTtcclxuICBjb25zdCBbaXNTYXZpbmcsIHNldElzU2F2aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xyXG4gIFxyXG4gIGNvbnN0IGhhbmRsZVNhdmUgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXN0YXR1cykge1xyXG4gICAgICB0b2FzdC5lcnJvcignUGxlYXNlIHNlbGVjdCBhIHBheW1lbnQgc3RhdHVzJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc2V0SXNTYXZpbmcodHJ1ZSk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENoZWNrIGlmIHBheW1lbnQgcmVjb3JkIGV4aXN0c1xyXG4gICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nUGF5bWVudHMsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgLmVxKCdhcHBsaWNhdGlvbl9pZCcsIGFwcGxpY2F0aW9uSWQpXHJcbiAgICAgICAgLmVxKCdtb250aF9udW1iZXInLCBtb250aE51bWJlcik7XHJcbiAgICAgICAgXHJcbiAgICAgIGlmIChmZXRjaEVycm9yKSB0aHJvdyBmZXRjaEVycm9yO1xyXG4gICAgICBcclxuICAgICAgLy8gSWYgcmVjb3JkIGV4aXN0cywgdXBkYXRlIGl0LCBvdGhlcndpc2UgaW5zZXJ0IG5ldyByZWNvcmRcclxuICAgICAgaWYgKGV4aXN0aW5nUGF5bWVudHMgJiYgZXhpc3RpbmdQYXltZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgICAudXBkYXRlKHtcclxuICAgICAgICAgICAgcGF5bWVudF9zdGF0dXM6IHN0YXR1cyxcclxuICAgICAgICAgICAgcGF5bWVudF9kYXRlOiBzdGF0dXMgPT09ICdQQUlEJyA/IHBheW1lbnREYXRlIHx8IG51bGwgOiBudWxsLFxyXG4gICAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb25JZClcclxuICAgICAgICAgIC5lcSgnbW9udGhfbnVtYmVyJywgbW9udGhOdW1iZXIpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ2FwcGxpY2F0aW9uX3BheW1lbnRzJylcclxuICAgICAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb25JZCxcclxuICAgICAgICAgICAgbW9udGhfbnVtYmVyOiBtb250aE51bWJlcixcclxuICAgICAgICAgICAgcGF5bWVudF9zdGF0dXM6IHN0YXR1cyxcclxuICAgICAgICAgICAgcGF5bWVudF9kYXRlOiBzdGF0dXMgPT09ICdQQUlEJyA/IHBheW1lbnREYXRlIHx8IG51bGwgOiBudWxsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFVwZGF0ZSBwb2xpY3kgaGVhbHRoXHJcbiAgICAgIGF3YWl0IHVwZGF0ZVBvbGljeUhlYWx0aChhcHBsaWNhdGlvbklkKTtcclxuICAgICAgXHJcbiAgICAgIHRvYXN0LnN1Y2Nlc3MoJ1BheW1lbnQgc3RhdHVzIHVwZGF0ZWQnKTtcclxuICAgICAgb25DbG9zZSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHBheW1lbnQgc3RhdHVzOicsIGVycm9yKTtcclxuICAgICAgdG9hc3QuZXJyb3IoJ0Vycm9yIHNhdmluZyBwYXltZW50IHN0YXR1cycpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNTYXZpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC11cGRhdGUtbW9kYWxcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LW1vZGFsLWNvbnRlbnRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtbW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICA8aDM+VXBkYXRlIFBheW1lbnQgU3RhdHVzIC0gTW9udGgge21vbnRoTnVtYmVyfTwvaDM+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNsb3NlLW1vZGFsXCIgb25DbGljaz17b25DbG9zZX0+JnRpbWVzOzwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1tb2RhbC1ib2R5XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJwYXltZW50LXN0YXR1c1wiPlBheW1lbnQgU3RhdHVzPC9sYWJlbD5cclxuICAgICAgICAgICAgPHNlbGVjdFxyXG4gICAgICAgICAgICAgIGlkPVwicGF5bWVudC1zdGF0dXNcIlxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInBheW1lbnQtc3RhdHVzLXNlbGVjdFwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9e3N0YXR1c31cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFN0YXR1cyhlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+U2VsZWN0IFN0YXR1czwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJQQUlEXCI+UGFpZDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJNSVNTRURcIj5NaXNzZWQ8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiUEVORElOR1wiPlBlbmRpbmc8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiTlNGXCI+TlNGIChJbnN1ZmZpY2llbnQgRnVuZHMpPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIldBSVZFRFwiPldhaXZlZDwvb3B0aW9uPlxyXG4gICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAge3N0YXR1cyA9PT0gJ1BBSUQnICYmIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJwYXltZW50LWRhdGVcIj5QYXltZW50IERhdGU8L2xhYmVsPlxyXG4gICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgdHlwZT1cImRhdGVcIlxyXG4gICAgICAgICAgICAgICAgaWQ9XCJwYXltZW50LWRhdGVcIlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicGF5bWVudC1kYXRlLWlucHV0XCJcclxuICAgICAgICAgICAgICAgIHZhbHVlPXtwYXltZW50RGF0ZSB8fCAnJ31cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UGF5bWVudERhdGUoZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtbW9kYWwtZm9vdGVyXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNhbmNlbC1idG5cIiBvbkNsaWNrPXtvbkNsb3NlfSBkaXNhYmxlZD17aXNTYXZpbmd9PkNhbmNlbDwvYnV0dG9uPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJzYXZlLWJ0blwiIG9uQ2xpY2s9e2hhbmRsZVNhdmV9IGRpc2FibGVkPXtpc1NhdmluZ30+XHJcbiAgICAgICAgICAgIHtpc1NhdmluZyA/ICdTYXZpbmcuLi4nIDogJ1NhdmUgQ2hhbmdlcyd9XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gdXBkYXRlIHBvbGljeSBoZWFsdGggYmFzZWQgb24gcGF5bWVudCBzdGF0dXNlc1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQb2xpY3lIZWFsdGgoYXBwbGljYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICBcclxuICB0cnkge1xyXG4gICAgLy8gR2V0IGFsbCBwYXltZW50cyBmb3IgdGhpcyBhcHBsaWNhdGlvblxyXG4gICAgY29uc3QgeyBkYXRhOiBwYXltZW50cywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb25JZCk7XHJcbiAgICAgIFxyXG4gICAgaWYgKGZldGNoRXJyb3IpIHRocm93IGZldGNoRXJyb3I7XHJcbiAgICBcclxuICAgIC8vIEdldCBhcHBsaWNhdGlvbiBkZXRhaWxzXHJcbiAgICBjb25zdCB7IGRhdGE6IGFwcGxpY2F0aW9ucywgZXJyb3I6IGFwcEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYWdlbnRfYXBwbGljYXRpb25zJylcclxuICAgICAgLnNlbGVjdCgnc3RhdHVzLCBwYWlkX3N0YXR1cycpXHJcbiAgICAgIC5lcSgnaWQnLCBhcHBsaWNhdGlvbklkKTtcclxuICAgICAgXHJcbiAgICBpZiAoYXBwRXJyb3IpIHRocm93IGFwcEVycm9yO1xyXG4gICAgaWYgKCFhcHBsaWNhdGlvbnMgfHwgYXBwbGljYXRpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBjb25zdCBhcHAgPSBhcHBsaWNhdGlvbnNbMF07XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGlmIHBvbGljeSBpcyBhbHJlYWR5IGNhbmNlbGxlZFxyXG4gICAgaWYgKGFwcC5zdGF0dXM/LmluY2x1ZGVzKCdDYW5jZWxsZWQnKSB8fCBhcHAuc3RhdHVzID09PSAnRGVjbGluZWQnKSB7XHJcbiAgICAgIHJldHVybjsgLy8gRG9uJ3QgY2hhbmdlIGNhbmNlbGxlZCBwb2xpY2llc1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDb3VudCBtaXNzZWQgcGF5bWVudHNcclxuICAgIGNvbnN0IG1pc3NlZFBheW1lbnRzID0gcGF5bWVudHM/LmZpbHRlcihwID0+IFxyXG4gICAgICBwLnBheW1lbnRfc3RhdHVzID09PSAnTUlTU0VEJyB8fCBwLnBheW1lbnRfc3RhdHVzID09PSAnTlNGJ1xyXG4gICAgKS5sZW5ndGggfHwgMDtcclxuICAgIFxyXG4gICAgLy8gRGV0ZXJtaW5lIG5ldyBwb2xpY3kgaGVhbHRoXHJcbiAgICBsZXQgbmV3UG9saWN5SGVhbHRoO1xyXG4gICAgXHJcbiAgICBpZiAobWlzc2VkUGF5bWVudHMgPj0gMikge1xyXG4gICAgICBuZXdQb2xpY3lIZWFsdGggPSAnUGF5bWVudCBJc3N1ZXMnO1xyXG4gICAgfSBlbHNlIGlmIChhcHAuc3RhdHVzID09PSAnQXBwcm92ZWQnICYmIGFwcC5wYWlkX3N0YXR1cyA9PT0gJ1BhaWQnKSB7XHJcbiAgICAgIG5ld1BvbGljeUhlYWx0aCA9ICdBY3RpdmUnO1xyXG4gICAgfSBlbHNlIGlmIChhcHAuc3RhdHVzID09PSAnQXBwcm92ZWQnICYmIGFwcC5wYWlkX3N0YXR1cyA9PT0gJ1VucGFpZCcpIHtcclxuICAgICAgbmV3UG9saWN5SGVhbHRoID0gJ1BlbmRpbmcgRmlyc3QgUGF5bWVudCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBLZWVwIGV4aXN0aW5nIHBvbGljeSBoZWFsdGhcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBVcGRhdGUgcG9saWN5IGhlYWx0aFxyXG4gICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdhZ2VudF9hcHBsaWNhdGlvbnMnKVxyXG4gICAgICAudXBkYXRlKHsgcG9saWN5X2hlYWx0aDogbmV3UG9saWN5SGVhbHRoIH0pXHJcbiAgICAgIC5lcSgnaWQnLCBhcHBsaWNhdGlvbklkKTtcclxuICAgICAgXHJcbiAgICBpZiAodXBkYXRlRXJyb3IpIHRocm93IHVwZGF0ZUVycm9yO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwb2xpY3kgaGVhbHRoOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLy8gUGF5bWVudCBzdGF0dXMgbGVnZW5kIGNvbXBvbmVudFxyXG5leHBvcnQgY29uc3QgUGF5bWVudExlZ2VuZCA9ICgpID0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBnYXAteC00IGdhcC15LTIgdGV4dC1zbVwiPlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaW5kaWNhdG9yIHBheW1lbnQtcGFpZFwiPjwvZGl2PlxyXG4gICAgICA8c3Bhbj5QYWlkPC9zcGFuPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1pbmRpY2F0b3IgcGF5bWVudC1taXNzZWRcIj48L2Rpdj5cclxuICAgICAgPHNwYW4+TWlzc2VkPC9zcGFuPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1pbmRpY2F0b3IgcGF5bWVudC1wZW5kaW5nXCI+PC9kaXY+XHJcbiAgICAgIDxzcGFuPlBlbmRpbmc8L3NwYW4+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWluZGljYXRvciBwYXltZW50LW5zZlwiPjwvZGl2PlxyXG4gICAgICA8c3Bhbj5OU0Y8L3NwYW4+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWluZGljYXRvciBwYXltZW50LXdhaXZlZFwiPjwvZGl2PlxyXG4gICAgICA8c3Bhbj5XYWl2ZWQ8L3NwYW4+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWluZGljYXRvciBwYXltZW50LWVtcHR5XCI+PC9kaXY+XHJcbiAgICAgIDxzcGFuPk5vdCBEdWU8L3NwYW4+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuKTtcclxuXHJcbi8vIE5FVzogQ3JlYXRlIGEgd3JhcHBlciBjb21wb25lbnQgZm9yIHRoZSBwYXltZW50IGhpc3RvcnkgZ3JpZFxyXG5leHBvcnQgY29uc3QgU2FmZVBheW1lbnRIaXN0b3J5R3JpZCA9ICh7IGFwcGxpY2F0aW9uSWQgfTogeyBhcHBsaWNhdGlvbklkOiBzdHJpbmcgfSkgPT4ge1xyXG4gIHJldHVybiAoXHJcbiAgICA8RXJyb3JCb3VuZGFyeT5cclxuICAgICAgPFBheW1lbnRIaXN0b3J5R3JpZCBhcHBsaWNhdGlvbklkPXthcHBsaWNhdGlvbklkfSAvPlxyXG4gICAgPC9FcnJvckJvdW5kYXJ5PlxyXG4gICk7XHJcbn07XHJcblxyXG4vLyBORVc6IFBheW1lbnQgaGlzdG9yeSBncmlkIGNvbXBvbmVudCBmb3IgdGhlIGFwcGxpY2F0aW9ucyB0YWJsZVxyXG5leHBvcnQgY29uc3QgUGF5bWVudEhpc3RvcnlHcmlkID0gKHsgYXBwbGljYXRpb25JZCB9OiB7IGFwcGxpY2F0aW9uSWQ6IHN0cmluZyB9KSA9PiB7XHJcbiAgY29uc3QgW3BheW1lbnRzLCBzZXRQYXltZW50c10gPSB1c2VTdGF0ZTxQYXltZW50RGF0YVtdPihbXSk7XHJcbiAgY29uc3QgW2FwcGxpY2F0aW9uLCBzZXRBcHBsaWNhdGlvbl0gPSB1c2VTdGF0ZTxhbnk+KG51bGwpO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW3Nob3VsZFNob3dQYXltZW50cywgc2V0U2hvdWxkU2hvd1BheW1lbnRzXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBpc01vdW50ZWQgPSB1c2VSZWYodHJ1ZSk7XHJcbiAgXHJcbiAgLy8gVXNlIGEgc3RhYmxlIGtleSBmb3IgcmVuZGVyaW5nIGluZGljYXRvcnNcclxuICBjb25zdCBzdGFibGVLZXkgPSB1c2VSZWYoYHBheW1lbnQtZ3JpZC0ke2FwcGxpY2F0aW9uSWR9YCkuY3VycmVudDtcclxuICBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gU2V0IGlzTW91bnRlZCByZWYgdG8gdHJ1ZSB3aGVuIGNvbXBvbmVudCBtb3VudHNcclxuICAgIGlzTW91bnRlZC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgLy8gT25seSBmZXRjaCBpZiB3ZSBoYXZlIGFuIGFwcGxpY2F0aW9uIElEXHJcbiAgICBpZiAoYXBwbGljYXRpb25JZCkge1xyXG4gICAgICBmZXRjaEFwcGxpY2F0aW9uRGV0YWlscygpO1xyXG4gICAgICBmZXRjaFBheW1lbnRzKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENsZWFuIHVwIGZ1bmN0aW9uIHRoYXQgcnVucyB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgLy8gTWFyayBjb21wb25lbnQgYXMgdW5tb3VudGVkIHRvIHByZXZlbnQgc3RhdGUgdXBkYXRlc1xyXG4gICAgICBpc01vdW50ZWQuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgfTtcclxuICB9LCBbYXBwbGljYXRpb25JZF0pO1xyXG5cclxuICAvLyBGZXRjaCBhcHBsaWNhdGlvbiBkZXRhaWxzIHRvIGdldCBlZmZlY3RpdmUgcG9saWN5IGRhdGUgYW5kIHN0YXR1c1xyXG4gIGNvbnN0IGZldGNoQXBwbGljYXRpb25EZXRhaWxzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFhcHBsaWNhdGlvbklkKSByZXR1cm47XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2FnZW50X2FwcGxpY2F0aW9ucycpXHJcbiAgICAgICAgLnNlbGVjdCgnZWZmZWN0aXZlX3BvbGljeV9kYXRlLCBzdGF0dXMsIHBhaWRfc3RhdHVzJylcclxuICAgICAgICAuZXEoJ2lkJywgYXBwbGljYXRpb25JZClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFwcGxpY2F0aW9uIGRldGFpbHM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGRhdGEgJiYgaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgICBzZXRBcHBsaWNhdGlvbihkYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBPbmx5IHNob3cgcGF5bWVudCBoaXN0b3J5IGZvciBpc3N1ZWQgYW5kIHBhaWQgYXBwbGljYXRpb25zXHJcbiAgICAgICAgY29uc3QgaXNJc3N1ZWRBbmRQYWlkID0gKFxyXG4gICAgICAgICAgKGRhdGEuc3RhdHVzID09PSAnTGl2ZScgfHwgZGF0YS5zdGF0dXMgPT09ICdBcHByb3ZlZCcgfHwgZGF0YS5zdGF0dXM/LmluY2x1ZGVzKCdQYWlkJykgfHwgZGF0YS5wYWlkX3N0YXR1cyA9PT0gJ1BhaWQnKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2V0U2hvdWxkU2hvd1BheW1lbnRzKGlzSXNzdWVkQW5kUGFpZCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGZldGNoQXBwbGljYXRpb25EZXRhaWxzOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IGZldGNoUGF5bWVudHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWFwcGxpY2F0aW9uSWQpIHJldHVybjtcclxuICAgIFxyXG4gICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2FwcGxpY2F0aW9uX3BheW1lbnRzJylcclxuICAgICAgICAuc2VsZWN0KCdtb250aF9udW1iZXIsIHBheW1lbnRfc3RhdHVzLCBwYXltZW50X2RhdGUsIHVwZGF0ZWRfYXQnKVxyXG4gICAgICAgIC5lcSgnYXBwbGljYXRpb25faWQnLCBhcHBsaWNhdGlvbklkKVxyXG4gICAgICAgIC5vcmRlcignbW9udGhfbnVtYmVyJyk7XHJcbiAgICAgICAgXHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIC8vIFN0aWxsIGxvZyB0aGUgZXJyb3IgYnV0IGRvbid0IHNob3cgdG8gdXNlclxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBheW1lbnRzOicsIGVycm9yKTtcclxuICAgICAgfSBlbHNlIGlmIChkYXRhICYmIGlzTW91bnRlZC5jdXJyZW50KSB7XHJcbiAgICAgICAgc2V0UGF5bWVudHMoZGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHBheW1lbnQgaGlzdG9yeTonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldE1vbnRoU3RhdHVzID0gKG1vbnRoOiBudW1iZXIpOiBQYXltZW50U3RhdHVzIHwgbnVsbCA9PiB7XHJcbiAgICAvLyBGaXJzdCBjaGVjayBwYXltZW50IHJlY29yZFxyXG4gICAgY29uc3QgcGF5bWVudCA9IHBheW1lbnRzLmZpbmQocCA9PiBwLm1vbnRoX251bWJlciA9PT0gbW9udGgpO1xyXG4gICAgaWYgKHBheW1lbnQ/LnBheW1lbnRfc3RhdHVzKSB7XHJcbiAgICAgIHJldHVybiBwYXltZW50LnBheW1lbnRfc3RhdHVzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGb3IgdGhlIGZpcnN0IG1vbnRoLCBjaGVjayBhcHBsaWNhdGlvbiBzdGF0dXNcclxuICAgIGlmIChtb250aCA9PT0gMSAmJiBhcHBsaWNhdGlvbikge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgYXBwbGljYXRpb24uc3RhdHVzPy5pbmNsdWRlcygnUGFpZCcpIHx8IFxyXG4gICAgICAgIGFwcGxpY2F0aW9uLnBhaWRfc3RhdHVzID09PSAnUGFpZCcgfHwgXHJcbiAgICAgICAgYXBwbGljYXRpb24uc3RhdHVzID09PSAnTGl2ZScgfHxcclxuICAgICAgICBhcHBsaWNhdGlvbi5zdGF0dXMgPT09ICdBcHByb3ZlZCdcclxuICAgICAgKSB7XHJcbiAgICAgICAgcmV0dXJuICdQQUlEJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IGdldFBheW1lbnREYXRlID0gKG1vbnRoOiBudW1iZXIpOiBzdHJpbmcgfCBudWxsID0+IHtcclxuICAgIC8vIEZpcnN0IGNoZWNrIGZyb20gcGF5bWVudHMgZGF0YVxyXG4gICAgY29uc3QgcGF5bWVudCA9IHBheW1lbnRzLmZpbmQocCA9PiBwLm1vbnRoX251bWJlciA9PT0gbW9udGgpO1xyXG4gICAgaWYgKHBheW1lbnQ/LnBheW1lbnRfZGF0ZSkge1xyXG4gICAgICByZXR1cm4gcGF5bWVudC5wYXltZW50X2RhdGU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZvciBmaXJzdCBtb250aCB3aXRoIGVmZmVjdGl2ZSBwb2xpY3kgZGF0ZVxyXG4gICAgaWYgKG1vbnRoID09PSAxICYmIGFwcGxpY2F0aW9uPy5lZmZlY3RpdmVfcG9saWN5X2RhdGUpIHtcclxuICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfTtcclxuICBcclxuICBjb25zdCBoYW5kbGVQYXltZW50VXBkYXRlZCA9ICgpID0+IHtcclxuICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICBmZXRjaFBheW1lbnRzKCk7XHJcbiAgICAgIGZldGNoQXBwbGljYXRpb25EZXRhaWxzKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBcclxuICAvLyBDcmVhdGUgaW5kaWNhdG9ycyBmb3IgbW9udGhzIDEtMTIgd2l0aCBjYXJlZnVsIGtleSBtYW5hZ2VtZW50XHJcbiAgY29uc3QgcmVuZGVyUGF5bWVudEluZGljYXRvcnMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBtb250aHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMiB9LCAoXywgaSkgPT4gaSArIDEpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTEgaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAge21vbnRocy5tYXAoKG1vbnRoKSA9PiAoXHJcbiAgICAgICAgICA8UGF5bWVudEluZGljYXRvclxyXG4gICAgICAgICAgICBrZXk9e2Ake3N0YWJsZUtleX0tbW9udGgtJHttb250aH1gfVxyXG4gICAgICAgICAgICBzdGF0dXM9e2dldE1vbnRoU3RhdHVzKG1vbnRoKX1cclxuICAgICAgICAgICAgbW9udGhOdW1iZXI9e21vbnRofVxyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbklkPXthcHBsaWNhdGlvbklkfVxyXG4gICAgICAgICAgICBwYXltZW50RGF0ZT17Z2V0UGF5bWVudERhdGUobW9udGgpfVxyXG4gICAgICAgICAgICBvblBheW1lbnRVcGRhdGVkPXtoYW5kbGVQYXltZW50VXBkYXRlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9O1xyXG4gIFxyXG4gIC8vIFNob3cgbm90aGluZyBpZiB0aGUgYXBwbGljYXRpb24gaXNuJ3QgaXNzdWVkIGFuZCBwYWlkXHJcbiAgaWYgKCFzaG91bGRTaG93UGF5bWVudHMpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBcclxuICAvLyBDcmVhdGUgYSBzaW1wbGVyIGRpc3BsYXkgaWYgbG9hZGluZyBpcyB0YWtpbmcgdG9vIGxvbmdcclxuICBpZiAobG9hZGluZyAmJiBwYXltZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1oaXN0b3J5LWNvbnRhaW5lciBmbGV4IGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+TG9hZGluZy4uLjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG4gIFxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWhpc3RvcnktY29udGFpbmVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtcmVkLTUwMFwiPntlcnJvcn08L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuICBcclxuICAvLyBSZW5kZXIgdGhlIGFjdHVhbCBjb21wb25lbnRcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWhpc3RvcnktY29udGFpbmVyXCI+XHJcbiAgICAgIHtyZW5kZXJQYXltZW50SW5kaWNhdG9ycygpfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbi8vIFBheW1lbnQgaGlzdG9yeSBsZWdlbmQgY29tcG9uZW50XHJcbmV4cG9ydCBjb25zdCBQYXltZW50SGlzdG9yeUxlZ2VuZCA9ICgpID0+IHtcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyB0ZXh0LXhzIHRleHQtZ3JheS02MDAgbXQtMiBtYi00XCI+XHJcbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+UGF5bWVudCBMZWdlbmQ6PC9zcGFuPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBiZy1bIzEzNzMzM10gbXItMVwiPjwvZGl2PlxyXG4gICAgICAgIDxzcGFuPlBhaWQ8L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBiZy1bIzFhNzNlOF0gbXItMVwiPjwvZGl2PlxyXG4gICAgICAgIDxzcGFuPlBlbmRpbmc8L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBiZy1bI2M1MjIxZl0gbXItMVwiPjwvZGl2PlxyXG4gICAgICAgIDxzcGFuPk1pc3NlZDwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNCBoLTQgcm91bmRlZC1mdWxsIGJnLVsjZWE4NjAwXSBtci0xXCI+PC9kaXY+XHJcbiAgICAgICAgPHNwYW4+TlNGPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy00IGgtNCByb3VuZGVkLWZ1bGwgYmctWyM4MDg2OGJdIG1yLTFcIj48L2Rpdj5cclxuICAgICAgICA8c3Bhbj5XYWl2ZWQ8L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIG1yLTFcIj48L2Rpdj5cclxuICAgICAgICA8c3Bhbj5Ob3QgU2V0PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07ICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsImNyZWF0ZUNsaWVudCIsImdldFBheW1lbnRJbmRpY2F0b3JDbGFzcyIsImdldFBheW1lbnRJbmRpY2F0b3JUaXRsZSIsInRvYXN0IiwiUG9wb3ZlciIsIlBvcG92ZXJDb250ZW50IiwiUG9wb3ZlclRyaWdnZXIiLCJCdXR0b24iLCJDYWxlbmRhciIsImZvcm1hdCIsIkNhbGVuZGFySWNvbiIsIkVycm9yQm91bmRhcnkiLCJQYXltZW50SW5kaWNhdG9yIiwic3RhdHVzIiwibW9udGhOdW1iZXIiLCJhcHBsaWNhdGlvbklkIiwicGF5bWVudERhdGUiLCJvblBheW1lbnRVcGRhdGVkIiwiaXNVcGRhdGluZyIsInNldElzVXBkYXRpbmciLCJzaG93UGF5bWVudE1lbnUiLCJzZXRTaG93UGF5bWVudE1lbnUiLCJzZWxlY3RlZERhdGUiLCJzZXRTZWxlY3RlZERhdGUiLCJEYXRlIiwidW5kZWZpbmVkIiwiaXNNb3VudGVkIiwiY3VycmVudCIsImdldEluZGljYXRvckNsYXNzZXMiLCJiYXNlQ2xhc3MiLCJmaXJzdE1vbnRoQ2xhc3MiLCJzaXplIiwiaW5kaWNhdG9yQ2xhc3MiLCJ0b29sdGlwVGl0bGUiLCJpc0FjdGl2ZSIsImNoZWNrRmlyc3RQYXltZW50Iiwic3VwYWJhc2UiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJpbmNsdWRlcyIsInBhaWRfc3RhdHVzIiwidXBkYXRlUGF5bWVudFN0YXR1cyIsImVyciIsImNvbnNvbGUiLCJuZXdTdGF0dXMiLCJkYXRlIiwicnBjUmVzdWx0IiwicnBjRXJyb3IiLCJycGMiLCJwX2FwcGxpY2F0aW9uX2lkIiwicF9tb250aF9udW1iZXIiLCJwX3BheW1lbnRfc3RhdHVzIiwicF9wYXltZW50X2RhdGUiLCJ0b0lTT1N0cmluZyIsInN1Y2Nlc3MiLCJycGNFcnIiLCJtb250aEZpZWxkIiwiYXBwRXJyb3IiLCJ1cGRhdGUiLCJ1cHNlcnQiLCJhcHBsaWNhdGlvbl9pZCIsIm1vbnRoX251bWJlciIsInBheW1lbnRfc3RhdHVzIiwicGF5bWVudF9kYXRlIiwidXBkYXRlZF9hdCIsIm9uQ29uZmxpY3QiLCJwYXltZW50RXJyIiwicG9saWN5X2hlYWx0aCIsIm9wZW4iLCJvbk9wZW5DaGFuZ2UiLCJhc0NoaWxkIiwiZGl2IiwiY2xhc3NOYW1lIiwidGl0bGUiLCJzdHlsZSIsImJvcmRlciIsImJveFNoYWRvdyIsImJhY2tncm91bmRDb2xvciIsIm9wYWNpdHkiLCJsYWJlbCIsInZhcmlhbnQiLCJkaXNhYmxlZCIsInNwYW4iLCJtb2RlIiwic2VsZWN0ZWQiLCJvblNlbGVjdCIsImluaXRpYWxGb2N1cyIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJjaXJjbGUiLCJjeCIsImN5IiwiciIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwicGF0aCIsImQiLCJvbkNsaWNrIiwiUGF5bWVudEdyaWQiLCJhcHBsaWNhdGlvbiIsInBheW1lbnRzIiwic2V0UGF5bWVudHMiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImZldGNoUGF5bWVudHMiLCJpZCIsIm9yZGVyIiwibWVzc2FnZSIsInJlZnJlc2hQYXltZW50cyIsIm1vbnRocyIsIkFycmF5IiwibGVuZ3RoIiwiXyIsImkiLCJnZXRNb250aFN0YXR1cyIsIm1vbnRoIiwicGF5bWVudCIsImZpbmQiLCJwIiwibG9nIiwibW9udGhLZXkiLCJnZXRQYXltZW50RGF0ZSIsImVmZmVjdGl2ZV9wb2xpY3lfZGF0ZSIsImF1dG9VcGRhdGVGaXJzdFBheW1lbnQiLCJzaG91bGRBdXRvTWFya0ZpcnN0UGF5bWVudCIsInNvbWUiLCJycGNDaGVjayIsInJwY0NoZWNrRXJyb3IiLCJjb3VudCIsImV4aXN0aW5nUGF5bWVudHMiLCJpbnNlcnQiLCJtb250aF8xIiwibWFwIiwiUGF5bWVudFVwZGF0ZU1vZGFsIiwiY3VycmVudFN0YXR1cyIsImN1cnJlbnRQYXltZW50RGF0ZSIsIm9uQ2xvc2UiLCJzZXRTdGF0dXMiLCJzZXRQYXltZW50RGF0ZSIsImlzU2F2aW5nIiwic2V0SXNTYXZpbmciLCJoYW5kbGVTYXZlIiwiZmV0Y2hFcnJvciIsInVwZGF0ZVBvbGljeUhlYWx0aCIsImgzIiwiYnV0dG9uIiwiaHRtbEZvciIsInZhbHVlIiwib25DaGFuZ2UiLCJlIiwidGFyZ2V0Iiwib3B0aW9uIiwiaW5wdXQiLCJ0eXBlIiwiYXBwbGljYXRpb25zIiwiYXBwIiwibWlzc2VkUGF5bWVudHMiLCJmaWx0ZXIiLCJuZXdQb2xpY3lIZWFsdGgiLCJ1cGRhdGVFcnJvciIsIlBheW1lbnRMZWdlbmQiLCJTYWZlUGF5bWVudEhpc3RvcnlHcmlkIiwiUGF5bWVudEhpc3RvcnlHcmlkIiwic2V0QXBwbGljYXRpb24iLCJzZXRFcnJvciIsInNob3VsZFNob3dQYXltZW50cyIsInNldFNob3VsZFNob3dQYXltZW50cyIsInN0YWJsZUtleSIsImZldGNoQXBwbGljYXRpb25EZXRhaWxzIiwiaXNJc3N1ZWRBbmRQYWlkIiwiaGFuZGxlUGF5bWVudFVwZGF0ZWQiLCJyZW5kZXJQYXltZW50SW5kaWNhdG9ycyIsIlBheW1lbnRIaXN0b3J5TGVnZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/agent/applications/components/PaymentComponents.tsx\n"));

/***/ })

});