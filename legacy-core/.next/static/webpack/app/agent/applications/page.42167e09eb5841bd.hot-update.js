"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/agent/applications/page",{

/***/ "(app-pages-browser)/./src/app/agent/applications/components/PaymentComponents.tsx":
/*!*********************************************************************!*\
  !*** ./src/app/agent/applications/components/PaymentComponents.tsx ***!
  \*********************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PaymentGrid: function() { return /* binding */ PaymentGrid; },\n/* harmony export */   PaymentHistoryGrid: function() { return /* binding */ PaymentHistoryGrid; },\n/* harmony export */   PaymentHistoryLegend: function() { return /* binding */ PaymentHistoryLegend; },\n/* harmony export */   PaymentIndicator: function() { return /* binding */ PaymentIndicator; },\n/* harmony export */   PaymentLegend: function() { return /* binding */ PaymentLegend; },\n/* harmony export */   PaymentUpdateModal: function() { return /* binding */ PaymentUpdateModal; },\n/* harmony export */   SafePaymentHistoryGrid: function() { return /* binding */ SafePaymentHistoryGrid; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase/client */ \"(app-pages-browser)/./src/lib/supabase/client.ts\");\n/* harmony import */ var _utils_statusUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/statusUtils */ \"(app-pages-browser)/./src/app/agent/applications/utils/statusUtils.ts\");\n/* harmony import */ var _components_status_styles_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/status-styles.css */ \"(app-pages-browser)/./src/app/agent/applications/components/status-styles.css\");\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n/* harmony import */ var _components_ui_popover__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/popover */ \"(app-pages-browser)/./src/components/ui/popover.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./src/components/ui/button.tsx\");\n/* harmony import */ var _components_ui_calendar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ui/calendar */ \"(app-pages-browser)/./src/components/ui/calendar.tsx\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"(app-pages-browser)/./node_modules/date-fns/format.mjs\");\n/* harmony import */ var _barrel_optimize_names_CalendarIcon_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarIcon!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/calendar.js\");\n/* harmony import */ var _ErrorBoundary__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ErrorBoundary */ \"(app-pages-browser)/./src/app/agent/applications/components/ErrorBoundary.tsx\");\n/* __next_internal_client_entry_do_not_use__ PaymentIndicator,PaymentGrid,PaymentUpdateModal,PaymentLegend,SafePaymentHistoryGrid,PaymentHistoryGrid,PaymentHistoryLegend auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$(), _s3 = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n// Single payment indicator component with improved error handling\nconst PaymentIndicator = (param)=>{\n    let { status, monthNumber, applicationId, paymentDate, onPaymentUpdated } = param;\n    _s();\n    const [isUpdating, setIsUpdating] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showPaymentMenu, setShowPaymentMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedDate, setSelectedDate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(paymentDate ? new Date(paymentDate) : undefined);\n    const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    // Clear state and refs on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        isMounted.current = true;\n        return ()=>{\n            isMounted.current = false;\n        };\n    }, []);\n    // Use larger sizes and more visible styles for important indicators\n    const getIndicatorClasses = ()=>{\n        const baseClass = (0,_utils_statusUtils__WEBPACK_IMPORTED_MODULE_3__.getPaymentIndicatorClass)(status);\n        const firstMonthClass = monthNumber === 1 ? \"first-month \" : \"\";\n        // Make all indicators consistently small\n        const size = \"w-3 h-3\";\n        return `payment-indicator ${baseClass} ${firstMonthClass} ${size} ${isUpdating ? \"animate-pulse\" : \"\"}`;\n    };\n    const indicatorClass = getIndicatorClasses();\n    // Ensure all indicators have a meaningful tooltip with payment dates\n    const tooltipTitle = !status ? `Month ${monthNumber}: Click to set payment status` : paymentDate ? `Month ${monthNumber}: ${status} (${new Date(paymentDate).toLocaleDateString()})` : `Month ${monthNumber}: ${status}`;\n    // Check if this is the first payment and it should be marked as paid\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let isActive = true; // Track whether this effect should still update state\n        const checkFirstPayment = async ()=>{\n            if (monthNumber === 1 && !status) {\n                // Fetch the application details\n                try {\n                    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n                    const { data, error } = await supabase.from(\"agent_applications\").select(\"status, paid_status, effective_policy_date\").eq(\"id\", applicationId).single();\n                    if (error) throw error;\n                    // Only proceed if component is still mounted and effect is still active\n                    if (isMounted.current && isActive) {\n                        // MUCH stricter check - only mark as paid if explicitly paid_status='Paid'\n                        if (data && data.paid_status === \"Paid\" && data.effective_policy_date !== null) {\n                            // This should be marked as paid, so update it\n                            updatePaymentStatus(\"PAID\");\n                        }\n                    }\n                } catch (err) {\n                    console.error(\"Error checking first payment status:\", err);\n                }\n            }\n        };\n        // Check if we need to mark as paid\n        checkFirstPayment();\n        // Cleanup function\n        return ()=>{\n            isActive = false; // Mark effect as inactive when unmounted\n        };\n    }, [\n        monthNumber,\n        status,\n        applicationId\n    ]);\n    const updatePaymentStatus = async (newStatus, date)=>{\n        if (!isMounted.current) return; // Don't proceed if unmounted\n        setIsUpdating(true);\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n            // Use the payment date logic\n            const paymentDate = date || (newStatus === \"PAID\" ? new Date() : null);\n            // Get current application state first to ensure we're working with the latest data\n            const { data: appData, error: appError } = await supabase.from(\"agent_applications\").select(\"effective_policy_date, status, paid_status, month_1\").eq(\"id\", applicationId).single();\n            if (appError) {\n                console.error(\"Failed to get application data:\", appError);\n                if (isMounted.current) {\n                    sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Error retrieving application data\");\n                }\n                return;\n            }\n            // Synchronize the paid_status for Month 1 changes\n            let shouldUpdatePaidStatus = false;\n            let newPaidStatus = null;\n            if (monthNumber === 1) {\n                if (newStatus === \"PAID\") {\n                    // If first month is being marked as PAID, update paid_status to \"Paid\"\n                    shouldUpdatePaidStatus = true;\n                    newPaidStatus = \"Paid\";\n                } else if (newStatus === null || newStatus === \"MISSED\" || newStatus === \"NSF\") {\n                    // If first month is being marked as unpaid/missed, update paid_status to \"Unpaid\"\n                    shouldUpdatePaidStatus = true;\n                    newPaidStatus = \"Unpaid\";\n                }\n            }\n            // Use our track_payment RPC function with the synchronization info\n            const { data: trackResult, error: trackError } = await supabase.rpc(\"track_payment\", {\n                p_application_id: applicationId,\n                p_month_number: monthNumber,\n                p_payment_status: newStatus,\n                p_payment_date: paymentDate ? paymentDate.toISOString() : null,\n                p_update_paid_status: shouldUpdatePaidStatus,\n                p_new_paid_status: newPaidStatus\n            });\n            if (trackError) {\n                console.error(\"Payment tracking failed:\", trackError);\n                // Fall back to manual synchronization\n                await manualSyncPaymentStatus(supabase, newStatus, paymentDate, shouldUpdatePaidStatus, newPaidStatus);\n            } else {\n                // Check if the tracking was successful\n                if (trackResult && trackResult.success) {\n                    console.log(\"Payment tracking successful:\", trackResult.message);\n                    // If we have a next payment scheduled, log it\n                    if (trackResult.next_payment) {\n                        console.log(\"Next payment scheduled:\", trackResult.next_payment);\n                    }\n                    if (isMounted.current) {\n                        sonner__WEBPACK_IMPORTED_MODULE_5__.toast.success(trackResult.message || `Payment for month ${monthNumber} marked as ${newStatus || \"cleared\"}`);\n                        if (onPaymentUpdated) {\n                            onPaymentUpdated();\n                        }\n                    }\n                } else {\n                    // RPC succeeded but returned an error message\n                    const errorMsg = trackResult?.message || \"Payment update failed\";\n                    console.error(\"Payment tracking returned error:\", errorMsg);\n                    if (isMounted.current) {\n                        sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(errorMsg);\n                    }\n                }\n            }\n        } catch (error) {\n            console.error(\"Error updating payment status:\", error);\n            if (isMounted.current) {\n                sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Failed to update payment status\");\n            }\n        } finally{\n            if (isMounted.current) {\n                setIsUpdating(false);\n                setShowPaymentMenu(false);\n            }\n        }\n    };\n    // Manual synchronization when the RPC function fails\n    const manualSyncPaymentStatus = async (supabase, newStatus, paymentDate, shouldUpdatePaidStatus, newPaidStatus)=>{\n        console.log(\"Performing manual payment synchronization...\");\n        try {\n            // Update both tables for consistency\n            // 1. Update agent_applications table\n            const monthField = `month_${monthNumber}`;\n            let updateFields = {\n                [monthField]: newStatus\n            };\n            // If we need to update paid_status as well\n            if (shouldUpdatePaidStatus && newPaidStatus) {\n                updateFields.paid_status = newPaidStatus;\n                // If marking as paid, also update policy health\n                if (newPaidStatus === \"Paid\") {\n                    updateFields.policy_health = \"Active\";\n                } else if (newPaidStatus === \"Unpaid\") {\n                    updateFields.policy_health = \"Pending First Payment\";\n                }\n            }\n            const { error: appError } = await supabase.from(\"agent_applications\").update(updateFields).eq(\"id\", applicationId);\n            if (appError) {\n                throw new Error(`Failed to update agent_applications: ${appError.message}`);\n            }\n            // 2. Update application_payments table\n            try {\n                const { error: paymentError } = await supabase.from(\"application_payments\").upsert({\n                    application_id: applicationId,\n                    month_number: monthNumber,\n                    payment_status: newStatus,\n                    payment_date: paymentDate ? paymentDate.toISOString() : null,\n                    updated_at: new Date().toISOString()\n                }, {\n                    onConflict: \"application_id,month_number\"\n                });\n                if (paymentError) {\n                    console.error(\"Failed to update application_payments (non-critical):\", paymentError);\n                }\n            } catch (paymentErr) {\n                console.error(\"Error updating application_payments (continuing):\", paymentErr);\n            }\n            // 3. If this was a PAID update, schedule the next payment\n            if (newStatus === \"PAID\" && monthNumber < 12) {\n                const nextMonth = monthNumber + 1;\n                const nextDate = paymentDate ? new Date(paymentDate) : new Date();\n                nextDate.setDate(nextDate.getDate() + 30); // Add 30 days\n                try {\n                    // Update next month in agent_applications\n                    await supabase.from(\"agent_applications\").update({\n                        [`month_${nextMonth}`]: \"PENDING\"\n                    }).eq(\"id\", applicationId);\n                    // Add pending payment for next month\n                    await supabase.from(\"application_payments\").upsert({\n                        application_id: applicationId,\n                        month_number: nextMonth,\n                        payment_status: \"PENDING\",\n                        payment_date: nextDate.toISOString(),\n                        updated_at: new Date().toISOString()\n                    }, {\n                        onConflict: \"application_id,month_number\"\n                    });\n                } catch (nextError) {\n                    console.error(\"Error scheduling next payment (non-critical):\", nextError);\n                }\n            }\n            if (isMounted.current) {\n                sonner__WEBPACK_IMPORTED_MODULE_5__.toast.success(`Payment for month ${monthNumber} marked as ${newStatus || \"cleared\"}`);\n                if (onPaymentUpdated) {\n                    onPaymentUpdated();\n                }\n            }\n            return true;\n        } catch (error) {\n            console.error(\"Manual sync failed:\", error);\n            if (isMounted.current) {\n                sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(`Failed to update payment: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n            }\n            return false;\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ErrorBoundary__WEBPACK_IMPORTED_MODULE_9__.ErrorBoundary, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.Popover, {\n            open: showPaymentMenu,\n            onOpenChange: setShowPaymentMenu,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverTrigger, {\n                    asChild: true,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: indicatorClass,\n                        title: tooltipTitle,\n                        style: {\n                            border: monthNumber === 1 ? \"2px solid #666\" : \"1px solid #d0d0d0\",\n                            boxShadow: status === \"PAID\" ? \"0 0 2px 1px rgba(19, 115, 51, 0.5)\" : \"none\",\n                            backgroundColor: status ? undefined : \"white\",\n                            opacity: 1 // Ensure full opacity at all times\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 321,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 320,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverContent, {\n                    className: \"w-72\",\n                    style: {\n                        backgroundColor: \"white\",\n                        opacity: 1,\n                        boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\",\n                        border: \"1px solid #d0d0d0\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"font-medium\",\n                                children: [\n                                    \"Month \",\n                                    monthNumber,\n                                    \" Payment\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                lineNumber: 334,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"text-sm font-medium\",\n                                        children: \"Payment Date\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                        lineNumber: 338,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.Popover, {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverTrigger, {\n                                                asChild: true,\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                                    variant: \"outline\",\n                                                    className: \"w-full justify-start text-left font-normal\",\n                                                    disabled: isUpdating,\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarIcon_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                                            className: \"mr-2 h-4 w-4\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                            lineNumber: 346,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        selectedDate ? (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__.format)(selectedDate, \"PPP\") : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            children: \"Pick a date\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                            lineNumber: 347,\n                                                            columnNumber: 67\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 341,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                lineNumber: 340,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_6__.PopoverContent, {\n                                                className: \"w-auto p-0\",\n                                                style: {\n                                                    backgroundColor: \"white\",\n                                                    opacity: 1\n                                                },\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_calendar__WEBPACK_IMPORTED_MODULE_8__.Calendar, {\n                                                    mode: \"single\",\n                                                    selected: selectedDate,\n                                                    onSelect: (date)=>setSelectedDate(date),\n                                                    initialFocus: true\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 351,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                lineNumber: 350,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                        lineNumber: 339,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                lineNumber: 337,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-2 gap-2\",\n                                children: isUpdating ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"col-span-2 flex justify-center items-center py-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"animate-spin h-5 w-5 text-gray-500\",\n                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                            fill: \"none\",\n                                            viewBox: \"0 0 24 24\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                                    className: \"opacity-25\",\n                                                    cx: \"12\",\n                                                    cy: \"12\",\n                                                    r: \"10\",\n                                                    stroke: \"currentColor\",\n                                                    strokeWidth: \"4\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 366,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    className: \"opacity-75\",\n                                                    fill: \"currentColor\",\n                                                    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                                    lineNumber: 367,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 365,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"ml-2\",\n                                            children: \"Updating...\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 369,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 364,\n                                    columnNumber: 17\n                                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#e6f4ea] text-[#137333] hover:bg-[#d3eedb] hover:text-[#137333]\",\n                                            onClick: ()=>updatePaymentStatus(\"PAID\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Paid\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 373,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#fce8e6] text-[#c5221f] hover:bg-[#fadad7] hover:text-[#c5221f]\",\n                                            onClick: ()=>updatePaymentStatus(\"MISSED\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Missed\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 381,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#e8f0fe] text-[#1a73e8] hover:bg-[#d4e2fc] hover:text-[#1a73e8]\",\n                                            onClick: ()=>updatePaymentStatus(\"PENDING\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Pending\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 389,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#fef7e0] text-[#ea8600] hover:bg-[#fdf3d0] hover:text-[#ea8600]\",\n                                            onClick: ()=>updatePaymentStatus(\"NSF\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"NSF\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 397,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-[#f1f3f4] text-[#80868b] hover:bg-[#e4e6e8] hover:text-[#80868b]\",\n                                            onClick: ()=>updatePaymentStatus(\"WAIVED\", selectedDate),\n                                            disabled: isUpdating,\n                                            children: \"Waived\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 405,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.Button, {\n                                            variant: \"outline\",\n                                            className: \"bg-white text-gray-700 hover:bg-gray-100\",\n                                            onClick: ()=>updatePaymentStatus(null, null),\n                                            disabled: isUpdating,\n                                            children: \"Clear\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 413,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                lineNumber: 362,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 333,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 332,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 319,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 318,\n        columnNumber: 5\n    }, undefined);\n};\n_s(PaymentIndicator, \"WTdeEFElfe9KIVBmV5svdc37hHk=\");\n_c = PaymentIndicator;\n// Payment history grid component (12 months)\nconst PaymentGrid = (param)=>{\n    let { application, onPaymentUpdated } = param;\n    _s1();\n    const [payments, setPayments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const fetchPayments = async ()=>{\n            if (!application?.id) return;\n            setLoading(true);\n            try {\n                const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n                const { data, error } = await supabase.from(\"application_payments\").select(\"month_number, payment_status, payment_date, updated_at\").eq(\"application_id\", application.id).order(\"month_number\");\n                if (error) {\n                    console.error(\"Error fetching payments:\", error);\n                    // Don't show error toast for permission issues\n                    if (!error.message.includes(\"permission\") && !error.message.includes(\"must be owner\")) {\n                        sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Failed to load payment history\");\n                    }\n                // Continue without data - we'll fallback to application month fields\n                } else {\n                    setPayments(data || []);\n                }\n            } catch (error) {\n                console.error(\"Error fetching payments:\", error);\n            // Don't show error toast to avoid overwhelming the user\n            } finally{\n                setLoading(false);\n            }\n        };\n        fetchPayments();\n    }, [\n        application?.id\n    ]);\n    // Custom refresh function for when payments are updated\n    const refreshPayments = ()=>{\n        if (onPaymentUpdated) {\n            onPaymentUpdated();\n        }\n    };\n    // Create an array of 12 months\n    const months = Array.from({\n        length: 12\n    }, (_, i)=>i + 1);\n    // Get payment status for a specific month\n    const getMonthStatus = (month)=>{\n        // First try to get from payments data\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment) {\n            return payment.payment_status;\n        }\n        // Auto-set first month as paid if application status contains \"Paid\" or \"paid_status\" is \"Paid\"\n        if (month === 1 && (application.status?.includes(\"Paid\") || application.paid_status === \"Paid\" || application.status === \"Live\" || application.status === \"Approved\")) {\n            console.log(`Auto-marking month 1 as PAID for application with status=${application.status}, paid_status=${application.paid_status}`);\n            return \"PAID\";\n        }\n        // Fallback to month_X fields for backward compatibility\n        const monthKey = `month_${month}`;\n        return application[monthKey] || null;\n    };\n    // Get payment date for a specific month\n    const getPaymentDate = (month)=>{\n        // First check from payments data\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment && payment.payment_date) {\n            return payment.payment_date;\n        }\n        // For first month, use effective_policy_date if it exists and month is paid\n        if (month === 1 && getMonthStatus(month) === \"PAID\" && application.effective_policy_date) {\n            return application.effective_policy_date;\n        }\n        return null;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Auto-update first payment if status is \"Paid & Issued\" or paid_status is \"Paid\"\n        const autoUpdateFirstPayment = async ()=>{\n            if (!application?.id) return;\n            // Check if status qualifies for auto-marking first payment\n            const shouldAutoMarkFirstPayment = (application.status?.includes(\"Paid\") || application.paid_status === \"Paid\" || application.status === \"Live\" || application.status === \"Approved\") && !payments.some((p)=>p.month_number === 1 && p.payment_status === \"PAID\");\n            if (shouldAutoMarkFirstPayment) {\n                try {\n                    console.log(`Auto-updating first payment record for application ${application.id}`);\n                    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n                    // First check if the RPC function exists\n                    const { data: rpcCheck, error: rpcCheckError } = await supabase.rpc(\"update_payment_and_policy_health\", {\n                        p_application_id: application.id,\n                        p_month_number: 1,\n                        p_payment_status: \"PAID\",\n                        p_payment_date: application.effective_policy_date || new Date().toISOString()\n                    }, {\n                        count: \"exact\"\n                    });\n                    if (rpcCheckError) {\n                        console.error(\"Error checking RPC function:\", rpcCheckError);\n                        // Fallback to direct insert if RPC is not available\n                        console.log(\"Falling back to direct insert into application_payments\");\n                        // Check if payment record exists\n                        const { data: existingPayments } = await supabase.from(\"application_payments\").select(\"id\").eq(\"application_id\", application.id).eq(\"month_number\", 1);\n                        if (!existingPayments || existingPayments.length === 0) {\n                            // Insert new payment record\n                            await supabase.from(\"application_payments\").insert({\n                                application_id: application.id,\n                                month_number: 1,\n                                payment_status: \"PAID\",\n                                payment_date: application.effective_policy_date || new Date().toISOString()\n                            });\n                        } else {\n                            // Update existing payment record\n                            await supabase.from(\"application_payments\").update({\n                                payment_status: \"PAID\",\n                                payment_date: application.effective_policy_date || new Date().toISOString(),\n                                updated_at: new Date().toISOString()\n                            }).eq(\"application_id\", application.id).eq(\"month_number\", 1);\n                        }\n                    }\n                    // Also update legacy month_1 field directly\n                    await supabase.from(\"agent_applications\").update({\n                        month_1: \"PAID\"\n                    }).eq(\"id\", application.id);\n                    refreshPayments();\n                    console.log(\"First payment auto-updated successfully\");\n                } catch (error) {\n                    console.error(\"Error auto-updating first payment:\", error);\n                }\n            }\n        };\n        autoUpdateFirstPayment();\n    }, [\n        application?.id,\n        application?.status,\n        application?.paid_status,\n        payments\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"payment-history-container\",\n        children: loading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Loading payment history...\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 613,\n            columnNumber: 9\n        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: months.map((month)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PaymentIndicator, {\n                    status: getMonthStatus(month),\n                    monthNumber: month,\n                    applicationId: application.id,\n                    paymentDate: getPaymentDate(month),\n                    onPaymentUpdated: refreshPayments\n                }, month, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 617,\n                    columnNumber: 13\n                }, undefined))\n        }, void 0, false)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 611,\n        columnNumber: 5\n    }, undefined);\n};\n_s1(PaymentGrid, \"XznPJkF/FJRogWEef9Xsl0ix/TA=\");\n_c1 = PaymentGrid;\n// Payment Update Modal Component\nconst PaymentUpdateModal = (param)=>{\n    let { applicationId, monthNumber, currentStatus, currentPaymentDate, onClose } = param;\n    _s2();\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(currentStatus || \"\");\n    const [paymentDate, setPaymentDate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(currentPaymentDate || \"\");\n    const [isSaving, setIsSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n    const handleSave = async ()=>{\n        if (!status) {\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Please select a payment status\");\n            return;\n        }\n        setIsSaving(true);\n        try {\n            // Check if payment record exists\n            const { data: existingPayments, error: fetchError } = await supabase.from(\"application_payments\").select(\"*\").eq(\"application_id\", applicationId).eq(\"month_number\", monthNumber);\n            if (fetchError) throw fetchError;\n            // If record exists, update it, otherwise insert new record\n            if (existingPayments && existingPayments.length > 0) {\n                const { error } = await supabase.from(\"application_payments\").update({\n                    payment_status: status,\n                    payment_date: status === \"PAID\" ? paymentDate || null : null,\n                    updated_at: new Date().toISOString()\n                }).eq(\"application_id\", applicationId).eq(\"month_number\", monthNumber);\n                if (error) throw error;\n            } else {\n                const { error } = await supabase.from(\"application_payments\").insert({\n                    application_id: applicationId,\n                    month_number: monthNumber,\n                    payment_status: status,\n                    payment_date: status === \"PAID\" ? paymentDate || null : null\n                });\n                if (error) throw error;\n            }\n            // Update policy health\n            await updatePolicyHealth(applicationId);\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.success(\"Payment status updated\");\n            onClose();\n        } catch (error) {\n            console.error(\"Error saving payment status:\", error);\n            sonner__WEBPACK_IMPORTED_MODULE_5__.toast.error(\"Error saving payment status\");\n        } finally{\n            setIsSaving(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"payment-update-modal\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"payment-modal-content\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"payment-modal-header\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            children: [\n                                \"Update Payment Status - Month \",\n                                monthNumber\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 712,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"close-modal\",\n                            onClick: onClose,\n                            children: \"\\xd7\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 713,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 711,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"payment-modal-body\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"form-group\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"payment-status\",\n                                    children: \"Payment Status\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 717,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                    id: \"payment-status\",\n                                    className: \"payment-status-select\",\n                                    value: status,\n                                    onChange: (e)=>setStatus(e.target.value),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"\",\n                                            children: \"Select Status\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 724,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"PAID\",\n                                            children: \"Paid\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 725,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"MISSED\",\n                                            children: \"Missed\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 726,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"PENDING\",\n                                            children: \"Pending\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 727,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"NSF\",\n                                            children: \"NSF (Insufficient Funds)\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 728,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: \"WAIVED\",\n                                            children: \"Waived\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                            lineNumber: 729,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 718,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 716,\n                            columnNumber: 11\n                        }, undefined),\n                        status === \"PAID\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"form-group\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"payment-date\",\n                                    children: \"Payment Date\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 734,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"date\",\n                                    id: \"payment-date\",\n                                    className: \"payment-date-input\",\n                                    value: paymentDate || \"\",\n                                    onChange: (e)=>setPaymentDate(e.target.value)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                                    lineNumber: 735,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 733,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 715,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"payment-modal-footer\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"cancel-btn\",\n                            onClick: onClose,\n                            disabled: isSaving,\n                            children: \"Cancel\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 746,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"save-btn\",\n                            onClick: handleSave,\n                            disabled: isSaving,\n                            children: isSaving ? \"Saving...\" : \"Save Changes\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                            lineNumber: 747,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 745,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 710,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 709,\n        columnNumber: 5\n    }, undefined);\n};\n_s2(PaymentUpdateModal, \"d3JZo53ISmzkg7u2ZDUPcAL95X4=\");\n_c2 = PaymentUpdateModal;\n// Function to update policy health based on payment statuses\nasync function updatePolicyHealth(applicationId) {\n    const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n    try {\n        // Get all payments for this application\n        const { data: payments, error: fetchError } = await supabase.from(\"application_payments\").select(\"*\").eq(\"application_id\", applicationId);\n        if (fetchError) throw fetchError;\n        // Get application details\n        const { data: applications, error: appError } = await supabase.from(\"agent_applications\").select(\"status, paid_status\").eq(\"id\", applicationId);\n        if (appError) throw appError;\n        if (!applications || applications.length === 0) return;\n        const app = applications[0];\n        // Check if policy is already cancelled\n        if (app.status?.includes(\"Cancelled\") || app.status === \"Declined\") {\n            return; // Don't change cancelled policies\n        }\n        // Count missed payments\n        const missedPayments = payments?.filter((p)=>p.payment_status === \"MISSED\" || p.payment_status === \"NSF\").length || 0;\n        // Determine new policy health\n        let newPolicyHealth;\n        if (missedPayments >= 2) {\n            newPolicyHealth = \"Payment Issues\";\n        } else if (app.status === \"Approved\" && app.paid_status === \"Paid\") {\n            newPolicyHealth = \"Active\";\n        } else if (app.status === \"Approved\" && app.paid_status === \"Unpaid\") {\n            newPolicyHealth = \"Pending First Payment\";\n        } else {\n            // Keep existing policy health\n            return;\n        }\n        // Update policy health\n        const { error: updateError } = await supabase.from(\"agent_applications\").update({\n            policy_health: newPolicyHealth\n        }).eq(\"id\", applicationId);\n        if (updateError) throw updateError;\n    } catch (error) {\n        console.error(\"Error updating policy health:\", error);\n        throw error;\n    }\n}\n// Payment status legend component\nconst PaymentLegend = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-paid\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 821,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Paid\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 822,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 820,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-missed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 825,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Missed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 826,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 824,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-pending\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 829,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Pending\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 830,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 828,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-nsf\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 833,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"NSF\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 834,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 832,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-waived\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 837,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Waived\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 838,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 836,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"payment-indicator payment-empty\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 841,\n                        columnNumber: 7\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Not Due\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 842,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 840,\n                columnNumber: 5\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 819,\n        columnNumber: 3\n    }, undefined);\n_c3 = PaymentLegend;\n// NEW: Create a wrapper component for the payment history grid\nconst SafePaymentHistoryGrid = (param)=>{\n    let { applicationId } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ErrorBoundary__WEBPACK_IMPORTED_MODULE_9__.ErrorBoundary, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PaymentHistoryGrid, {\n            applicationId: applicationId\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 851,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 850,\n        columnNumber: 5\n    }, undefined);\n};\n_c4 = SafePaymentHistoryGrid;\n// NEW: Payment history grid component for the applications table\nconst PaymentHistoryGrid = (param)=>{\n    let { applicationId } = param;\n    _s3();\n    const [payments, setPayments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [application, setApplication] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [shouldShowPayments, setShouldShowPayments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [nextPaymentDates, setNextPaymentDates] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    // Use a stable key for rendering indicators\n    const stableKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(`payment-grid-${applicationId}`).current;\n    // Memoize the fetch functions to use in dependencies\n    const fetchApplicationDetails = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        if (!applicationId || !isMounted.current) return;\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n            const { data, error } = await supabase.from(\"agent_applications\").select(\"effective_policy_date, status, paid_status, month_1\").eq(\"id\", applicationId).single();\n            if (error) {\n                console.error(\"Error fetching application details:\", error);\n                return;\n            }\n            if (data && isMounted.current) {\n                // Check if paid_status changed and needs to be reflected in UI\n                const paidStatusChanged = application?.paid_status !== data.paid_status;\n                setApplication(data);\n                // MUCH STRICTER check - Only show payment history for applications explicitly marked as paid\n                const isIssuedAndPaid = data.paid_status === \"Paid\" && data.effective_policy_date !== null;\n                setShouldShowPayments(isIssuedAndPaid);\n                // If paid_status changed, refresh payment data\n                if (paidStatusChanged) {\n                    console.log(\"Paid status changed, refreshing payment data...\");\n                    fetchPayments();\n                }\n            }\n        } catch (error) {\n            console.error(\"Error in fetchApplicationDetails:\", error);\n        }\n    }, [\n        applicationId,\n        application?.paid_status\n    ]);\n    const fetchPayments = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        if (!applicationId || !isMounted.current) return;\n        setLoading(true);\n        try {\n            const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_2__.createClient)();\n            const { data, error } = await supabase.from(\"application_payments\").select(\"month_number, payment_status, payment_date, updated_at\").eq(\"application_id\", applicationId).order(\"month_number\");\n            if (error) {\n                // Still log the error but don't show to user\n                console.error(\"Error fetching payments:\", error);\n            } else if (data && isMounted.current) {\n                setPayments(data);\n                // Extract and track next payment dates\n                const paymentDates = {};\n                data.forEach((payment)=>{\n                    if (payment.payment_date) {\n                        paymentDates[payment.month_number] = payment.payment_date;\n                    }\n                });\n                setNextPaymentDates(paymentDates);\n            }\n        } catch (error) {\n            console.error(\"Error in payment history:\", error);\n        } finally{\n            if (isMounted.current) {\n                setLoading(false);\n            }\n        }\n    }, [\n        applicationId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Set isMounted ref to true when component mounts\n        isMounted.current = true;\n        // Only fetch if we have an application ID\n        if (applicationId) {\n            fetchApplicationDetails();\n            fetchPayments();\n        }\n        // Clean up function that runs when component unmounts\n        return ()=>{\n            // Mark component as unmounted to prevent state updates\n            isMounted.current = false;\n        };\n    }, [\n        applicationId,\n        fetchApplicationDetails,\n        fetchPayments\n    ]);\n    // Set up a polling mechanism to check for payment status changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!applicationId || !shouldShowPayments) return;\n        // Poll for changes every 5 seconds to catch updates from other users\n        const pollInterval = setInterval(()=>{\n            if (isMounted.current) {\n                fetchApplicationDetails();\n            }\n        }, 5000);\n        return ()=>{\n            clearInterval(pollInterval);\n        };\n    }, [\n        applicationId,\n        shouldShowPayments,\n        fetchApplicationDetails\n    ]);\n    const getMonthStatus = (month)=>{\n        // First check payment record\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment?.payment_status) {\n            return payment.payment_status;\n        }\n        // For first month, ONLY show as PAID if it's explicitly set that way\n        if (month === 1 && application) {\n            // Only trust the explicit month_1 field or payments table records\n            // Do not automatically assume paid based on status\n            if (application.month_1 === \"PAID\") {\n                return \"PAID\";\n            }\n        }\n        return null;\n    };\n    const getPaymentDate = (month)=>{\n        // First check from payments data\n        const payment = payments.find((p)=>p.month_number === month);\n        if (payment?.payment_date) {\n            return payment.payment_date;\n        }\n        // For first month with effective policy date\n        if (month === 1 && application?.effective_policy_date && getMonthStatus(1) === \"PAID\") {\n            return application.effective_policy_date;\n        }\n        // Check if this is a consecutive month that should be scheduled\n        if (month > 1 && nextPaymentDates[month]) {\n            return nextPaymentDates[month];\n        }\n        return null;\n    };\n    const getTooltipText = (month)=>{\n        const status = getMonthStatus(month);\n        const date = getPaymentDate(month);\n        if (!status) {\n            return `Month ${month}: Not yet due`;\n        }\n        if (date) {\n            const formattedDate = new Date(date).toLocaleDateString();\n            return `Month ${month}: ${status} (${formattedDate})`;\n        }\n        return `Month ${month}: ${status}`;\n    };\n    const handlePaymentUpdated = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (isMounted.current) {\n            fetchPayments();\n            fetchApplicationDetails();\n        }\n    }, [\n        fetchPayments,\n        fetchApplicationDetails\n    ]);\n    // Create indicators for months 1-12 with careful key management\n    const renderPaymentIndicators = ()=>{\n        const months = Array.from({\n            length: 12\n        }, (_, i)=>i + 1);\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex gap-1 items-center\",\n            children: months.map((month)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PaymentIndicator, {\n                    status: getMonthStatus(month),\n                    monthNumber: month,\n                    applicationId: applicationId,\n                    paymentDate: getPaymentDate(month),\n                    onPaymentUpdated: handlePaymentUpdated\n                }, `${stableKey}-month-${month}`, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 1048,\n                    columnNumber: 11\n                }, undefined))\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 1046,\n            columnNumber: 7\n        }, undefined);\n    };\n    // Show nothing if the application isn't issued and paid\n    if (!shouldShowPayments) {\n        if (application?.effective_policy_date && application?.paid_status !== \"Paid\") {\n            // Show a placeholder with explanation for applications with effective date but not paid\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"payment-history-container flex items-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-xs text-gray-500\",\n                    children: \"Payment tracking begins after first payment\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                    lineNumber: 1067,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1066,\n                columnNumber: 9\n            }, undefined);\n        }\n        // Otherwise show nothing\n        return null;\n    }\n    // Create a simpler display if loading is taking too long\n    if (loading && payments.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"payment-history-container flex items-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-xs text-gray-500\",\n                children: \"Loading...\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1079,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 1078,\n            columnNumber: 7\n        }, undefined);\n    }\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"payment-history-container\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-xs text-red-500\",\n                children: error\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1087,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n            lineNumber: 1086,\n            columnNumber: 7\n        }, undefined);\n    }\n    // Render the actual component\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"payment-history-container\",\n        children: renderPaymentIndicators()\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 1094,\n        columnNumber: 5\n    }, undefined);\n};\n_s3(PaymentHistoryGrid, \"aw3varlOvbFIlsWZ+1BxIxgQEr8=\");\n_c5 = PaymentHistoryGrid;\n// Payment history legend component\nconst PaymentHistoryLegend = ()=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center gap-3 text-xs text-gray-600 mt-2 mb-4\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"font-medium\",\n                children: \"Payment Legend:\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1104,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#137333] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1106,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Paid\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1107,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1105,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#1a73e8] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1110,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Pending\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1111,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1109,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#c5221f] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1114,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Missed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1115,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1113,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#ea8600] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1118,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"NSF\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1119,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1117,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full bg-[#80868b] mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1122,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Waived\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1123,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1121,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 rounded-full border border-gray-300 mr-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1126,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Not Set\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                        lineNumber: 1127,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n                lineNumber: 1125,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Ronel\\\\Downloads\\\\Legacycore\\\\legacy-core\\\\src\\\\app\\\\agent\\\\applications\\\\components\\\\PaymentComponents.tsx\",\n        lineNumber: 1103,\n        columnNumber: 5\n    }, undefined);\n};\n_c6 = PaymentHistoryLegend;\nvar _c, _c1, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"PaymentIndicator\");\n$RefreshReg$(_c1, \"PaymentGrid\");\n$RefreshReg$(_c2, \"PaymentUpdateModal\");\n$RefreshReg$(_c3, \"PaymentLegend\");\n$RefreshReg$(_c4, \"SafePaymentHistoryGrid\");\n$RefreshReg$(_c5, \"PaymentHistoryGrid\");\n$RefreshReg$(_c6, \"PaymentHistoryLegend\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYWdlbnQvYXBwbGljYXRpb25zL2NvbXBvbmVudHMvUGF5bWVudENvbXBvbmVudHMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFZ0U7QUFFWjtBQUNxQztBQUNqRDtBQUNWO0FBQ21EO0FBQ2xDO0FBQ0k7QUFDbEI7QUFDVTtBQUNJO0FBVS9DLGtFQUFrRTtBQUMzRCxNQUFNZSxtQkFBbUI7UUFBQyxFQUMvQkMsTUFBTSxFQUNOQyxXQUFXLEVBQ1hDLGFBQWEsRUFDYkMsV0FBVyxFQUNYQyxnQkFBZ0IsRUFPakI7O0lBQ0MsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUd0QiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUN1QixpQkFBaUJDLG1CQUFtQixHQUFHeEIsK0NBQVFBLENBQUM7SUFDdkQsTUFBTSxDQUFDeUIsY0FBY0MsZ0JBQWdCLEdBQUcxQiwrQ0FBUUEsQ0FDOUNtQixjQUFjLElBQUlRLEtBQUtSLGVBQWVTO0lBRXhDLE1BQU1DLFlBQVkzQiw2Q0FBTUEsQ0FBQztJQUV6QixrQ0FBa0M7SUFDbENELGdEQUFTQSxDQUFDO1FBQ1I0QixVQUFVQyxPQUFPLEdBQUc7UUFFcEIsT0FBTztZQUNMRCxVQUFVQyxPQUFPLEdBQUc7UUFDdEI7SUFDRixHQUFHLEVBQUU7SUFFTCxvRUFBb0U7SUFDcEUsTUFBTUMsc0JBQXNCO1FBQzFCLE1BQU1DLFlBQVkzQiw0RUFBd0JBLENBQUNXO1FBQzNDLE1BQU1pQixrQkFBa0JoQixnQkFBZ0IsSUFBSSxpQkFBaUI7UUFDN0QseUNBQXlDO1FBQ3pDLE1BQU1pQixPQUFPO1FBQ2IsT0FBTyxDQUFDLGtCQUFrQixFQUFFRixVQUFVLENBQUMsRUFBRUMsZ0JBQWdCLENBQUMsRUFBRUMsS0FBSyxDQUFDLEVBQUViLGFBQWEsa0JBQWtCLEdBQUcsQ0FBQztJQUN6RztJQUVBLE1BQU1jLGlCQUFpQko7SUFDdkIscUVBQXFFO0lBQ3JFLE1B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RUFBRTtJQWpQV25CO01BQUFBO0FBbVBiLG1DQUFtQztBQUM1QixNQUFNb0IsdUJBQXVCO0lBQ2xDLHFCQUNFLDhEQUFDL0c7UUFBSUMsV0FBVTs7MEJBQ2IsOERBQUNVO2dCQUFLVixXQUFVOzBCQUFjOzs7Ozs7MEJBQzlCLDhEQUFDRDtnQkFBSUMsV0FBVTs7a0NBQ2IsOERBQUNEO3dCQUFJQyxXQUFVOzs7Ozs7a0NBQ2YsOERBQUNVO2tDQUFLOzs7Ozs7Ozs7Ozs7MEJBRVIsOERBQUNYO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0Q7d0JBQUlDLFdBQVU7Ozs7OztrQ0FDZiw4REFBQ1U7a0NBQUs7Ozs7Ozs7Ozs7OzswQkFFUiw4REFBQ1g7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDRDt3QkFBSUMsV0FBVTs7Ozs7O2tDQUNmLDhEQUFDVTtrQ0FBSzs7Ozs7Ozs7Ozs7OzBCQUVSLDhEQUFDWDtnQkFBSUMsV0FBVTs7a0NBQ2IsOERBQUNEO3dCQUFJQyxXQUFVOzs7Ozs7a0NBQ2YsOERBQUNVO2tDQUFLOzs7Ozs7Ozs7Ozs7MEJBRVIsOERBQUNYO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0Q7d0JBQUlDLFdBQVU7Ozs7OztrQ0FDZiw4REFBQ1U7a0NBQUs7Ozs7Ozs7Ozs7OzswQkFFUiw4REFBQ1g7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDRDt3QkFBSUMsV0FBVTs7Ozs7O2tDQUNmLDhEQUFDVTtrQ0FBSzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSWQsRUFBRTtNQTlCV29HIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvYWdlbnQvYXBwbGljYXRpb25zL2NvbXBvbmVudHMvUGF5bWVudENvbXBvbmVudHMudHN4P2Q0ODkiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IEFnZW50QXBwbGljYXRpb24sIFBheW1lbnRTdGF0dXMgfSBmcm9tICdAL3R5cGVzL2FwcGxpY2F0aW9uJ1xyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9jbGllbnQnXHJcbmltcG9ydCB7IGdldFBheW1lbnRJbmRpY2F0b3JDbGFzcywgZ2V0UGF5bWVudEluZGljYXRvclRpdGxlIH0gZnJvbSAnLi4vdXRpbHMvc3RhdHVzVXRpbHMnXHJcbmltcG9ydCAnLi4vY29tcG9uZW50cy9zdGF0dXMtc3R5bGVzLmNzcydcclxuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdzb25uZXInXHJcbmltcG9ydCB7IFBvcG92ZXIsIFBvcG92ZXJDb250ZW50LCBQb3BvdmVyVHJpZ2dlciB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9wb3BvdmVyJ1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJ1xyXG5pbXBvcnQgeyBDYWxlbmRhciB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYWxlbmRhcidcclxuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnXHJcbmltcG9ydCB7IENhbGVuZGFySWNvbiB9IGZyb20gJ2x1Y2lkZS1yZWFjdCdcclxuaW1wb3J0IHsgRXJyb3JCb3VuZGFyeSB9IGZyb20gJy4vRXJyb3JCb3VuZGFyeSdcclxuXHJcbi8vIERlZmluZSB0aGUgdHlwZSBmb3IgcGF5bWVudCBkYXRhIGZyb20gZGF0YWJhc2VcclxuaW50ZXJmYWNlIFBheW1lbnREYXRhIHtcclxuICBtb250aF9udW1iZXI6IG51bWJlclxyXG4gIHBheW1lbnRfc3RhdHVzOiBQYXltZW50U3RhdHVzIHwgbnVsbFxyXG4gIHBheW1lbnRfZGF0ZTogc3RyaW5nIHwgbnVsbFxyXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZyB8IG51bGxcclxufVxyXG5cclxuLy8gU2luZ2xlIHBheW1lbnQgaW5kaWNhdG9yIGNvbXBvbmVudCB3aXRoIGltcHJvdmVkIGVycm9yIGhhbmRsaW5nXHJcbmV4cG9ydCBjb25zdCBQYXltZW50SW5kaWNhdG9yID0gKHsgXHJcbiAgc3RhdHVzLCBcclxuICBtb250aE51bWJlciwgXHJcbiAgYXBwbGljYXRpb25JZCxcclxuICBwYXltZW50RGF0ZSxcclxuICBvblBheW1lbnRVcGRhdGVkXHJcbn06IHsgXHJcbiAgc3RhdHVzOiBQYXltZW50U3RhdHVzIHwgbnVsbCwgXHJcbiAgbW9udGhOdW1iZXI6IG51bWJlciwgXHJcbiAgYXBwbGljYXRpb25JZDogc3RyaW5nLFxyXG4gIHBheW1lbnREYXRlPzogc3RyaW5nIHwgbnVsbCxcclxuICBvblBheW1lbnRVcGRhdGVkPzogKCkgPT4gdm9pZFxyXG59KSA9PiB7XHJcbiAgY29uc3QgW2lzVXBkYXRpbmcsIHNldElzVXBkYXRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtzaG93UGF5bWVudE1lbnUsIHNldFNob3dQYXltZW50TWVudV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3NlbGVjdGVkRGF0ZSwgc2V0U2VsZWN0ZWREYXRlXSA9IHVzZVN0YXRlPERhdGUgfCB1bmRlZmluZWQ+KFxyXG4gICAgcGF5bWVudERhdGUgPyBuZXcgRGF0ZShwYXltZW50RGF0ZSkgOiB1bmRlZmluZWRcclxuICApO1xyXG4gIGNvbnN0IGlzTW91bnRlZCA9IHVzZVJlZih0cnVlKTtcclxuICBcclxuICAvLyBDbGVhciBzdGF0ZSBhbmQgcmVmcyBvbiB1bm1vdW50XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlzTW91bnRlZC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaXNNb3VudGVkLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG4gIFxyXG4gIC8vIFVzZSBsYXJnZXIgc2l6ZXMgYW5kIG1vcmUgdmlzaWJsZSBzdHlsZXMgZm9yIGltcG9ydGFudCBpbmRpY2F0b3JzXHJcbiAgY29uc3QgZ2V0SW5kaWNhdG9yQ2xhc3NlcyA9ICgpID0+IHtcclxuICAgIGNvbnN0IGJhc2VDbGFzcyA9IGdldFBheW1lbnRJbmRpY2F0b3JDbGFzcyhzdGF0dXMpO1xyXG4gICAgY29uc3QgZmlyc3RNb250aENsYXNzID0gbW9udGhOdW1iZXIgPT09IDEgPyAnZmlyc3QtbW9udGggJyA6ICcnO1xyXG4gICAgLy8gTWFrZSBhbGwgaW5kaWNhdG9ycyBjb25zaXN0ZW50bHkgc21hbGxcclxuICAgIGNvbnN0IHNpemUgPSAndy0zIGgtMyc7XHJcbiAgICByZXR1cm4gYHBheW1lbnQtaW5kaWNhdG9yICR7YmFzZUNsYXNzfSAke2ZpcnN0TW9udGhDbGFzc30gJHtzaXplfSAke2lzVXBkYXRpbmcgPyAnYW5pbWF0ZS1wdWxzZScgOiAnJ31gO1xyXG4gIH07XHJcbiAgXHJcbiAgY29uc3QgaW5kaWNhdG9yQ2xhc3MgPSBnZXRJbmRpY2F0b3JDbGFzc2VzKCk7XHJcbiAgLy8gRW5zdXJlIGFsbCBpbmRpY2F0b3JzIGhhdmUgYSBtZWFuaW5nZnVsIHRvb2x0aXAgd2l0aCBwYXltZW50IGRhdGVzXHJcbiAgY29uc3QgdG9vbHRpcFRpdGxlID0gIXN0YXR1cyBcclxuICAgID8gYE1vbnRoICR7bW9udGhOdW1iZXJ9OiBDbGljayB0byBzZXQgcGF5bWVudCBzdGF0dXNgXHJcbiAgICA6IHBheW1lbnREYXRlIFxyXG4gICAgICA/IGBNb250aCAke21vbnRoTnVtYmVyfTogJHtzdGF0dXN9ICgke25ldyBEYXRlKHBheW1lbnREYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKX0pYFxyXG4gICAgICA6IGBNb250aCAke21vbnRoTnVtYmVyfTogJHtzdGF0dXN9YDtcclxuICBcclxuICAvLyBDaGVjayBpZiB0aGlzIGlzIHRoZSBmaXJzdCBwYXltZW50IGFuZCBpdCBzaG91bGQgYmUgbWFya2VkIGFzIHBhaWRcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IGlzQWN0aXZlID0gdHJ1ZTsgLy8gVHJhY2sgd2hldGhlciB0aGlzIGVmZmVjdCBzaG91bGQgc3RpbGwgdXBkYXRlIHN0YXRlXHJcbiAgICBcclxuICAgIGNvbnN0IGNoZWNrRmlyc3RQYXltZW50ID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAobW9udGhOdW1iZXIgPT09IDEgJiYgIXN0YXR1cykge1xyXG4gICAgICAgIC8vIEZldGNoIHRoZSBhcHBsaWNhdGlvbiBkZXRhaWxzXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XHJcbiAgICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAuZnJvbSgnYWdlbnRfYXBwbGljYXRpb25zJylcclxuICAgICAgICAgICAgLnNlbGVjdCgnc3RhdHVzLCBwYWlkX3N0YXR1cywgZWZmZWN0aXZlX3BvbGljeV9kYXRlJylcclxuICAgICAgICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpXHJcbiAgICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBPbmx5IHByb2NlZWQgaWYgY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWQgYW5kIGVmZmVjdCBpcyBzdGlsbCBhY3RpdmVcclxuICAgICAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCAmJiBpc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICAvLyBNVUNIIHN0cmljdGVyIGNoZWNrIC0gb25seSBtYXJrIGFzIHBhaWQgaWYgZXhwbGljaXRseSBwYWlkX3N0YXR1cz0nUGFpZCdcclxuICAgICAgICAgICAgaWYgKGRhdGEgJiYgXHJcbiAgICAgICAgICAgICAgICBkYXRhLnBhaWRfc3RhdHVzID09PSAnUGFpZCcgJiYgXHJcbiAgICAgICAgICAgICAgICBkYXRhLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIG1hcmtlZCBhcyBwYWlkLCBzbyB1cGRhdGUgaXRcclxuICAgICAgICAgICAgICB1cGRhdGVQYXltZW50U3RhdHVzKCdQQUlEJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGZpcnN0IHBheW1lbnQgc3RhdHVzOicsIGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIG1hcmsgYXMgcGFpZFxyXG4gICAgY2hlY2tGaXJzdFBheW1lbnQoKTtcclxuICAgIFxyXG4gICAgLy8gQ2xlYW51cCBmdW5jdGlvblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaXNBY3RpdmUgPSBmYWxzZTsgLy8gTWFyayBlZmZlY3QgYXMgaW5hY3RpdmUgd2hlbiB1bm1vdW50ZWRcclxuICAgIH07XHJcbiAgfSwgW21vbnRoTnVtYmVyLCBzdGF0dXMsIGFwcGxpY2F0aW9uSWRdKTtcclxuICBcclxuICBjb25zdCB1cGRhdGVQYXltZW50U3RhdHVzID0gYXN5bmMgKG5ld1N0YXR1czogUGF5bWVudFN0YXR1cywgZGF0ZT86IERhdGUgfCBudWxsKSA9PiB7XHJcbiAgICBpZiAoIWlzTW91bnRlZC5jdXJyZW50KSByZXR1cm47IC8vIERvbid0IHByb2NlZWQgaWYgdW5tb3VudGVkXHJcbiAgICBcclxuICAgIHNldElzVXBkYXRpbmcodHJ1ZSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xyXG4gICAgICBcclxuICAgICAgLy8gVXNlIHRoZSBwYXltZW50IGRhdGUgbG9naWNcclxuICAgICAgY29uc3QgcGF5bWVudERhdGUgPSBkYXRlIHx8IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChuZXdTdGF0dXMgPT09ICdQQUlEJyA/IG5ldyBEYXRlKCkgOiBudWxsKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCBjdXJyZW50IGFwcGxpY2F0aW9uIHN0YXRlIGZpcnN0IHRvIGVuc3VyZSB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIGxhdGVzdCBkYXRhXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogYXBwRGF0YSwgZXJyb3I6IGFwcEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdhZ2VudF9hcHBsaWNhdGlvbnMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ2VmZmVjdGl2ZV9wb2xpY3lfZGF0ZSwgc3RhdHVzLCBwYWlkX3N0YXR1cywgbW9udGhfMScpXHJcbiAgICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICBpZiAoYXBwRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGFwcGxpY2F0aW9uIGRhdGE6JywgYXBwRXJyb3IpO1xyXG4gICAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgICAgdG9hc3QuZXJyb3IoJ0Vycm9yIHJldHJpZXZpbmcgYXBwbGljYXRpb24gZGF0YScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFN5bmNocm9uaXplIHRoZSBwYWlkX3N0YXR1cyBmb3IgTW9udGggMSBjaGFuZ2VzXHJcbiAgICAgIGxldCBzaG91bGRVcGRhdGVQYWlkU3RhdHVzID0gZmFsc2U7XHJcbiAgICAgIGxldCBuZXdQYWlkU3RhdHVzOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICAgICAgXHJcbiAgICAgIGlmIChtb250aE51bWJlciA9PT0gMSkge1xyXG4gICAgICAgIGlmIChuZXdTdGF0dXMgPT09ICdQQUlEJykge1xyXG4gICAgICAgICAgLy8gSWYgZmlyc3QgbW9udGggaXMgYmVpbmcgbWFya2VkIGFzIFBBSUQsIHVwZGF0ZSBwYWlkX3N0YXR1cyB0byBcIlBhaWRcIlxyXG4gICAgICAgICAgc2hvdWxkVXBkYXRlUGFpZFN0YXR1cyA9IHRydWU7XHJcbiAgICAgICAgICBuZXdQYWlkU3RhdHVzID0gJ1BhaWQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobmV3U3RhdHVzID09PSBudWxsIHx8IG5ld1N0YXR1cyA9PT0gJ01JU1NFRCcgfHwgbmV3U3RhdHVzID09PSAnTlNGJykge1xyXG4gICAgICAgICAgLy8gSWYgZmlyc3QgbW9udGggaXMgYmVpbmcgbWFya2VkIGFzIHVucGFpZC9taXNzZWQsIHVwZGF0ZSBwYWlkX3N0YXR1cyB0byBcIlVucGFpZFwiXHJcbiAgICAgICAgICBzaG91bGRVcGRhdGVQYWlkU3RhdHVzID0gdHJ1ZTtcclxuICAgICAgICAgIG5ld1BhaWRTdGF0dXMgPSAnVW5wYWlkJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFVzZSBvdXIgdHJhY2tfcGF5bWVudCBSUEMgZnVuY3Rpb24gd2l0aCB0aGUgc3luY2hyb25pemF0aW9uIGluZm9cclxuICAgICAgY29uc3QgeyBkYXRhOiB0cmFja1Jlc3VsdCwgZXJyb3I6IHRyYWNrRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYyhcclxuICAgICAgICAndHJhY2tfcGF5bWVudCcsXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIHBfYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uSWQsXHJcbiAgICAgICAgICBwX21vbnRoX251bWJlcjogbW9udGhOdW1iZXIsXHJcbiAgICAgICAgICBwX3BheW1lbnRfc3RhdHVzOiBuZXdTdGF0dXMsXHJcbiAgICAgICAgICBwX3BheW1lbnRfZGF0ZTogcGF5bWVudERhdGUgPyBwYXltZW50RGF0ZS50b0lTT1N0cmluZygpIDogbnVsbCxcclxuICAgICAgICAgIHBfdXBkYXRlX3BhaWRfc3RhdHVzOiBzaG91bGRVcGRhdGVQYWlkU3RhdHVzLFxyXG4gICAgICAgICAgcF9uZXdfcGFpZF9zdGF0dXM6IG5ld1BhaWRTdGF0dXNcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAodHJhY2tFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1BheW1lbnQgdHJhY2tpbmcgZmFpbGVkOicsIHRyYWNrRXJyb3IpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZhbGwgYmFjayB0byBtYW51YWwgc3luY2hyb25pemF0aW9uXHJcbiAgICAgICAgYXdhaXQgbWFudWFsU3luY1BheW1lbnRTdGF0dXMoc3VwYWJhc2UsIG5ld1N0YXR1cywgcGF5bWVudERhdGUsIHNob3VsZFVwZGF0ZVBhaWRTdGF0dXMsIG5ld1BhaWRTdGF0dXMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0cmFja2luZyB3YXMgc3VjY2Vzc2Z1bFxyXG4gICAgICAgIGlmICh0cmFja1Jlc3VsdCAmJiB0cmFja1Jlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnUGF5bWVudCB0cmFja2luZyBzdWNjZXNzZnVsOicsIHRyYWNrUmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgbmV4dCBwYXltZW50IHNjaGVkdWxlZCwgbG9nIGl0XHJcbiAgICAgICAgICBpZiAodHJhY2tSZXN1bHQubmV4dF9wYXltZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOZXh0IHBheW1lbnQgc2NoZWR1bGVkOicsIHRyYWNrUmVzdWx0Lm5leHRfcGF5bWVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgICAgICB0b2FzdC5zdWNjZXNzKHRyYWNrUmVzdWx0Lm1lc3NhZ2UgfHwgYFBheW1lbnQgZm9yIG1vbnRoICR7bW9udGhOdW1iZXJ9IG1hcmtlZCBhcyAke25ld1N0YXR1cyB8fCAnY2xlYXJlZCd9YCk7XHJcbiAgICAgICAgICAgIGlmIChvblBheW1lbnRVcGRhdGVkKSB7XHJcbiAgICAgICAgICAgICAgb25QYXltZW50VXBkYXRlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIFJQQyBzdWNjZWVkZWQgYnV0IHJldHVybmVkIGFuIGVycm9yIG1lc3NhZ2VcclxuICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gdHJhY2tSZXN1bHQ/Lm1lc3NhZ2UgfHwgJ1BheW1lbnQgdXBkYXRlIGZhaWxlZCc7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdQYXltZW50IHRyYWNraW5nIHJldHVybmVkIGVycm9yOicsIGVycm9yTXNnKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIHRvYXN0LmVycm9yKGVycm9yTXNnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHBheW1lbnQgc3RhdHVzOicsIGVycm9yKTtcclxuICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSB7XHJcbiAgICAgICAgdG9hc3QuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgcGF5bWVudCBzdGF0dXMnKTtcclxuICAgICAgfVxyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSB7XHJcbiAgICAgICAgc2V0SXNVcGRhdGluZyhmYWxzZSk7XHJcbiAgICAgICAgc2V0U2hvd1BheW1lbnRNZW51KGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbiAgXHJcbiAgLy8gTWFudWFsIHN5bmNocm9uaXphdGlvbiB3aGVuIHRoZSBSUEMgZnVuY3Rpb24gZmFpbHNcclxuICBjb25zdCBtYW51YWxTeW5jUGF5bWVudFN0YXR1cyA9IGFzeW5jIChcclxuICAgIHN1cGFiYXNlOiBhbnksIFxyXG4gICAgbmV3U3RhdHVzOiBQYXltZW50U3RhdHVzLCBcclxuICAgIHBheW1lbnREYXRlOiBEYXRlIHwgbnVsbCxcclxuICAgIHNob3VsZFVwZGF0ZVBhaWRTdGF0dXM6IGJvb2xlYW4sXHJcbiAgICBuZXdQYWlkU3RhdHVzOiBzdHJpbmcgfCBudWxsXHJcbiAgKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnUGVyZm9ybWluZyBtYW51YWwgcGF5bWVudCBzeW5jaHJvbml6YXRpb24uLi4nKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVXBkYXRlIGJvdGggdGFibGVzIGZvciBjb25zaXN0ZW5jeVxyXG4gICAgICAvLyAxLiBVcGRhdGUgYWdlbnRfYXBwbGljYXRpb25zIHRhYmxlXHJcbiAgICAgIGNvbnN0IG1vbnRoRmllbGQgPSBgbW9udGhfJHttb250aE51bWJlcn1gO1xyXG4gICAgICBsZXQgdXBkYXRlRmllbGRzOiBhbnkgPSB7IFttb250aEZpZWxkXTogbmV3U3RhdHVzIH07XHJcbiAgICAgIFxyXG4gICAgICAvLyBJZiB3ZSBuZWVkIHRvIHVwZGF0ZSBwYWlkX3N0YXR1cyBhcyB3ZWxsXHJcbiAgICAgIGlmIChzaG91bGRVcGRhdGVQYWlkU3RhdHVzICYmIG5ld1BhaWRTdGF0dXMpIHtcclxuICAgICAgICB1cGRhdGVGaWVsZHMucGFpZF9zdGF0dXMgPSBuZXdQYWlkU3RhdHVzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIElmIG1hcmtpbmcgYXMgcGFpZCwgYWxzbyB1cGRhdGUgcG9saWN5IGhlYWx0aFxyXG4gICAgICAgIGlmIChuZXdQYWlkU3RhdHVzID09PSAnUGFpZCcpIHtcclxuICAgICAgICAgIHVwZGF0ZUZpZWxkcy5wb2xpY3lfaGVhbHRoID0gJ0FjdGl2ZSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXdQYWlkU3RhdHVzID09PSAnVW5wYWlkJykge1xyXG4gICAgICAgICAgdXBkYXRlRmllbGRzLnBvbGljeV9oZWFsdGggPSAnUGVuZGluZyBGaXJzdCBQYXltZW50JztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZXJyb3I6IGFwcEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdhZ2VudF9hcHBsaWNhdGlvbnMnKVxyXG4gICAgICAgIC51cGRhdGUodXBkYXRlRmllbGRzKVxyXG4gICAgICAgIC5lcSgnaWQnLCBhcHBsaWNhdGlvbklkKTtcclxuICAgICAgICBcclxuICAgICAgaWYgKGFwcEVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIGFnZW50X2FwcGxpY2F0aW9uczogJHthcHBFcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyAyLiBVcGRhdGUgYXBwbGljYXRpb25fcGF5bWVudHMgdGFibGVcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB7IGVycm9yOiBwYXltZW50RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgICAgLnVwc2VydCh7XHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbklkLFxyXG4gICAgICAgICAgICBtb250aF9udW1iZXI6IG1vbnRoTnVtYmVyLFxyXG4gICAgICAgICAgICBwYXltZW50X3N0YXR1czogbmV3U3RhdHVzLFxyXG4gICAgICAgICAgICBwYXltZW50X2RhdGU6IHBheW1lbnREYXRlID8gcGF5bWVudERhdGUudG9JU09TdHJpbmcoKSA6IG51bGwsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgfSwgeyBcclxuICAgICAgICAgICAgb25Db25mbGljdDogJ2FwcGxpY2F0aW9uX2lkLG1vbnRoX251bWJlcicgXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIGlmIChwYXltZW50RXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgYXBwbGljYXRpb25fcGF5bWVudHMgKG5vbi1jcml0aWNhbCk6JywgcGF5bWVudEVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKHBheW1lbnRFcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBhcHBsaWNhdGlvbl9wYXltZW50cyAoY29udGludWluZyk6JywgcGF5bWVudEVycik7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIDMuIElmIHRoaXMgd2FzIGEgUEFJRCB1cGRhdGUsIHNjaGVkdWxlIHRoZSBuZXh0IHBheW1lbnRcclxuICAgICAgaWYgKG5ld1N0YXR1cyA9PT0gJ1BBSUQnICYmIG1vbnRoTnVtYmVyIDwgMTIpIHtcclxuICAgICAgICBjb25zdCBuZXh0TW9udGggPSBtb250aE51bWJlciArIDE7XHJcbiAgICAgICAgY29uc3QgbmV4dERhdGUgPSBwYXltZW50RGF0ZSA/IG5ldyBEYXRlKHBheW1lbnREYXRlKSA6IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgbmV4dERhdGUuc2V0RGF0ZShuZXh0RGF0ZS5nZXREYXRlKCkgKyAzMCk7IC8vIEFkZCAzMCBkYXlzXHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIFVwZGF0ZSBuZXh0IG1vbnRoIGluIGFnZW50X2FwcGxpY2F0aW9uc1xyXG4gICAgICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgLmZyb20oJ2FnZW50X2FwcGxpY2F0aW9ucycpXHJcbiAgICAgICAgICAgIC51cGRhdGUoeyBbYG1vbnRoXyR7bmV4dE1vbnRofWBdOiAnUEVORElORycgfSlcclxuICAgICAgICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIC8vIEFkZCBwZW5kaW5nIHBheW1lbnQgZm9yIG5leHQgbW9udGhcclxuICAgICAgICAgIGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgICAgIC51cHNlcnQoe1xyXG4gICAgICAgICAgICAgIGFwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbklkLFxyXG4gICAgICAgICAgICAgIG1vbnRoX251bWJlcjogbmV4dE1vbnRoLFxyXG4gICAgICAgICAgICAgIHBheW1lbnRfc3RhdHVzOiAnUEVORElORycsXHJcbiAgICAgICAgICAgICAgcGF5bWVudF9kYXRlOiBuZXh0RGF0ZS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICB9LCB7IFxyXG4gICAgICAgICAgICAgIG9uQ29uZmxpY3Q6ICdhcHBsaWNhdGlvbl9pZCxtb250aF9udW1iZXInIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChuZXh0RXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNjaGVkdWxpbmcgbmV4dCBwYXltZW50IChub24tY3JpdGljYWwpOicsIG5leHRFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgICB0b2FzdC5zdWNjZXNzKGBQYXltZW50IGZvciBtb250aCAke21vbnRoTnVtYmVyfSBtYXJrZWQgYXMgJHtuZXdTdGF0dXMgfHwgJ2NsZWFyZWQnfWApO1xyXG4gICAgICAgIGlmIChvblBheW1lbnRVcGRhdGVkKSB7XHJcbiAgICAgICAgICBvblBheW1lbnRVcGRhdGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ01hbnVhbCBzeW5jIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIHRvYXN0LmVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIHBheW1lbnQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8RXJyb3JCb3VuZGFyeT5cclxuICAgICAgPFBvcG92ZXIgb3Blbj17c2hvd1BheW1lbnRNZW51fSBvbk9wZW5DaGFuZ2U9e3NldFNob3dQYXltZW50TWVudX0+XHJcbiAgICAgICAgPFBvcG92ZXJUcmlnZ2VyIGFzQ2hpbGQ+XHJcbiAgICAgICAgICA8ZGl2IFxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2luZGljYXRvckNsYXNzfVxyXG4gICAgICAgICAgICB0aXRsZT17dG9vbHRpcFRpdGxlfVxyXG4gICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgIGJvcmRlcjogbW9udGhOdW1iZXIgPT09IDEgPyAnMnB4IHNvbGlkICM2NjYnIDogJzFweCBzb2xpZCAjZDBkMGQwJyxcclxuICAgICAgICAgICAgICBib3hTaGFkb3c6IHN0YXR1cyA9PT0gJ1BBSUQnID8gJzAgMCAycHggMXB4IHJnYmEoMTksIDExNSwgNTEsIDAuNSknIDogJ25vbmUnLFxyXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogc3RhdHVzID8gdW5kZWZpbmVkIDogJ3doaXRlJywgLy8gRm9yY2Ugd2hpdGUgYmFja2dyb3VuZCBmb3IgZW1wdHkgaW5kaWNhdG9yc1xyXG4gICAgICAgICAgICAgIG9wYWNpdHk6IDEgLy8gRW5zdXJlIGZ1bGwgb3BhY2l0eSBhdCBhbGwgdGltZXNcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9Qb3BvdmVyVHJpZ2dlcj5cclxuICAgICAgICA8UG9wb3ZlckNvbnRlbnQgY2xhc3NOYW1lPVwidy03MlwiIHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogJ3doaXRlJywgb3BhY2l0eTogMSwgYm94U2hhZG93OiAnMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKScsIGJvcmRlcjogJzFweCBzb2xpZCAjZDBkMGQwJyB9fT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5Nb250aCB7bW9udGhOdW1iZXJ9IFBheW1lbnQ8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHsvKiBEYXRlIHBpY2tlciAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cclxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bVwiPlBheW1lbnQgRGF0ZTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgPFBvcG92ZXI+XHJcbiAgICAgICAgICAgICAgICA8UG9wb3ZlclRyaWdnZXIgYXNDaGlsZD5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwganVzdGlmeS1zdGFydCB0ZXh0LWxlZnQgZm9udC1ub3JtYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwZGF0aW5nfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFySWNvbiBjbGFzc05hbWU9XCJtci0yIGgtNCB3LTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZERhdGUgPyBmb3JtYXQoc2VsZWN0ZWREYXRlLCAnUFBQJykgOiA8c3Bhbj5QaWNrIGEgZGF0ZTwvc3Bhbj59XHJcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9Qb3BvdmVyVHJpZ2dlcj5cclxuICAgICAgICAgICAgICAgIDxQb3BvdmVyQ29udGVudCBjbGFzc05hbWU9XCJ3LWF1dG8gcC0wXCIgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLCBvcGFjaXR5OiAxIH19PlxyXG4gICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJcclxuICAgICAgICAgICAgICAgICAgICBtb2RlPVwic2luZ2xlXCJcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZD17c2VsZWN0ZWREYXRlfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXsoZGF0ZSkgPT4gc2V0U2VsZWN0ZWREYXRlKGRhdGUpfVxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxGb2N1c1xyXG4gICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9Qb3BvdmVyQ29udGVudD5cclxuICAgICAgICAgICAgICA8L1BvcG92ZXI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgey8qIFBheW1lbnQgc3RhdHVzIGJ1dHRvbnMgKi99XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgIHtpc1VwZGF0aW5nID8gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0yIGZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHB5LTRcIj5cclxuICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gaC01IHctNSB0ZXh0LWdyYXktNTAwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3NOYW1lPVwib3BhY2l0eS0yNVwiIGN4PVwiMTJcIiBjeT1cIjEyXCIgcj1cIjEwXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlV2lkdGg9XCI0XCI+PC9jaXJjbGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPHBhdGggY2xhc3NOYW1lPVwib3BhY2l0eS03NVwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTQgMTJhOCA4IDAgMDE4LThWMEM1LjM3MyAwIDAgNS4zNzMgMCAxMmg0em0yIDUuMjkxQTcuOTYyIDcuOTYyIDAgMDE0IDEySDBjMCAzLjA0MiAxLjEzNSA1LjgyNCAzIDcuOTM4bDMtMi42NDd6XCI+PC9wYXRoPlxyXG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMlwiPlVwZGF0aW5nLi4uPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNlNmY0ZWFdIHRleHQtWyMxMzczMzNdIGhvdmVyOmJnLVsjZDNlZWRiXSBob3Zlcjp0ZXh0LVsjMTM3MzMzXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdXBkYXRlUGF5bWVudFN0YXR1cygnUEFJRCcsIHNlbGVjdGVkRGF0ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzVXBkYXRpbmd9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICBQYWlkXHJcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLVsjZmNlOGU2XSB0ZXh0LVsjYzUyMjFmXSBob3ZlcjpiZy1bI2ZhZGFkN10gaG92ZXI6dGV4dC1bI2M1MjIxZl1cIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHVwZGF0ZVBheW1lbnRTdGF0dXMoJ01JU1NFRCcsIHNlbGVjdGVkRGF0ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzVXBkYXRpbmd9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICBNaXNzZWRcclxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNlOGYwZmVdIHRleHQtWyMxYTczZThdIGhvdmVyOmJnLVsjZDRlMmZjXSBob3Zlcjp0ZXh0LVsjMWE3M2U4XVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdXBkYXRlUGF5bWVudFN0YXR1cygnUEVORElORycsIHNlbGVjdGVkRGF0ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzVXBkYXRpbmd9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICBQZW5kaW5nXHJcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLVsjZmVmN2UwXSB0ZXh0LVsjZWE4NjAwXSBob3ZlcjpiZy1bI2ZkZjNkMF0gaG92ZXI6dGV4dC1bI2VhODYwMF1cIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHVwZGF0ZVBheW1lbnRTdGF0dXMoJ05TRicsIHNlbGVjdGVkRGF0ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzVXBkYXRpbmd9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICBOU0ZcclxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNmMWYzZjRdIHRleHQtWyM4MDg2OGJdIGhvdmVyOmJnLVsjZTRlNmU4XSBob3Zlcjp0ZXh0LVsjODA4NjhiXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdXBkYXRlUGF5bWVudFN0YXR1cygnV0FJVkVEJywgc2VsZWN0ZWREYXRlKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNVcGRhdGluZ31cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIFdhaXZlZFxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy13aGl0ZSB0ZXh0LWdyYXktNzAwIGhvdmVyOmJnLWdyYXktMTAwXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB1cGRhdGVQYXltZW50U3RhdHVzKG51bGwsIG51bGwpfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwZGF0aW5nfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xlYXJcclxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvUG9wb3ZlckNvbnRlbnQ+XHJcbiAgICAgIDwvUG9wb3Zlcj5cclxuICAgIDwvRXJyb3JCb3VuZGFyeT5cclxuICApO1xyXG59O1xyXG5cclxuLy8gUGF5bWVudCBoaXN0b3J5IGdyaWQgY29tcG9uZW50ICgxMiBtb250aHMpXHJcbmV4cG9ydCBjb25zdCBQYXltZW50R3JpZCA9ICh7IFxyXG4gIGFwcGxpY2F0aW9uLFxyXG4gIG9uUGF5bWVudFVwZGF0ZWRcclxufTogeyBcclxuICBhcHBsaWNhdGlvbjogQWdlbnRBcHBsaWNhdGlvbixcclxuICBvblBheW1lbnRVcGRhdGVkPzogKCkgPT4gdm9pZFxyXG59KSA9PiB7XHJcbiAgY29uc3QgW3BheW1lbnRzLCBzZXRQYXltZW50c10gPSB1c2VTdGF0ZTxQYXltZW50RGF0YVtdPihbXSk7XHJcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4odHJ1ZSk7XHJcbiAgXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGZldGNoUGF5bWVudHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGlmICghYXBwbGljYXRpb24/LmlkKSByZXR1cm47XHJcbiAgICAgIFxyXG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgICAuc2VsZWN0KCdtb250aF9udW1iZXIsIHBheW1lbnRfc3RhdHVzLCBwYXltZW50X2RhdGUsIHVwZGF0ZWRfYXQnKVxyXG4gICAgICAgICAgLmVxKCdhcHBsaWNhdGlvbl9pZCcsIGFwcGxpY2F0aW9uLmlkKVxyXG4gICAgICAgICAgLm9yZGVyKCdtb250aF9udW1iZXInKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGF5bWVudHM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgLy8gRG9uJ3Qgc2hvdyBlcnJvciB0b2FzdCBmb3IgcGVybWlzc2lvbiBpc3N1ZXNcclxuICAgICAgICAgIGlmICghZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncGVybWlzc2lvbicpICYmICFlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdtdXN0IGJlIG93bmVyJykpIHtcclxuICAgICAgICAgICAgdG9hc3QuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHBheW1lbnQgaGlzdG9yeScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gQ29udGludWUgd2l0aG91dCBkYXRhIC0gd2UnbGwgZmFsbGJhY2sgdG8gYXBwbGljYXRpb24gbW9udGggZmllbGRzXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNldFBheW1lbnRzKGRhdGEgfHwgW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwYXltZW50czonLCBlcnJvcik7XHJcbiAgICAgICAgLy8gRG9uJ3Qgc2hvdyBlcnJvciB0b2FzdCB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIHVzZXJcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgZmV0Y2hQYXltZW50cygpO1xyXG4gIH0sIFthcHBsaWNhdGlvbj8uaWRdKTtcclxuICBcclxuICAvLyBDdXN0b20gcmVmcmVzaCBmdW5jdGlvbiBmb3Igd2hlbiBwYXltZW50cyBhcmUgdXBkYXRlZFxyXG4gIGNvbnN0IHJlZnJlc2hQYXltZW50cyA9ICgpID0+IHtcclxuICAgIGlmIChvblBheW1lbnRVcGRhdGVkKSB7XHJcbiAgICAgIG9uUGF5bWVudFVwZGF0ZWQoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIFxyXG4gIC8vIENyZWF0ZSBhbiBhcnJheSBvZiAxMiBtb250aHNcclxuICBjb25zdCBtb250aHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMiB9LCAoXywgaSkgPT4gaSArIDEpO1xyXG5cclxuICAvLyBHZXQgcGF5bWVudCBzdGF0dXMgZm9yIGEgc3BlY2lmaWMgbW9udGhcclxuICBjb25zdCBnZXRNb250aFN0YXR1cyA9IChtb250aDogbnVtYmVyKTogUGF5bWVudFN0YXR1cyB8IG51bGwgPT4ge1xyXG4gICAgLy8gRmlyc3QgdHJ5IHRvIGdldCBmcm9tIHBheW1lbnRzIGRhdGFcclxuICAgIGNvbnN0IHBheW1lbnQgPSBwYXltZW50cy5maW5kKHAgPT4gcC5tb250aF9udW1iZXIgPT09IG1vbnRoKTtcclxuICAgIGlmIChwYXltZW50KSB7XHJcbiAgICAgIHJldHVybiBwYXltZW50LnBheW1lbnRfc3RhdHVzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBdXRvLXNldCBmaXJzdCBtb250aCBhcyBwYWlkIGlmIGFwcGxpY2F0aW9uIHN0YXR1cyBjb250YWlucyBcIlBhaWRcIiBvciBcInBhaWRfc3RhdHVzXCIgaXMgXCJQYWlkXCJcclxuICAgIGlmIChtb250aCA9PT0gMSAmJiAoXHJcbiAgICAgICAgYXBwbGljYXRpb24uc3RhdHVzPy5pbmNsdWRlcygnUGFpZCcpIHx8IFxyXG4gICAgICAgIGFwcGxpY2F0aW9uLnBhaWRfc3RhdHVzID09PSAnUGFpZCcgfHwgXHJcbiAgICAgICAgYXBwbGljYXRpb24uc3RhdHVzID09PSAnTGl2ZScgfHxcclxuICAgICAgICBhcHBsaWNhdGlvbi5zdGF0dXMgPT09ICdBcHByb3ZlZCdcclxuICAgICAgKSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhgQXV0by1tYXJraW5nIG1vbnRoIDEgYXMgUEFJRCBmb3IgYXBwbGljYXRpb24gd2l0aCBzdGF0dXM9JHthcHBsaWNhdGlvbi5zdGF0dXN9LCBwYWlkX3N0YXR1cz0ke2FwcGxpY2F0aW9uLnBhaWRfc3RhdHVzfWApO1xyXG4gICAgICByZXR1cm4gJ1BBSUQnO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGYWxsYmFjayB0byBtb250aF9YIGZpZWxkcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxyXG4gICAgY29uc3QgbW9udGhLZXkgPSBgbW9udGhfJHttb250aH1gIGFzIGtleW9mIHR5cGVvZiBhcHBsaWNhdGlvbjtcclxuICAgIHJldHVybiAoYXBwbGljYXRpb25bbW9udGhLZXldIGFzIFBheW1lbnRTdGF0dXMpIHx8IG51bGw7XHJcbiAgfTtcclxuICBcclxuICAvLyBHZXQgcGF5bWVudCBkYXRlIGZvciBhIHNwZWNpZmljIG1vbnRoXHJcbiAgY29uc3QgZ2V0UGF5bWVudERhdGUgPSAobW9udGg6IG51bWJlcik6IHN0cmluZyB8IG51bGwgPT4ge1xyXG4gICAgLy8gRmlyc3QgY2hlY2sgZnJvbSBwYXltZW50cyBkYXRhXHJcbiAgICBjb25zdCBwYXltZW50ID0gcGF5bWVudHMuZmluZChwID0+IHAubW9udGhfbnVtYmVyID09PSBtb250aCk7XHJcbiAgICBpZiAocGF5bWVudCAmJiBwYXltZW50LnBheW1lbnRfZGF0ZSkge1xyXG4gICAgICByZXR1cm4gcGF5bWVudC5wYXltZW50X2RhdGU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZvciBmaXJzdCBtb250aCwgdXNlIGVmZmVjdGl2ZV9wb2xpY3lfZGF0ZSBpZiBpdCBleGlzdHMgYW5kIG1vbnRoIGlzIHBhaWRcclxuICAgIGlmIChtb250aCA9PT0gMSAmJiBnZXRNb250aFN0YXR1cyhtb250aCkgPT09ICdQQUlEJyAmJiBhcHBsaWNhdGlvbi5lZmZlY3RpdmVfcG9saWN5X2RhdGUpIHtcclxuICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfTtcclxuICBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gQXV0by11cGRhdGUgZmlyc3QgcGF5bWVudCBpZiBzdGF0dXMgaXMgXCJQYWlkICYgSXNzdWVkXCIgb3IgcGFpZF9zdGF0dXMgaXMgXCJQYWlkXCJcclxuICAgIGNvbnN0IGF1dG9VcGRhdGVGaXJzdFBheW1lbnQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGlmICghYXBwbGljYXRpb24/LmlkKSByZXR1cm47XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiBzdGF0dXMgcXVhbGlmaWVzIGZvciBhdXRvLW1hcmtpbmcgZmlyc3QgcGF5bWVudFxyXG4gICAgICBjb25zdCBzaG91bGRBdXRvTWFya0ZpcnN0UGF5bWVudCA9IChcclxuICAgICAgICAoYXBwbGljYXRpb24uc3RhdHVzPy5pbmNsdWRlcygnUGFpZCcpIHx8IFxyXG4gICAgICAgICBhcHBsaWNhdGlvbi5wYWlkX3N0YXR1cyA9PT0gJ1BhaWQnIHx8IFxyXG4gICAgICAgICBhcHBsaWNhdGlvbi5zdGF0dXMgPT09ICdMaXZlJyB8fFxyXG4gICAgICAgICBhcHBsaWNhdGlvbi5zdGF0dXMgPT09ICdBcHByb3ZlZCcpICYmIFxyXG4gICAgICAgICFwYXltZW50cy5zb21lKHAgPT4gcC5tb250aF9udW1iZXIgPT09IDEgJiYgcC5wYXltZW50X3N0YXR1cyA9PT0gJ1BBSUQnKVxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgaWYgKHNob3VsZEF1dG9NYXJrRmlyc3RQYXltZW50KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBBdXRvLXVwZGF0aW5nIGZpcnN0IHBheW1lbnQgcmVjb3JkIGZvciBhcHBsaWNhdGlvbiAke2FwcGxpY2F0aW9uLmlkfWApO1xyXG4gICAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhlIFJQQyBmdW5jdGlvbiBleGlzdHNcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YTogcnBjQ2hlY2ssIGVycm9yOiBycGNDaGVja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoXHJcbiAgICAgICAgICAgICd1cGRhdGVfcGF5bWVudF9hbmRfcG9saWN5X2hlYWx0aCcsIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgcF9hcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb24uaWQsXHJcbiAgICAgICAgICAgICAgcF9tb250aF9udW1iZXI6IDEsXHJcbiAgICAgICAgICAgICAgcF9wYXltZW50X3N0YXR1czogJ1BBSUQnLFxyXG4gICAgICAgICAgICAgIHBfcGF5bWVudF9kYXRlOiBhcHBsaWNhdGlvbi5lZmZlY3RpdmVfcG9saWN5X2RhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHsgY291bnQ6ICdleGFjdCcgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKHJwY0NoZWNrRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgUlBDIGZ1bmN0aW9uOicsIHJwY0NoZWNrRXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBGYWxsYmFjayB0byBkaXJlY3QgaW5zZXJ0IGlmIFJQQyBpcyBub3QgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWxsaW5nIGJhY2sgdG8gZGlyZWN0IGluc2VydCBpbnRvIGFwcGxpY2F0aW9uX3BheW1lbnRzJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBwYXltZW50IHJlY29yZCBleGlzdHNcclxuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1BheW1lbnRzIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAgICAgICAgIC5lcSgnYXBwbGljYXRpb25faWQnLCBhcHBsaWNhdGlvbi5pZClcclxuICAgICAgICAgICAgICAuZXEoJ21vbnRoX251bWJlcicsIDEpO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nUGF5bWVudHMgfHwgZXhpc3RpbmdQYXltZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAvLyBJbnNlcnQgbmV3IHBheW1lbnQgcmVjb3JkXHJcbiAgICAgICAgICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uLmlkLFxyXG4gICAgICAgICAgICAgICAgICBtb250aF9udW1iZXI6IDEsXHJcbiAgICAgICAgICAgICAgICAgIHBheW1lbnRfc3RhdHVzOiAnUEFJRCcsXHJcbiAgICAgICAgICAgICAgICAgIHBheW1lbnRfZGF0ZTogYXBwbGljYXRpb24uZWZmZWN0aXZlX3BvbGljeV9kYXRlIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHBheW1lbnQgcmVjb3JkXHJcbiAgICAgICAgICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbl9wYXltZW50cycpXHJcbiAgICAgICAgICAgICAgICAudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgcGF5bWVudF9zdGF0dXM6ICdQQUlEJyxcclxuICAgICAgICAgICAgICAgICAgcGF5bWVudF9kYXRlOiBhcHBsaWNhdGlvbi5lZmZlY3RpdmVfcG9saWN5X2RhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb24uaWQpXHJcbiAgICAgICAgICAgICAgICAuZXEoJ21vbnRoX251bWJlcicsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEFsc28gdXBkYXRlIGxlZ2FjeSBtb250aF8xIGZpZWxkIGRpcmVjdGx5XHJcbiAgICAgICAgICBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAuZnJvbSgnYWdlbnRfYXBwbGljYXRpb25zJylcclxuICAgICAgICAgICAgLnVwZGF0ZSh7IG1vbnRoXzE6ICdQQUlEJyB9KVxyXG4gICAgICAgICAgICAuZXEoJ2lkJywgYXBwbGljYXRpb24uaWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIHJlZnJlc2hQYXltZW50cygpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0ZpcnN0IHBheW1lbnQgYXV0by11cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhdXRvLXVwZGF0aW5nIGZpcnN0IHBheW1lbnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgYXV0b1VwZGF0ZUZpcnN0UGF5bWVudCgpO1xyXG4gIH0sIFthcHBsaWNhdGlvbj8uaWQsIGFwcGxpY2F0aW9uPy5zdGF0dXMsIGFwcGxpY2F0aW9uPy5wYWlkX3N0YXR1cywgcGF5bWVudHNdKTtcclxuICBcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWhpc3RvcnktY29udGFpbmVyXCI+XHJcbiAgICAgIHtsb2FkaW5nID8gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+TG9hZGluZyBwYXltZW50IGhpc3RvcnkuLi48L2Rpdj5cclxuICAgICAgKSA6IChcclxuICAgICAgICA8PlxyXG4gICAgICAgICAge21vbnRocy5tYXAobW9udGggPT4gKFxyXG4gICAgICAgICAgICA8UGF5bWVudEluZGljYXRvclxyXG4gICAgICAgICAgICAgIGtleT17bW9udGh9XHJcbiAgICAgICAgICAgICAgc3RhdHVzPXtnZXRNb250aFN0YXR1cyhtb250aCl9XHJcbiAgICAgICAgICAgICAgbW9udGhOdW1iZXI9e21vbnRofVxyXG4gICAgICAgICAgICAgIGFwcGxpY2F0aW9uSWQ9e2FwcGxpY2F0aW9uLmlkfVxyXG4gICAgICAgICAgICAgIHBheW1lbnREYXRlPXtnZXRQYXltZW50RGF0ZShtb250aCl9XHJcbiAgICAgICAgICAgICAgb25QYXltZW50VXBkYXRlZD17cmVmcmVzaFBheW1lbnRzfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgKSl9XHJcbiAgICAgICAgPC8+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuLy8gUGF5bWVudCBVcGRhdGUgTW9kYWwgQ29tcG9uZW50XHJcbmV4cG9ydCBjb25zdCBQYXltZW50VXBkYXRlTW9kYWwgPSAoeyBcclxuICBhcHBsaWNhdGlvbklkLCBcclxuICBtb250aE51bWJlciwgXHJcbiAgY3VycmVudFN0YXR1cyxcclxuICBjdXJyZW50UGF5bWVudERhdGUsXHJcbiAgb25DbG9zZSBcclxufTogeyBcclxuICBhcHBsaWNhdGlvbklkOiBzdHJpbmcsIFxyXG4gIG1vbnRoTnVtYmVyOiBudW1iZXIsIFxyXG4gIGN1cnJlbnRTdGF0dXM6IHN0cmluZyxcclxuICBjdXJyZW50UGF5bWVudERhdGU/OiBzdHJpbmcgfCBudWxsLFxyXG4gIG9uQ2xvc2U6ICgpID0+IHZvaWQgXHJcbn0pID0+IHtcclxuICBjb25zdCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUoY3VycmVudFN0YXR1cyB8fCAnJyk7XHJcbiAgY29uc3QgW3BheW1lbnREYXRlLCBzZXRQYXltZW50RGF0ZV0gPSB1c2VTdGF0ZShjdXJyZW50UGF5bWVudERhdGUgfHwgJycpO1xyXG4gIGNvbnN0IFtpc1NhdmluZywgc2V0SXNTYXZpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XHJcbiAgXHJcbiAgY29uc3QgaGFuZGxlU2F2ZSA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghc3RhdHVzKSB7XHJcbiAgICAgIHRvYXN0LmVycm9yKCdQbGVhc2Ugc2VsZWN0IGEgcGF5bWVudCBzdGF0dXMnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXRJc1NhdmluZyh0cnVlKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQ2hlY2sgaWYgcGF5bWVudCByZWNvcmQgZXhpc3RzXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdQYXltZW50cywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2FwcGxpY2F0aW9uX3BheW1lbnRzJylcclxuICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb25JZClcclxuICAgICAgICAuZXEoJ21vbnRoX251bWJlcicsIG1vbnRoTnVtYmVyKTtcclxuICAgICAgICBcclxuICAgICAgaWYgKGZldGNoRXJyb3IpIHRocm93IGZldGNoRXJyb3I7XHJcbiAgICAgIFxyXG4gICAgICAvLyBJZiByZWNvcmQgZXhpc3RzLCB1cGRhdGUgaXQsIG90aGVyd2lzZSBpbnNlcnQgbmV3IHJlY29yZFxyXG4gICAgICBpZiAoZXhpc3RpbmdQYXltZW50cyAmJiBleGlzdGluZ1BheW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ2FwcGxpY2F0aW9uX3BheW1lbnRzJylcclxuICAgICAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgICAgICBwYXltZW50X3N0YXR1czogc3RhdHVzLFxyXG4gICAgICAgICAgICBwYXltZW50X2RhdGU6IHN0YXR1cyA9PT0gJ1BBSUQnID8gcGF5bWVudERhdGUgfHwgbnVsbCA6IG51bGwsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5lcSgnYXBwbGljYXRpb25faWQnLCBhcHBsaWNhdGlvbklkKVxyXG4gICAgICAgICAgLmVxKCdtb250aF9udW1iZXInLCBtb250aE51bWJlcik7XHJcbiAgICAgICAgICBcclxuICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbklkLFxyXG4gICAgICAgICAgICBtb250aF9udW1iZXI6IG1vbnRoTnVtYmVyLFxyXG4gICAgICAgICAgICBwYXltZW50X3N0YXR1czogc3RhdHVzLFxyXG4gICAgICAgICAgICBwYXltZW50X2RhdGU6IHN0YXR1cyA9PT0gJ1BBSUQnID8gcGF5bWVudERhdGUgfHwgbnVsbCA6IG51bGxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gVXBkYXRlIHBvbGljeSBoZWFsdGhcclxuICAgICAgYXdhaXQgdXBkYXRlUG9saWN5SGVhbHRoKGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICBcclxuICAgICAgdG9hc3Quc3VjY2VzcygnUGF5bWVudCBzdGF0dXMgdXBkYXRlZCcpO1xyXG4gICAgICBvbkNsb3NlKCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgcGF5bWVudCBzdGF0dXM6JywgZXJyb3IpO1xyXG4gICAgICB0b2FzdC5lcnJvcignRXJyb3Igc2F2aW5nIHBheW1lbnQgc3RhdHVzJyk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc1NhdmluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LXVwZGF0ZS1tb2RhbFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtbW9kYWwtY29udGVudFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1tb2RhbC1oZWFkZXJcIj5cclxuICAgICAgICAgIDxoMz5VcGRhdGUgUGF5bWVudCBTdGF0dXMgLSBNb250aCB7bW9udGhOdW1iZXJ9PC9oMz5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY2xvc2UtbW9kYWxcIiBvbkNsaWNrPXtvbkNsb3NlfT4mdGltZXM7PC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LW1vZGFsLWJvZHlcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInBheW1lbnQtc3RhdHVzXCI+UGF5bWVudCBTdGF0dXM8L2xhYmVsPlxyXG4gICAgICAgICAgICA8c2VsZWN0XHJcbiAgICAgICAgICAgICAgaWQ9XCJwYXltZW50LXN0YXR1c1wiXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicGF5bWVudC1zdGF0dXMtc2VsZWN0XCJcclxuICAgICAgICAgICAgICB2YWx1ZT17c3RhdHVzfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0U3RhdHVzKGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj5TZWxlY3QgU3RhdHVzPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlBBSURcIj5QYWlkPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIk1JU1NFRFwiPk1pc3NlZDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJQRU5ESU5HXCI+UGVuZGluZzwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJOU0ZcIj5OU0YgKEluc3VmZmljaWVudCBGdW5kcyk8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiV0FJVkVEXCI+V2FpdmVkPC9vcHRpb24+XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB7c3RhdHVzID09PSAnUEFJRCcgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInBheW1lbnQtZGF0ZVwiPlBheW1lbnQgRGF0ZTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICB0eXBlPVwiZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICBpZD1cInBheW1lbnQtZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwYXltZW50LWRhdGUtaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e3BheW1lbnREYXRlIHx8ICcnfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQYXltZW50RGF0ZShlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1tb2RhbC1mb290ZXJcIj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY2FuY2VsLWJ0blwiIG9uQ2xpY2s9e29uQ2xvc2V9IGRpc2FibGVkPXtpc1NhdmluZ30+Q2FuY2VsPC9idXR0b24+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInNhdmUtYnRuXCIgb25DbGljaz17aGFuZGxlU2F2ZX0gZGlzYWJsZWQ9e2lzU2F2aW5nfT5cclxuICAgICAgICAgICAge2lzU2F2aW5nID8gJ1NhdmluZy4uLicgOiAnU2F2ZSBDaGFuZ2VzJ31cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG4vLyBGdW5jdGlvbiB0byB1cGRhdGUgcG9saWN5IGhlYWx0aCBiYXNlZCBvbiBwYXltZW50IHN0YXR1c2VzXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBvbGljeUhlYWx0aChhcHBsaWNhdGlvbklkOiBzdHJpbmcpIHtcclxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBHZXQgYWxsIHBheW1lbnRzIGZvciB0aGlzIGFwcGxpY2F0aW9uXHJcbiAgICBjb25zdCB7IGRhdGE6IHBheW1lbnRzLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2FwcGxpY2F0aW9uX3BheW1lbnRzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnYXBwbGljYXRpb25faWQnLCBhcHBsaWNhdGlvbklkKTtcclxuICAgICAgXHJcbiAgICBpZiAoZmV0Y2hFcnJvcikgdGhyb3cgZmV0Y2hFcnJvcjtcclxuICAgIFxyXG4gICAgLy8gR2V0IGFwcGxpY2F0aW9uIGRldGFpbHNcclxuICAgIGNvbnN0IHsgZGF0YTogYXBwbGljYXRpb25zLCBlcnJvcjogYXBwRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdhZ2VudF9hcHBsaWNhdGlvbnMnKVxyXG4gICAgICAuc2VsZWN0KCdzdGF0dXMsIHBhaWRfc3RhdHVzJylcclxuICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICBcclxuICAgIGlmIChhcHBFcnJvcikgdGhyb3cgYXBwRXJyb3I7XHJcbiAgICBpZiAoIWFwcGxpY2F0aW9ucyB8fCBhcHBsaWNhdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICBcclxuICAgIGNvbnN0IGFwcCA9IGFwcGxpY2F0aW9uc1swXTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgcG9saWN5IGlzIGFscmVhZHkgY2FuY2VsbGVkXHJcbiAgICBpZiAoYXBwLnN0YXR1cz8uaW5jbHVkZXMoJ0NhbmNlbGxlZCcpIHx8IGFwcC5zdGF0dXMgPT09ICdEZWNsaW5lZCcpIHtcclxuICAgICAgcmV0dXJuOyAvLyBEb24ndCBjaGFuZ2UgY2FuY2VsbGVkIHBvbGljaWVzXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENvdW50IG1pc3NlZCBwYXltZW50c1xyXG4gICAgY29uc3QgbWlzc2VkUGF5bWVudHMgPSBwYXltZW50cz8uZmlsdGVyKHAgPT4gXHJcbiAgICAgIHAucGF5bWVudF9zdGF0dXMgPT09ICdNSVNTRUQnIHx8IHAucGF5bWVudF9zdGF0dXMgPT09ICdOU0YnXHJcbiAgICApLmxlbmd0aCB8fCAwO1xyXG4gICAgXHJcbiAgICAvLyBEZXRlcm1pbmUgbmV3IHBvbGljeSBoZWFsdGhcclxuICAgIGxldCBuZXdQb2xpY3lIZWFsdGg7XHJcbiAgICBcclxuICAgIGlmIChtaXNzZWRQYXltZW50cyA+PSAyKSB7XHJcbiAgICAgIG5ld1BvbGljeUhlYWx0aCA9ICdQYXltZW50IElzc3Vlcyc7XHJcbiAgICB9IGVsc2UgaWYgKGFwcC5zdGF0dXMgPT09ICdBcHByb3ZlZCcgJiYgYXBwLnBhaWRfc3RhdHVzID09PSAnUGFpZCcpIHtcclxuICAgICAgbmV3UG9saWN5SGVhbHRoID0gJ0FjdGl2ZSc7XHJcbiAgICB9IGVsc2UgaWYgKGFwcC5zdGF0dXMgPT09ICdBcHByb3ZlZCcgJiYgYXBwLnBhaWRfc3RhdHVzID09PSAnVW5wYWlkJykge1xyXG4gICAgICBuZXdQb2xpY3lIZWFsdGggPSAnUGVuZGluZyBGaXJzdCBQYXltZW50JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEtlZXAgZXhpc3RpbmcgcG9saWN5IGhlYWx0aFxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFVwZGF0ZSBwb2xpY3kgaGVhbHRoXHJcbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2FnZW50X2FwcGxpY2F0aW9ucycpXHJcbiAgICAgIC51cGRhdGUoeyBwb2xpY3lfaGVhbHRoOiBuZXdQb2xpY3lIZWFsdGggfSlcclxuICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpO1xyXG4gICAgICBcclxuICAgIGlmICh1cGRhdGVFcnJvcikgdGhyb3cgdXBkYXRlRXJyb3I7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHBvbGljeSBoZWFsdGg6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBQYXltZW50IHN0YXR1cyBsZWdlbmQgY29tcG9uZW50XHJcbmV4cG9ydCBjb25zdCBQYXltZW50TGVnZW5kID0gKCkgPT4gKFxyXG4gIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIGdhcC14LTQgZ2FwLXktMiB0ZXh0LXNtXCI+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1pbmRpY2F0b3IgcGF5bWVudC1wYWlkXCI+PC9kaXY+XHJcbiAgICAgIDxzcGFuPlBhaWQ8L3NwYW4+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWluZGljYXRvciBwYXltZW50LW1pc3NlZFwiPjwvZGl2PlxyXG4gICAgICA8c3Bhbj5NaXNzZWQ8L3NwYW4+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWluZGljYXRvciBwYXltZW50LXBlbmRpbmdcIj48L2Rpdj5cclxuICAgICAgPHNwYW4+UGVuZGluZzwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaW5kaWNhdG9yIHBheW1lbnQtbnNmXCI+PC9kaXY+XHJcbiAgICAgIDxzcGFuPk5TRjwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaW5kaWNhdG9yIHBheW1lbnQtd2FpdmVkXCI+PC9kaXY+XHJcbiAgICAgIDxzcGFuPldhaXZlZDwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBheW1lbnQtaW5kaWNhdG9yIHBheW1lbnQtZW1wdHlcIj48L2Rpdj5cclxuICAgICAgPHNwYW4+Tm90IER1ZTwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG4pO1xyXG5cclxuLy8gTkVXOiBDcmVhdGUgYSB3cmFwcGVyIGNvbXBvbmVudCBmb3IgdGhlIHBheW1lbnQgaGlzdG9yeSBncmlkXHJcbmV4cG9ydCBjb25zdCBTYWZlUGF5bWVudEhpc3RvcnlHcmlkID0gKHsgYXBwbGljYXRpb25JZCB9OiB7IGFwcGxpY2F0aW9uSWQ6IHN0cmluZyB9KSA9PiB7XHJcbiAgcmV0dXJuIChcclxuICAgIDxFcnJvckJvdW5kYXJ5PlxyXG4gICAgICA8UGF5bWVudEhpc3RvcnlHcmlkIGFwcGxpY2F0aW9uSWQ9e2FwcGxpY2F0aW9uSWR9IC8+XHJcbiAgICA8L0Vycm9yQm91bmRhcnk+XHJcbiAgKTtcclxufTtcclxuXHJcbi8vIE5FVzogUGF5bWVudCBoaXN0b3J5IGdyaWQgY29tcG9uZW50IGZvciB0aGUgYXBwbGljYXRpb25zIHRhYmxlXHJcbmV4cG9ydCBjb25zdCBQYXltZW50SGlzdG9yeUdyaWQgPSAoeyBhcHBsaWNhdGlvbklkIH06IHsgYXBwbGljYXRpb25JZDogc3RyaW5nIH0pID0+IHtcclxuICBjb25zdCBbcGF5bWVudHMsIHNldFBheW1lbnRzXSA9IHVzZVN0YXRlPFBheW1lbnREYXRhW10+KFtdKTtcclxuICBjb25zdCBbYXBwbGljYXRpb24sIHNldEFwcGxpY2F0aW9uXSA9IHVzZVN0YXRlPGFueT4obnVsbCk7XHJcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbc2hvdWxkU2hvd1BheW1lbnRzLCBzZXRTaG91bGRTaG93UGF5bWVudHNdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtuZXh0UGF5bWVudERhdGVzLCBzZXROZXh0UGF5bWVudERhdGVzXSA9IHVzZVN0YXRlPHtba2V5OiBudW1iZXJdOiBzdHJpbmd9Pih7fSk7XHJcbiAgY29uc3QgaXNNb3VudGVkID0gdXNlUmVmKHRydWUpO1xyXG4gIFxyXG4gIC8vIFVzZSBhIHN0YWJsZSBrZXkgZm9yIHJlbmRlcmluZyBpbmRpY2F0b3JzXHJcbiAgY29uc3Qgc3RhYmxlS2V5ID0gdXNlUmVmKGBwYXltZW50LWdyaWQtJHthcHBsaWNhdGlvbklkfWApLmN1cnJlbnQ7XHJcbiAgXHJcbiAgLy8gTWVtb2l6ZSB0aGUgZmV0Y2ggZnVuY3Rpb25zIHRvIHVzZSBpbiBkZXBlbmRlbmNpZXNcclxuICBjb25zdCBmZXRjaEFwcGxpY2F0aW9uRGV0YWlscyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghYXBwbGljYXRpb25JZCB8fCAhaXNNb3VudGVkLmN1cnJlbnQpIHJldHVybjtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnYWdlbnRfYXBwbGljYXRpb25zJylcclxuICAgICAgICAuc2VsZWN0KCdlZmZlY3RpdmVfcG9saWN5X2RhdGUsIHN0YXR1cywgcGFpZF9zdGF0dXMsIG1vbnRoXzEnKVxyXG4gICAgICAgIC5lcSgnaWQnLCBhcHBsaWNhdGlvbklkKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICBcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYXBwbGljYXRpb24gZGV0YWlsczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZGF0YSAmJiBpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHBhaWRfc3RhdHVzIGNoYW5nZWQgYW5kIG5lZWRzIHRvIGJlIHJlZmxlY3RlZCBpbiBVSVxyXG4gICAgICAgIGNvbnN0IHBhaWRTdGF0dXNDaGFuZ2VkID0gYXBwbGljYXRpb24/LnBhaWRfc3RhdHVzICE9PSBkYXRhLnBhaWRfc3RhdHVzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNldEFwcGxpY2F0aW9uKGRhdGEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1VQ0ggU1RSSUNURVIgY2hlY2sgLSBPbmx5IHNob3cgcGF5bWVudCBoaXN0b3J5IGZvciBhcHBsaWNhdGlvbnMgZXhwbGljaXRseSBtYXJrZWQgYXMgcGFpZFxyXG4gICAgICAgIGNvbnN0IGlzSXNzdWVkQW5kUGFpZCA9IFxyXG4gICAgICAgICAgZGF0YS5wYWlkX3N0YXR1cyA9PT0gJ1BhaWQnICYmIFxyXG4gICAgICAgICAgZGF0YS5lZmZlY3RpdmVfcG9saWN5X2RhdGUgIT09IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2V0U2hvdWxkU2hvd1BheW1lbnRzKGlzSXNzdWVkQW5kUGFpZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSWYgcGFpZF9zdGF0dXMgY2hhbmdlZCwgcmVmcmVzaCBwYXltZW50IGRhdGFcclxuICAgICAgICBpZiAocGFpZFN0YXR1c0NoYW5nZWQpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdQYWlkIHN0YXR1cyBjaGFuZ2VkLCByZWZyZXNoaW5nIHBheW1lbnQgZGF0YS4uLicpO1xyXG4gICAgICAgICAgZmV0Y2hQYXltZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZmV0Y2hBcHBsaWNhdGlvbkRldGFpbHM6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH0sIFthcHBsaWNhdGlvbklkLCBhcHBsaWNhdGlvbj8ucGFpZF9zdGF0dXNdKTtcclxuICBcclxuICBjb25zdCBmZXRjaFBheW1lbnRzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFhcHBsaWNhdGlvbklkIHx8ICFpc01vdW50ZWQuY3VycmVudCkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnYXBwbGljYXRpb25fcGF5bWVudHMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ21vbnRoX251bWJlciwgcGF5bWVudF9zdGF0dXMsIHBheW1lbnRfZGF0ZSwgdXBkYXRlZF9hdCcpXHJcbiAgICAgICAgLmVxKCdhcHBsaWNhdGlvbl9pZCcsIGFwcGxpY2F0aW9uSWQpXHJcbiAgICAgICAgLm9yZGVyKCdtb250aF9udW1iZXInKTtcclxuICAgICAgICBcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgLy8gU3RpbGwgbG9nIHRoZSBlcnJvciBidXQgZG9uJ3Qgc2hvdyB0byB1c2VyXHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGF5bWVudHM6JywgZXJyb3IpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEgJiYgaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgICBzZXRQYXltZW50cyhkYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBFeHRyYWN0IGFuZCB0cmFjayBuZXh0IHBheW1lbnQgZGF0ZXNcclxuICAgICAgICBjb25zdCBwYXltZW50RGF0ZXM6IHtba2V5OiBudW1iZXJdOiBzdHJpbmd9ID0ge307XHJcbiAgICAgICAgZGF0YS5mb3JFYWNoKHBheW1lbnQgPT4ge1xyXG4gICAgICAgICAgaWYgKHBheW1lbnQucGF5bWVudF9kYXRlKSB7XHJcbiAgICAgICAgICAgIHBheW1lbnREYXRlc1twYXltZW50Lm1vbnRoX251bWJlcl0gPSBwYXltZW50LnBheW1lbnRfZGF0ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzZXROZXh0UGF5bWVudERhdGVzKHBheW1lbnREYXRlcyk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHBheW1lbnQgaGlzdG9yeTonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFthcHBsaWNhdGlvbklkXSk7XHJcbiAgXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIFNldCBpc01vdW50ZWQgcmVmIHRvIHRydWUgd2hlbiBjb21wb25lbnQgbW91bnRzXHJcbiAgICBpc01vdW50ZWQuY3VycmVudCA9IHRydWU7XHJcbiAgICBcclxuICAgIC8vIE9ubHkgZmV0Y2ggaWYgd2UgaGF2ZSBhbiBhcHBsaWNhdGlvbiBJRFxyXG4gICAgaWYgKGFwcGxpY2F0aW9uSWQpIHtcclxuICAgICAgZmV0Y2hBcHBsaWNhdGlvbkRldGFpbHMoKTtcclxuICAgICAgZmV0Y2hQYXltZW50cygpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDbGVhbiB1cCBmdW5jdGlvbiB0aGF0IHJ1bnMgd2hlbiBjb21wb25lbnQgdW5tb3VudHNcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIC8vIE1hcmsgY29tcG9uZW50IGFzIHVubW91bnRlZCB0byBwcmV2ZW50IHN0YXRlIHVwZGF0ZXNcclxuICAgICAgaXNNb3VudGVkLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgfSwgW2FwcGxpY2F0aW9uSWQsIGZldGNoQXBwbGljYXRpb25EZXRhaWxzLCBmZXRjaFBheW1lbnRzXSk7XHJcbiAgXHJcbiAgLy8gU2V0IHVwIGEgcG9sbGluZyBtZWNoYW5pc20gdG8gY2hlY2sgZm9yIHBheW1lbnQgc3RhdHVzIGNoYW5nZXNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFhcHBsaWNhdGlvbklkIHx8ICFzaG91bGRTaG93UGF5bWVudHMpIHJldHVybjtcclxuICAgIFxyXG4gICAgLy8gUG9sbCBmb3IgY2hhbmdlcyBldmVyeSA1IHNlY29uZHMgdG8gY2F0Y2ggdXBkYXRlcyBmcm9tIG90aGVyIHVzZXJzXHJcbiAgICBjb25zdCBwb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICAgIGZldGNoQXBwbGljYXRpb25EZXRhaWxzKCk7XHJcbiAgICAgIH1cclxuICAgIH0sIDUwMDApO1xyXG4gICAgXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBjbGVhckludGVydmFsKHBvbGxJbnRlcnZhbCk7XHJcbiAgICB9O1xyXG4gIH0sIFthcHBsaWNhdGlvbklkLCBzaG91bGRTaG93UGF5bWVudHMsIGZldGNoQXBwbGljYXRpb25EZXRhaWxzXSk7XHJcbiAgXHJcbiAgY29uc3QgZ2V0TW9udGhTdGF0dXMgPSAobW9udGg6IG51bWJlcik6IFBheW1lbnRTdGF0dXMgfCBudWxsID0+IHtcclxuICAgIC8vIEZpcnN0IGNoZWNrIHBheW1lbnQgcmVjb3JkXHJcbiAgICBjb25zdCBwYXltZW50ID0gcGF5bWVudHMuZmluZChwID0+IHAubW9udGhfbnVtYmVyID09PSBtb250aCk7XHJcbiAgICBpZiAocGF5bWVudD8ucGF5bWVudF9zdGF0dXMpIHtcclxuICAgICAgcmV0dXJuIHBheW1lbnQucGF5bWVudF9zdGF0dXM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZvciBmaXJzdCBtb250aCwgT05MWSBzaG93IGFzIFBBSUQgaWYgaXQncyBleHBsaWNpdGx5IHNldCB0aGF0IHdheVxyXG4gICAgaWYgKG1vbnRoID09PSAxICYmIGFwcGxpY2F0aW9uKSB7XHJcbiAgICAgIC8vIE9ubHkgdHJ1c3QgdGhlIGV4cGxpY2l0IG1vbnRoXzEgZmllbGQgb3IgcGF5bWVudHMgdGFibGUgcmVjb3Jkc1xyXG4gICAgICAvLyBEbyBub3QgYXV0b21hdGljYWxseSBhc3N1bWUgcGFpZCBiYXNlZCBvbiBzdGF0dXNcclxuICAgICAgaWYgKGFwcGxpY2F0aW9uLm1vbnRoXzEgPT09ICdQQUlEJykge1xyXG4gICAgICAgIHJldHVybiAnUEFJRCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfTtcclxuICBcclxuICBjb25zdCBnZXRQYXltZW50RGF0ZSA9IChtb250aDogbnVtYmVyKTogc3RyaW5nIHwgbnVsbCA9PiB7XHJcbiAgICAvLyBGaXJzdCBjaGVjayBmcm9tIHBheW1lbnRzIGRhdGFcclxuICAgIGNvbnN0IHBheW1lbnQgPSBwYXltZW50cy5maW5kKHAgPT4gcC5tb250aF9udW1iZXIgPT09IG1vbnRoKTtcclxuICAgIGlmIChwYXltZW50Py5wYXltZW50X2RhdGUpIHtcclxuICAgICAgcmV0dXJuIHBheW1lbnQucGF5bWVudF9kYXRlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGb3IgZmlyc3QgbW9udGggd2l0aCBlZmZlY3RpdmUgcG9saWN5IGRhdGVcclxuICAgIGlmIChtb250aCA9PT0gMSAmJiBhcHBsaWNhdGlvbj8uZWZmZWN0aXZlX3BvbGljeV9kYXRlICYmIGdldE1vbnRoU3RhdHVzKDEpID09PSAnUEFJRCcpIHtcclxuICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uLmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGNvbnNlY3V0aXZlIG1vbnRoIHRoYXQgc2hvdWxkIGJlIHNjaGVkdWxlZFxyXG4gICAgaWYgKG1vbnRoID4gMSAmJiBuZXh0UGF5bWVudERhdGVzW21vbnRoXSkge1xyXG4gICAgICByZXR1cm4gbmV4dFBheW1lbnREYXRlc1ttb250aF07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH07XHJcbiAgXHJcbiAgY29uc3QgZ2V0VG9vbHRpcFRleHQgPSAobW9udGg6IG51bWJlcik6IHN0cmluZyA9PiB7XHJcbiAgICBjb25zdCBzdGF0dXMgPSBnZXRNb250aFN0YXR1cyhtb250aCk7XHJcbiAgICBjb25zdCBkYXRlID0gZ2V0UGF5bWVudERhdGUobW9udGgpO1xyXG4gICAgXHJcbiAgICBpZiAoIXN0YXR1cykge1xyXG4gICAgICByZXR1cm4gYE1vbnRoICR7bW9udGh9OiBOb3QgeWV0IGR1ZWA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChkYXRlKSB7XHJcbiAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBuZXcgRGF0ZShkYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgICAgcmV0dXJuIGBNb250aCAke21vbnRofTogJHtzdGF0dXN9ICgke2Zvcm1hdHRlZERhdGV9KWA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBgTW9udGggJHttb250aH06ICR7c3RhdHVzfWA7XHJcbiAgfTtcclxuICBcclxuICBjb25zdCBoYW5kbGVQYXltZW50VXBkYXRlZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICBmZXRjaFBheW1lbnRzKCk7XHJcbiAgICAgIGZldGNoQXBwbGljYXRpb25EZXRhaWxzKCk7XHJcbiAgICB9XHJcbiAgfSwgW2ZldGNoUGF5bWVudHMsIGZldGNoQXBwbGljYXRpb25EZXRhaWxzXSk7XHJcbiAgXHJcbiAgLy8gQ3JlYXRlIGluZGljYXRvcnMgZm9yIG1vbnRocyAxLTEyIHdpdGggY2FyZWZ1bCBrZXkgbWFuYWdlbWVudFxyXG4gIGNvbnN0IHJlbmRlclBheW1lbnRJbmRpY2F0b3JzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbW9udGhzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTIgfSwgKF8sIGkpID0+IGkgKyAxKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0xIGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgIHttb250aHMubWFwKChtb250aCkgPT4gKFxyXG4gICAgICAgICAgPFBheW1lbnRJbmRpY2F0b3JcclxuICAgICAgICAgICAga2V5PXtgJHtzdGFibGVLZXl9LW1vbnRoLSR7bW9udGh9YH1cclxuICAgICAgICAgICAgc3RhdHVzPXtnZXRNb250aFN0YXR1cyhtb250aCl9XHJcbiAgICAgICAgICAgIG1vbnRoTnVtYmVyPXttb250aH1cclxuICAgICAgICAgICAgYXBwbGljYXRpb25JZD17YXBwbGljYXRpb25JZH1cclxuICAgICAgICAgICAgcGF5bWVudERhdGU9e2dldFBheW1lbnREYXRlKG1vbnRoKX1cclxuICAgICAgICAgICAgb25QYXltZW50VXBkYXRlZD17aGFuZGxlUGF5bWVudFVwZGF0ZWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICkpfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfTtcclxuICBcclxuICAvLyBTaG93IG5vdGhpbmcgaWYgdGhlIGFwcGxpY2F0aW9uIGlzbid0IGlzc3VlZCBhbmQgcGFpZFxyXG4gIGlmICghc2hvdWxkU2hvd1BheW1lbnRzKSB7XHJcbiAgICBpZiAoYXBwbGljYXRpb24/LmVmZmVjdGl2ZV9wb2xpY3lfZGF0ZSAmJiBhcHBsaWNhdGlvbj8ucGFpZF9zdGF0dXMgIT09ICdQYWlkJykge1xyXG4gICAgICAvLyBTaG93IGEgcGxhY2Vob2xkZXIgd2l0aCBleHBsYW5hdGlvbiBmb3IgYXBwbGljYXRpb25zIHdpdGggZWZmZWN0aXZlIGRhdGUgYnV0IG5vdCBwYWlkXHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWhpc3RvcnktY29udGFpbmVyIGZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlBheW1lbnQgdHJhY2tpbmcgYmVnaW5zIGFmdGVyIGZpcnN0IHBheW1lbnQ8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIC8vIE90aGVyd2lzZSBzaG93IG5vdGhpbmdcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBcclxuICAvLyBDcmVhdGUgYSBzaW1wbGVyIGRpc3BsYXkgaWYgbG9hZGluZyBpcyB0YWtpbmcgdG9vIGxvbmdcclxuICBpZiAobG9hZGluZyAmJiBwYXltZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1oaXN0b3J5LWNvbnRhaW5lciBmbGV4IGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+TG9hZGluZy4uLjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG4gIFxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWhpc3RvcnktY29udGFpbmVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtcmVkLTUwMFwiPntlcnJvcn08L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuICBcclxuICAvLyBSZW5kZXIgdGhlIGFjdHVhbCBjb21wb25lbnRcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwYXltZW50LWhpc3RvcnktY29udGFpbmVyXCI+XHJcbiAgICAgIHtyZW5kZXJQYXltZW50SW5kaWNhdG9ycygpfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbi8vIFBheW1lbnQgaGlzdG9yeSBsZWdlbmQgY29tcG9uZW50XHJcbmV4cG9ydCBjb25zdCBQYXltZW50SGlzdG9yeUxlZ2VuZCA9ICgpID0+IHtcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyB0ZXh0LXhzIHRleHQtZ3JheS02MDAgbXQtMiBtYi00XCI+XHJcbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+UGF5bWVudCBMZWdlbmQ6PC9zcGFuPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBiZy1bIzEzNzMzM10gbXItMVwiPjwvZGl2PlxyXG4gICAgICAgIDxzcGFuPlBhaWQ8L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBiZy1bIzFhNzNlOF0gbXItMVwiPjwvZGl2PlxyXG4gICAgICAgIDxzcGFuPlBlbmRpbmc8L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBiZy1bI2M1MjIxZl0gbXItMVwiPjwvZGl2PlxyXG4gICAgICAgIDxzcGFuPk1pc3NlZDwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNCBoLTQgcm91bmRlZC1mdWxsIGJnLVsjZWE4NjAwXSBtci0xXCI+PC9kaXY+XHJcbiAgICAgICAgPHNwYW4+TlNGPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy00IGgtNCByb3VuZGVkLWZ1bGwgYmctWyM4MDg2OGJdIG1yLTFcIj48L2Rpdj5cclxuICAgICAgICA8c3Bhbj5XYWl2ZWQ8L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIG1yLTFcIj48L2Rpdj5cclxuICAgICAgICA8c3Bhbj5Ob3QgU2V0PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07ICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZUNhbGxiYWNrIiwiY3JlYXRlQ2xpZW50IiwiZ2V0UGF5bWVudEluZGljYXRvckNsYXNzIiwidG9hc3QiLCJQb3BvdmVyIiwiUG9wb3ZlckNvbnRlbnQiLCJQb3BvdmVyVHJpZ2dlciIsIkJ1dHRvbiIsIkNhbGVuZGFyIiwiZm9ybWF0IiwiQ2FsZW5kYXJJY29uIiwiRXJyb3JCb3VuZGFyeSIsIlBheW1lbnRJbmRpY2F0b3IiLCJzdGF0dXMiLCJtb250aE51bWJlciIsImFwcGxpY2F0aW9uSWQiLCJwYXltZW50RGF0ZSIsIm9uUGF5bWVudFVwZGF0ZWQiLCJpc1VwZGF0aW5nIiwic2V0SXNVcGRhdGluZyIsInNob3dQYXltZW50TWVudSIsInNldFNob3dQYXltZW50TWVudSIsInNlbGVjdGVkRGF0ZSIsInNldFNlbGVjdGVkRGF0ZSIsIkRhdGUiLCJ1bmRlZmluZWQiLCJpc01vdW50ZWQiLCJjdXJyZW50IiwiZ2V0SW5kaWNhdG9yQ2xhc3NlcyIsImJhc2VDbGFzcyIsImZpcnN0TW9udGhDbGFzcyIsInNpemUiLCJpbmRpY2F0b3JDbGFzcyIsInRvb2x0aXBUaXRsZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImlzQWN0aXZlIiwiY2hlY2tGaXJzdFBheW1lbnQiLCJzdXBhYmFzZSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsInBhaWRfc3RhdHVzIiwiZWZmZWN0aXZlX3BvbGljeV9kYXRlIiwidXBkYXRlUGF5bWVudFN0YXR1cyIsImVyciIsImNvbnNvbGUiLCJuZXdTdGF0dXMiLCJkYXRlIiwiYXBwRGF0YSIsImFwcEVycm9yIiwic2hvdWxkVXBkYXRlUGFpZFN0YXR1cyIsIm5ld1BhaWRTdGF0dXMiLCJ0cmFja1Jlc3VsdCIsInRyYWNrRXJyb3IiLCJycGMiLCJwX2FwcGxpY2F0aW9uX2lkIiwicF9tb250aF9udW1iZXIiLCJwX3BheW1lbnRfc3RhdHVzIiwicF9wYXltZW50X2RhdGUiLCJ0b0lTT1N0cmluZyIsInBfdXBkYXRlX3BhaWRfc3RhdHVzIiwicF9uZXdfcGFpZF9zdGF0dXMiLCJtYW51YWxTeW5jUGF5bWVudFN0YXR1cyIsInN1Y2Nlc3MiLCJsb2ciLCJtZXNzYWdlIiwibmV4dF9wYXltZW50IiwiZXJyb3JNc2ciLCJtb250aEZpZWxkIiwidXBkYXRlRmllbGRzIiwicG9saWN5X2hlYWx0aCIsInVwZGF0ZSIsIkVycm9yIiwicGF5bWVudEVycm9yIiwidXBzZXJ0IiwiYXBwbGljYXRpb25faWQiLCJtb250aF9udW1iZXIiLCJwYXltZW50X3N0YXR1cyIsInBheW1lbnRfZGF0ZSIsInVwZGF0ZWRfYXQiLCJvbkNvbmZsaWN0IiwicGF5bWVudEVyciIsIm5leHRNb250aCIsIm5leHREYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJuZXh0RXJyb3IiLCJvcGVuIiwib25PcGVuQ2hhbmdlIiwiYXNDaGlsZCIsImRpdiIsImNsYXNzTmFtZSIsInRpdGxlIiwic3R5bGUiLCJib3JkZXIiLCJib3hTaGFkb3ciLCJiYWNrZ3JvdW5kQ29sb3IiLCJvcGFjaXR5IiwibGFiZWwiLCJ2YXJpYW50IiwiZGlzYWJsZWQiLCJzcGFuIiwibW9kZSIsInNlbGVjdGVkIiwib25TZWxlY3QiLCJpbml0aWFsRm9jdXMiLCJzdmciLCJ4bWxucyIsImZpbGwiLCJ2aWV3Qm94IiwiY2lyY2xlIiwiY3giLCJjeSIsInIiLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsInBhdGgiLCJkIiwib25DbGljayIsIlBheW1lbnRHcmlkIiwiYXBwbGljYXRpb24iLCJwYXltZW50cyIsInNldFBheW1lbnRzIiwibG9hZGluZyIsInNldExvYWRpbmciLCJmZXRjaFBheW1lbnRzIiwiaWQiLCJvcmRlciIsImluY2x1ZGVzIiwicmVmcmVzaFBheW1lbnRzIiwibW9udGhzIiwiQXJyYXkiLCJsZW5ndGgiLCJfIiwiaSIsImdldE1vbnRoU3RhdHVzIiwibW9udGgiLCJwYXltZW50IiwiZmluZCIsInAiLCJtb250aEtleSIsImdldFBheW1lbnREYXRlIiwiYXV0b1VwZGF0ZUZpcnN0UGF5bWVudCIsInNob3VsZEF1dG9NYXJrRmlyc3RQYXltZW50Iiwic29tZSIsInJwY0NoZWNrIiwicnBjQ2hlY2tFcnJvciIsImNvdW50IiwiZXhpc3RpbmdQYXltZW50cyIsImluc2VydCIsIm1vbnRoXzEiLCJtYXAiLCJQYXltZW50VXBkYXRlTW9kYWwiLCJjdXJyZW50U3RhdHVzIiwiY3VycmVudFBheW1lbnREYXRlIiwib25DbG9zZSIsInNldFN0YXR1cyIsInNldFBheW1lbnREYXRlIiwiaXNTYXZpbmciLCJzZXRJc1NhdmluZyIsImhhbmRsZVNhdmUiLCJmZXRjaEVycm9yIiwidXBkYXRlUG9saWN5SGVhbHRoIiwiaDMiLCJidXR0b24iLCJodG1sRm9yIiwidmFsdWUiLCJvbkNoYW5nZSIsImUiLCJ0YXJnZXQiLCJvcHRpb24iLCJpbnB1dCIsInR5cGUiLCJhcHBsaWNhdGlvbnMiLCJhcHAiLCJtaXNzZWRQYXltZW50cyIsImZpbHRlciIsIm5ld1BvbGljeUhlYWx0aCIsInVwZGF0ZUVycm9yIiwiUGF5bWVudExlZ2VuZCIsIlNhZmVQYXltZW50SGlzdG9yeUdyaWQiLCJQYXltZW50SGlzdG9yeUdyaWQiLCJzZXRBcHBsaWNhdGlvbiIsInNldEVycm9yIiwic2hvdWxkU2hvd1BheW1lbnRzIiwic2V0U2hvdWxkU2hvd1BheW1lbnRzIiwibmV4dFBheW1lbnREYXRlcyIsInNldE5leHRQYXltZW50RGF0ZXMiLCJzdGFibGVLZXkiLCJmZXRjaEFwcGxpY2F0aW9uRGV0YWlscyIsInBhaWRTdGF0dXNDaGFuZ2VkIiwiaXNJc3N1ZWRBbmRQYWlkIiwicGF5bWVudERhdGVzIiwiZm9yRWFjaCIsInBvbGxJbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImdldFRvb2x0aXBUZXh0IiwiZm9ybWF0dGVkRGF0ZSIsImhhbmRsZVBheW1lbnRVcGRhdGVkIiwicmVuZGVyUGF5bWVudEluZGljYXRvcnMiLCJQYXltZW50SGlzdG9yeUxlZ2VuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/agent/applications/components/PaymentComponents.tsx\n"));

/***/ })

});