"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6837],{81066:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{color:c="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=r;return(0,n.createElement)("svg",{ref:s,...a,width:i,height:i,stroke:c,strokeWidth:d?24*Number(l)/Number(i):l,className:["lucide",`lucide-${o(e)}`,u].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName=`${e}`,r}},22468:function(e,t,r){r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(81066).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},55715:function(e,t,r){r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(81066).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},54817:function(e,t,r){r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(81066).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},10883:function(e,t,r){r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(81066).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},74697:function(e,t,r){r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(81066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},60291:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let n=r(99920)._(r(2265)).default.createContext(null)},64902:function(e,t,r){r.d(t,{E:function(){return o}});var n=r(2265),a=r(82157);let o=()=>{let[e,t]=(0,n.useState)(null),[r,o]=(0,n.useState)(null),[s,c]=(0,n.useState)(!0),i=(0,a.e)();return(0,n.useEffect)(()=>{(async()=>{let{data:{session:e}}=await i.auth.getSession();o(e),t(e?.user||null),c(!1)})();let{data:{subscription:e}}=i.auth.onAuthStateChange((e,r)=>{o(r),t(r?.user||null),c(!1)});return()=>{e.unsubscribe()}},[i]),{user:e,session:r,loading:s}}},50793:function(e,t,r){r.d(t,{A:function(){return c}});var n=r(82157);let a=[{id:(0,r(28590).Z)(),title:"Demo Chat (Database Setup Required)",messages:[{role:"assistant",content:"Welcome to the AI chat! This is a demo chat because your database tables need to be set up. Please run the migrations to enable full functionality.",timestamp:new Date().toISOString()}],createdAt:new Date().toISOString()}],o=(0,n.e)(),s=e=>e&&("42P01"===e.code||e.message?.includes("does not exist")||e.message?.toLowerCase().includes("relation")&&e.message?.toLowerCase().includes("does not exist")),c={async getChats(){try{let{data:e,error:t}=await o.from("chats").select("*").order("created_at",{ascending:!1});if(t){if(console.error("Error fetching chats:",t),s(t))return console.log("Chats table does not exist, returning mock data"),a;return[]}return await Promise.all(e.map(async e=>{try{let{data:t,error:r}=await o.from("messages").select("*").eq("chat_id",e.id).order("created_at",{ascending:!0});if(r)return console.error(`Error fetching messages for chat ${e.id}:`,r),{id:e.id,title:e.title,messages:[],createdAt:e.created_at};return{id:e.id,title:e.title,messages:t.map(e=>({role:e.role,content:e.content,timestamp:e.created_at})),createdAt:e.created_at}}catch(t){return console.error(`Error processing chat ${e.id}:`,t),{id:e.id,title:e.title,messages:[],createdAt:e.created_at}}}))}catch(e){return console.error("Unexpected error in getChats:",e),a}},async createChat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{let t=e?e.substring(0,30)+(e.length>30?"...":""):`New chat ${new Date().toLocaleDateString()}`,{data:r}=await o.auth.getUser(),n=r?.user?.id;if(!n)return console.error("No user ID found"),null;let{data:c,error:i}=await o.from("chats").insert({title:t,user_id:n}).select().single();if(i){if(console.error("Error creating chat:",i),s(i))return console.log("Chats table does not exist, returning mock chat"),a[0];return null}return{id:c.id,title:c.title,messages:[],createdAt:c.created_at}}catch(e){return console.error("Unexpected error in createChat:",e),a[0]}},async getChat(e){try{if(a.some(t=>t.id===e))return a.find(t=>t.id===e)||null;let{data:t,error:r}=await o.from("chats").select("*").eq("id",e).single();if(r){if(console.error(`Error fetching chat ${e}:`,r),s(r))return console.log("Chats table does not exist, returning mock chat"),a[0];return null}try{let{data:r,error:n}=await o.from("messages").select("*").eq("chat_id",e).order("created_at",{ascending:!0});if(n)return console.error(`Error fetching messages for chat ${e}:`,n),s(n),{id:t.id,title:t.title,messages:[],createdAt:t.created_at};return{id:t.id,title:t.title,messages:r.map(e=>({role:e.role,content:e.content,timestamp:e.created_at})),createdAt:t.created_at}}catch(r){return console.error(`Error processing messages for chat ${e}:`,r),{id:t.id,title:t.title,messages:[],createdAt:t.created_at}}}catch(e){return console.error("Unexpected error in getChat:",e),a[0]}},async addMessage(e,t){try{if(a.some(t=>t.id===e))return console.log("Mock chat detected, simulating successful message add"),!0;let{error:r}=await o.from("messages").insert({chat_id:e,role:t.role,content:t.content,created_at:t.timestamp||new Date().toISOString()});if(r)return console.error(`Error adding message to chat ${e}:`,r),!1;let{error:n}=await o.from("chats").update({updated_at:new Date().toISOString()}).eq("id",e);return n&&console.error(`Error updating chat timestamp for ${e}:`,n),!0}catch(e){return console.error("Unexpected error in addMessage:",e),!1}},async deleteChat(e){try{if(a.some(t=>t.id===e))return console.log("Mock chat detected, simulating successful deletion"),!0;let{error:t,count:r}=await o.from("messages").delete().eq("chat_id",e);t?console.error(`Error deleting messages for chat ${e}:`,t):console.log(`Successfully deleted ${r} messages for chat ${e}`);let{error:n}=await o.from("chats").delete().eq("id",e);if(n)return console.error(`Error deleting chat ${e}:`,n),!1;return console.log(`Successfully deleted chat ${e}`),!0}catch(e){return console.error("Unexpected error in deleteChat:",e),!1}},async updateChatTitle(e,t){try{if(a.some(t=>t.id===e))return console.log("Mock chat detected, simulating successful title update"),!0;let{error:r}=await o.from("chats").update({title:t,updated_at:new Date().toISOString()}).eq("id",e);if(r)return console.error(`Error updating title for chat ${e}:`,r),!1;return!0}catch(e){return console.error("Unexpected error in updateChatTitle:",e),!1}},async deleteMessage(e){try{if(a.some(t=>t.messages.some(t=>t.id===e)))return console.log("Mock message detected, simulating successful deletion"),!0;let{error:t}=await o.from("messages").delete().eq("id",e);if(t)return console.error(`Error deleting message ${e}:`,t),!1;return console.log(`Successfully deleted message ${e}`),!0}catch(e){return console.error("Unexpected error in deleteMessage:",e),!1}}}},82157:function(e,t,r){r.d(t,{e:function(){return a}});var n=r(64392);let a=()=>(0,n.createClientComponentClient)({supabaseUrl:"https://iufyuzmigirugcufrtvt.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml1Znl1em1pZ2lydWdjdWZydHZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMzQxMjcsImV4cCI6MjA2MDYxMDEyN30.V38OGEX1Oy3gFfu5ClGWRk3xYAhb_DVr-5ojOQZ1UfU"});(0,n.createClientComponentClient)({supabaseUrl:"https://iufyuzmigirugcufrtvt.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml1Znl1em1pZ2lydWdjdWZydHZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMzQxMjcsImV4cCI6MjA2MDYxMDEyN30.V38OGEX1Oy3gFfu5ClGWRk3xYAhb_DVr-5ojOQZ1UfU"})},28590:function(e,t,r){let n;r.d(t,{Z:function(){return c}});var a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o=new Uint8Array(16),s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));var c=function(e,t,r){if(a.randomUUID&&!t&&!e)return a.randomUUID();let c=(e=e||{}).random??e.rng?.()??function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(o)}();if(c.length<16)throw Error("Random bytes length must be >= 16");if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=c[e];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(c)}}}]);