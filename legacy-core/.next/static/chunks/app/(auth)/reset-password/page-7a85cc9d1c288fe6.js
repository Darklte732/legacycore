(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5277],{77846:function(e,s,r){Promise.resolve().then(r.bind(r,45907))},16463:function(e,s,r){"use strict";var t=r(71169);r.o(t,"redirect")&&r.d(s,{redirect:function(){return t.redirect}}),r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},45907:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return o}});var t=r(57437),a=r(2265),n=r(16463),i=r(82157);function o(){let[e,s]=(0,a.useState)(""),[r,o]=(0,a.useState)(""),[u,d]=(0,a.useState)(!1),[c,l]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),p=(0,n.useRouter)(),f=(0,i.e)();(0,a.useEffect)(()=>{(async()=>{try{let{data:e,error:s}=await f.auth.getSession();if(s){console.error("Error getting session:",s),l("Invalid or expired reset link. Please request a new password reset.");return}e.session||(l("No active session. Please request a new password reset."),p.push("/forgot-password"))}catch(e){console.error("Error checking session:",e),l("An error occurred. Please try again.")}})()},[f,p]);let b=async s=>{if(s.preventDefault(),e!==r){l("Passwords do not match");return}if(e.length<8){l("Password must be at least 8 characters");return}try{d(!0),l(null);let{error:s}=await f.auth.updateUser({password:e});if(s)throw s;h("Password updated successfully!"),setTimeout(()=>{p.push("/login")},3e3)}catch(e){console.error("Error resetting password:",e),l(e.message||"An error occurred during password reset")}finally{d(!1)}};return(0,t.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-100 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"LegacyCore"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Life Insurance Management"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Set New Password"}),c&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:c}),m&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:m}),(0,t.jsx)("form",{onSubmit:b,children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,t.jsx)("input",{id:"password",type:"password",value:e,onChange:e=>s(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter new password",minLength:8}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,t.jsx)("input",{id:"confirmPassword",type:"password",value:r,onChange:e=>o(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Confirm new password",minLength:8})]}),(0,t.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:u?"Updating...":"Update Password"})]})})]})]})})}},82157:function(e,s,r){"use strict";r.d(s,{e:function(){return a}});var t=r(64392);let a=()=>(0,t.createClientComponentClient)({supabaseUrl:"https://iufyuzmigirugcufrtvt.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml1Znl1em1pZ2lydWdjdWZydHZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMzQxMjcsImV4cCI6MjA2MDYxMDEyN30.V38OGEX1Oy3gFfu5ClGWRk3xYAhb_DVr-5ojOQZ1UfU"});(0,t.createClientComponentClient)({supabaseUrl:"https://iufyuzmigirugcufrtvt.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml1Znl1em1pZ2lydWdjdWZydHZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMzQxMjcsImV4cCI6MjA2MDYxMDEyN30.V38OGEX1Oy3gFfu5ClGWRk3xYAhb_DVr-5ojOQZ1UfU"})}},function(e){e.O(0,[4392,2971,7023,1744],function(){return e(e.s=77846)}),_N_E=e.O()}]);