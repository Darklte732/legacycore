(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6134],{45398:function(e,t,s){Promise.resolve().then(s.bind(s,39393))},6649:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(81066).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},39393:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var r=s(57437),a=s(2265),l=s(28590);s(49493);var n=s(66648),i=s(64902),o=s(55715),c=s(54817),d=s(22468),g=s(74697),h=s(6649),u=s(10883);let x=e=>{let{chats:t=[],activeChat:s=null,onChatSelect:l=()=>{},onNewChat:x=()=>{},onDeleteChat:m=()=>{},onUpdateChatTitle:p=()=>{}}=e,{user:f}=(0,i.E)(),[b,w]=(0,a.useState)(""),[y,v]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[k,C]=(0,a.useState)(""),[S,$]=(0,a.useState)(null),A=b?t.filter(e=>e.title.toLowerCase().includes(b.toLowerCase())):t,D=(e,t,s)=>{e.stopPropagation(),N(t),C(s)},L=e=>{k.trim()&&p(e,k.trim()),N(null)},E=(e,t)=>{"Enter"===e.key?L(t):"Escape"===e.key&&N(null)},T=(e,t)=>{e.stopPropagation(),S===t?(m(t),$(null)):($(t),setTimeout(()=>{$(null)},3e3))},W=e=>{let t=new Date(e),s=new Date;if(t.toDateString()===s.toDateString())return"Today";let r=new Date(s);if(r.setDate(s.getDate()-1),t.toDateString()===r.toDateString())return"Yesterday";let a=new Date(s);return(a.setDate(s.getDate()-7),t>a)?t.toLocaleDateString(void 0,{weekday:"long"}):t.toLocaleDateString(void 0,{month:"short",day:"numeric"})};return(0,r.jsxs)("aside",{className:"flex h-screen flex-col bg-gradient-to-b from-gray-900 via-gray-850 to-gray-800 text-white w-full shadow-xl",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-blue-900/40 bg-gradient-to-br from-gray-900 to-blue-900/40",children:[(0,r.jsxs)("div",{className:"flex items-center mb-5",children:[(0,r.jsx)("div",{className:"w-11 h-11 mr-3 relative flex-shrink-0",children:(0,r.jsx)(n.default,{src:"/logo.png",alt:"LegacyCore Logo",width:44,height:44,className:"object-contain"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-bold text-xl text-white",children:"Agent AI"}),(0,r.jsx)("p",{className:"text-xs text-blue-200/70 font-light",children:"Powered by LegacyCore"})]})]}),(0,r.jsxs)("button",{onClick:x,className:"w-full flex items-center justify-center py-3 px-4 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-md transition-all duration-200 ease-in-out transform hover:scale-[1.02] hover:shadow-lg border border-blue-500/30",children:[(0,r.jsx)(o.Z,{size:18,className:"mr-2"}),(0,r.jsx)("span",{className:"font-medium",children:"New Chat"})]})]}),f&&(0,r.jsx)("div",{className:"border-b border-blue-900/20 p-4 bg-gray-800/40",children:(0,r.jsxs)("div",{className:"flex items-center",children:[f.avatar_url?(0,r.jsx)(n.default,{src:f.avatar_url,alt:f.user_metadata?.name||"User",width:38,height:38,className:"rounded-full mr-3 ring-2 ring-blue-500/30 border border-white/10"}):(0,r.jsx)("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mr-3 shadow-md border border-white/10",children:(0,r.jsx)("span",{className:"text-sm font-semibold text-white",children:(f.user_metadata?.name||f.email||"U").charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"text-sm truncate",children:[(0,r.jsx)("p",{className:"font-semibold text-white",children:f.user_metadata?.name||"Agent"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs truncate",children:f.email})]})]})}),(0,r.jsx)("div",{className:"p-4 border-b border-blue-900/20 bg-gray-800/20",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(c.Z,{size:16,className:"text-blue-300/70"})}),(0,r.jsx)("input",{type:"text",placeholder:"Search chats...",className:"block w-full pl-10 pr-3 py-2.5 rounded-lg bg-gray-700/60 border border-blue-500/20 focus:ring-2 focus:ring-blue-500/70 focus:border-blue-500 focus:outline-none text-sm transition-all duration-200 text-white shadow-inner",value:b,onChange:e=>w(e.target.value)})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-blue-600/40 scrollbar-track-gray-800/40",children:0===A.length?(0,r.jsxs)("div",{className:"p-6 text-center text-gray-400",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-800/80 mb-4",children:(0,r.jsx)(c.Z,{size:24,className:"text-blue-400"})}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-300",children:b?"No chats match your search":"No chats yet"}),(0,r.jsx)("p",{className:"text-xs text-blue-300/50 mt-1",children:b?"Try another search term":"Start a new conversation"})]}):(0,r.jsx)("div",{className:"divide-y divide-blue-900/10",children:A.map(e=>(0,r.jsx)("div",{className:`relative ${s===e.id?"bg-blue-600/20 border-l-4 border-l-blue-500":"hover:bg-gray-700/40 border-l-4 border-l-transparent"} transition-all duration-200 cursor-pointer`,onMouseEnter:()=>v(e.id),onMouseLeave:()=>{v(null),S||$(null)},children:(0,r.jsxs)("div",{className:"px-4 py-3.5",onClick:()=>l(e.id),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[j===e.id?(0,r.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),onBlur:()=>L(e.id),onKeyDown:t=>E(t,e.id),autoFocus:!0,className:"flex-1 px-2 py-1 mr-2 bg-gray-700 text-white border border-blue-500/30 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:e=>e.stopPropagation()}):(0,r.jsx)("h3",{className:"font-medium text-sm truncate text-white",style:{maxWidth:"80%"},children:e.title||"New Chat"}),(0,r.jsx)("span",{className:"text-xs text-blue-300/70",children:W(e.createdAt)})]}),!j&&(0,r.jsx)("p",{className:"text-xs text-gray-400 truncate mt-1",children:e.messages.length>0?e.messages[e.messages.length-1].content.substring(0,50)+(e.messages[e.messages.length-1].content.length>50?"...":""):"No messages yet"}),(y===e.id||S===e.id)&&!j&&(0,r.jsx)("div",{className:"absolute top-2 right-2 flex items-center space-x-1",children:S===e.id?(0,r.jsxs)("div",{className:"flex items-center bg-gray-900/90 rounded-lg overflow-hidden shadow-lg border border-gray-700/50",children:[(0,r.jsxs)("button",{onClick:t=>{t.stopPropagation(),m(e.id),$(null)},className:"px-2 py-1.5 text-xs bg-red-600 hover:bg-red-700 text-white flex items-center",title:"Confirm Delete",children:[(0,r.jsx)(d.Z,{size:14,className:"mr-1"}),"Delete"]}),(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),$(null)},className:"px-2 py-1.5 text-xs bg-gray-700 hover:bg-gray-800 text-white flex items-center",title:"Cancel",children:[(0,r.jsx)(g.Z,{size:14,className:"mr-1"}),"Cancel"]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:t=>D(t,e.id,e.title),className:"p-1.5 rounded-full bg-gray-800/80 hover:bg-blue-600/80 text-gray-400 hover:text-white transition-all duration-200",title:"Edit Chat Title",children:(0,r.jsx)(h.Z,{size:14})}),(0,r.jsx)("button",{onClick:t=>T(t,e.id),className:"p-1.5 rounded-full bg-gray-800/80 hover:bg-red-600/80 text-gray-400 hover:text-white transition-all duration-200",title:"Delete Chat",children:(0,r.jsx)(u.Z,{size:14})})]})})]})},e.id))})}),(0,r.jsx)("div",{className:"p-3 text-center border-t border-blue-900/30 text-xs text-gray-500 bg-gradient-to-t from-gray-900 to-gray-800/70",children:(0,r.jsx)("p",{children:"LegacyCore Agent AI v1.0"})})]})};var m=s(50793);let p=e=>{let{id:t,role:s,content:l,timestamp:n,onDelete:i}=e,[o,c]=(0,a.useState)(!1),[d,g]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:`px-4 py-3 flex ${"user"===s?"justify-end":"justify-start"}`,children:["assistant"===s&&(0,r.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 
          bg-teal-600 text-white mr-3`,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,r.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,r.jsx)("circle",{cx:"15.5",cy:"8.5",r:"1.5"}),(0,r.jsx)("path",{d:"M8.5 14a4 4 0 0 0 7 0"})]})}),(0,r.jsxs)("div",{className:`max-w-[75%] ${"user"===s?"bg-indigo-600 text-white":"bg-gray-800 text-gray-100"} 
        rounded-lg px-4 py-3 shadow-md`,children:[(0,r.jsx)("div",{className:"flex justify-between items-start",children:i&&t&&(0,r.jsx)("div",{className:"flex items-center text-xs opacity-0 group-hover:opacity-100 absolute top-2 right-2",children:(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),d?(c(!0),i&&t&&i(t)):(g(!0),setTimeout(()=>{g(!1)},3e3))},disabled:o,className:`p-1 rounded ${d?"bg-red-600 text-white":"text-gray-400 hover:text-gray-300 hover:bg-gray-700"} transition-colors`,"aria-label":d?"Confirm delete":"Delete message",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]})})})}),(0,r.jsx)("div",{className:"prose prose-invert max-w-none message-content",children:l.includes("<div")||l.includes("<span")||l.includes("<br")||l.includes("<code")||l.includes("list-item")?(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:l},className:"formatted-content"}):(0,r.jsx)("div",{className:"whitespace-pre-wrap",children:l})}),n&&(0,r.jsx)("div",{className:"text-xs mt-2 opacity-75",children:new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),"user"===s&&(0,r.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 
          bg-indigo-600 text-white ml-3`,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})})]})},f=e=>e.includes("Error:")||e.includes("I apologize")||e.includes("sorry")?"error":[/\$\d+(\.\d+)?/g,/\d+%/g,/total:/i,/summary:/i,/statistics:/i,/\|\s*[\w\s]+\s*\|/g,/\b(database|query|result)\b/i].some(t=>t.test(e))?"data":(e.match(/\d+\.\s+/g)||[]).length+(e.match(/^\s*[\*\-\•]\s+/gm)||[]).length>3?"list":"conversation",b=e=>e.replace(/\n{2,}/g,"<br><br>").replace(/\n/g," ").replace(/(\d+\.\s+)([^\n]+)/g,'<span class="text-teal-300">$1</span>$2<br>').replace(/^[\*\-\•]\s+([^\n]+)/gm,"• $1<br>").replace(/"([^"]+)"/g,'<span class="text-indigo-300">"$1"</span>').replace(/!(Important|Note|Warning|Tip):/gi,'<strong class="text-yellow-300">$1:</strong>').replace(/`([^`]+)`/g,'<code class="bg-gray-700 rounded px-1 py-0.5 text-sm">$1</code>'),w=e=>e.replace(/\n{2,}/g,"<br><br>").replace(/(\$\d+(\.\d+)?)/g,'<span class="text-green-400 font-medium">$1</span>').replace(/(\d+%)/g,'<span class="text-indigo-300 font-medium">$1</span>').replace(/\n?(#+)\s+([^\n]+)/g,(e,t,s)=>{let r=t.length;return`<div class="font-bold text-${1===r?"xl":2===r?"lg":"md"} my-3 text-teal-300">${s}</div>`}).replace(/(Total:|Summary:|Results:|Statistics:)(\s*[\w\s\$\d\.\,]+)/gi,'<div class="my-2"><span class="text-teal-300 font-medium">$1</span>$2</div>').replace(/`([^`]+)`/g,'<code class="bg-gray-700 rounded px-1 py-0.5 text-sm">$1</code>').replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank" class="text-blue-400 underline">$1</a>'),y=e=>{let t=e.replace(/"list-item">/g,"");if(t.split(/(\d+\.\s+|\*\s+|\-\s+|\•\s+)/).length<=1)return b(t);let s=t.search(/(\d+\.\s+|\*\s+|\-\s+|\•\s+)/),r=s>0?t.substring(0,s):"",a=t.substring(s);return(r?b(r)+"<br><br>":"")+a.replace(/(\d+\.\s+)([^\n]+)/g,'<div class="list-item"><span class="text-teal-300 font-medium">$1</span>$2</div>').replace(/^[\*\-\•]\s+([^\n]+)/gm,'<div class="list-item">$1</div>').replace(/\n/g,"<br>").replace(/"([^"]+)"/g,'<span class="text-indigo-300">"$1"</span>').replace(/!(Important|Note|Warning|Tip):/gi,'<strong class="text-yellow-300">$1:</strong>')},v=e=>`<div class="text-red-400">${e}</div>`,j=e=>{if(!e)return"";let t=e.trim();switch(f(t=(t=t.replace(/"list-item">([^<\n]*)/g,"<li>$1</li>")).replace(/"list-item">\s*-\s*([^<\n]*)/g,"<li>$1</li>"))){case"data":return w(t);case"list":return y(t);case"error":return v(t);default:return b(t)}};var N=()=>{let{user:e,loading:t}=(0,i.E)(),[s,n]=(0,a.useState)(""),[o,c]=(0,a.useState)([]),[d,g]=(0,a.useState)(!1),[h,u]=(0,a.useState)([]),[f,b]=(0,a.useState)(null),[w,y]=(0,a.useState)(!0),[v,N]=(0,a.useState)(!1),k=(0,a.useRef)(null);(0,a.useRef)(null);let C=(0,a.useRef)(null);(0,a.useRef)(null),(0,a.useRef)(null);let[S,$]=(0,a.useState)(""),[A,D]=(0,a.useState)({messageCount:0,lastAction:"Initial load"});(0,a.useEffect)(()=>{t||(async()=>{if(!e){u([]),y(!1);return}y(!0);try{let e=await m.A.getChats();u(e),e.length>0&&!f&&(b(e[0].id),c(e[0].messages))}catch(e){console.error("Error loading chats:",e)}finally{y(!1)}})()},[e,t]),(0,a.useEffect)(()=>{$((0,l.Z)()),k.current&&(k.current.scrollTop=k.current.scrollHeight)},[]),(0,a.useEffect)(()=>{if(k.current){let e=setTimeout(()=>{let e=k.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},100);return()=>clearTimeout(e)}},[o,d]),(0,a.useEffect)(()=>{let e=e=>{"/"===e.key&&document.activeElement!==C.current&&(e.preventDefault(),C.current?.focus())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let L=async(t,s)=>{console.log("Attempting to connect to webhook with:",{message:t,sessionId:s});try{let r=await fetch("https://n8n-mybh5-u38603.vm.elestio.app/webhook/AICHAT",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({message:t,sessionId:s,agentId:e?.id||"",timestamp:new Date().toISOString()})});if(console.log("Webhook response status:",r.status),r.status>=200&&r.status<300){let e=await r.json().catch(()=>({}));return console.log("Webhook raw response data:",e),{success:!0,data:e}}{let e=await r.text().catch(()=>"Unknown error");return console.error(`Webhook error: ${r.status}`,e),{success:!1,error:`Webhook error: ${r.status}`,details:e}}}catch(e){return console.error("Webhook connection error:",e),{success:!1,error:"Failed to connect to webhook",details:e.message||"Unknown error occurred"}}},E=async()=>{if(e)try{let e=await m.A.createChat();if(!e){console.error("Failed to create new chat");return}u([e,...h]),b(e.id),c([]),D({messageCount:0,lastAction:"Created new chat"})}catch(e){console.error("Error creating new chat:",e)}},T=async e=>{b(e);let t=h.find(t=>t.id===e);if(t)c(t.messages);else{let t=await m.A.getChat(e);t&&c(t.messages)}D({messageCount:t?.messages.length||0,lastAction:"Selected chat"})},W=async e=>{let t=h.filter(t=>t.id!==e);u(t),f===e&&(t.length>0?(b(t[0].id),c(t[0].messages)):(b(null),c([])));try{if(console.log(`Attempting to delete chat ${e} and its messages...`),await m.A.deleteChat(e))console.log(`Successfully deleted chat ${e}`);else{console.error("Failed to delete chat from Supabase");let t=await m.A.getChats();if(u(t),f===e&&t.some(t=>t.id===e)){b(e);let s=t.find(t=>t.id===e);s&&c(s.messages)}}}catch(e){console.error("Error deleting chat:",e)}},I=async(e,t)=>{await m.A.updateChatTitle(e,t)&&u(h.map(s=>s.id===e?{...s,title:t}:s))},M=async e=>{if(e&&e.preventDefault(),!s.trim())return;if(!f){let e=await m.A.createChat(s);if(e)b(e.id),u([e,...h]);else{console.error("Failed to create new chat");return}}g(!0);let t={role:"user",content:s,timestamp:new Date().toISOString()},r=[...o,t];c(r),await m.A.addMessage(f,t),n(""),D({messageCount:r.length,lastAction:"Added user message"});try{let e=await L(s,S);if(e){let t;if(e.success&&e.data){if("string"==typeof e.data)t=e.data;else if(e.data.response)t=e.data.response;else if(e.data.output)t=e.data.output;else if(e.data.text)t=e.data.text;else if(e.data.message)t=e.data.message;else try{t=JSON.stringify(e.data)}catch(e){t="Received data in an unexpected format."}}else t=e.error?`Error: ${e.error}. ${e.details||""}`:"No readable response received from the assistant.";let a=j(t),l={role:"assistant",content:a,timestamp:new Date().toISOString()},n=[...r,l];if(c(n),await m.A.addMessage(f,l),D({messageCount:n.length,lastAction:"Added assistant response"}),1===r.length){let e=s.length>30?`${s.substring(0,30)}...`:s;await m.A.updateChatTitle(f,e);let t=h.map(t=>t.id===f?{...t,title:e,messages:n}:t);u(t)}else{let e=h.map(e=>e.id===f?{...e,messages:n}:e);u(e)}}}catch(t){console.error("Error sending message to webhook:",t);let e={role:"assistant",content:"I apologize, but I encountered an error while processing your request. Please try again later.",timestamp:new Date().toISOString()};c([...r,e]),await m.A.addMessage(f,e)}finally{g(!1)}},z=async e=>{if(f)try{if(console.log(`Attempting to delete message ${e}...`),await m.A.deleteMessage(e)){console.log(`Successfully deleted message ${e}`);let t=o.filter(t=>t.id!==e);c(t);let s=h.map(t=>t.id===f?{...t,messages:t.messages.filter(t=>t.id!==e)}:t);u(s),D({messageCount:t.length,lastAction:"Deleted message"})}else console.error(`Failed to delete message ${e}`)}catch(e){console.error("Error deleting message:",e)}};return(0,r.jsxs)("div",{className:"h-full flex flex-col bg-gray-900 text-white",children:[!1,(0,r.jsxs)("div",{className:"flex flex-grow overflow-hidden",children:[(0,r.jsx)("div",{className:"w-64 border-r border-gray-800 hidden lg:block overflow-hidden",children:(0,r.jsx)(x,{chats:h,activeChat:f,onChatSelect:T,onNewChat:E,onDeleteChat:W,onUpdateChatTitle:I})}),(0,r.jsxs)("div",{className:"flex-grow flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"lg:hidden bg-gray-800 p-4 flex items-center border-b border-gray-700",children:[(0,r.jsx)("button",{onClick:()=>N(!0),className:"p-2 mr-2 rounded hover:bg-gray-700 transition-colors",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,r.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,r.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"LegacyChat"})]}),(0,r.jsx)("div",{className:"flex-grow overflow-y-auto",ref:k,children:0===o.length?(0,r.jsxs)("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-indigo-600 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),(0,r.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Welcome to LegacyChat"}),(0,r.jsx)("p",{className:"text-gray-400 max-w-md",children:"Ask me anything about insurance, policies, or how I can assist you with your clients."})]}):(0,r.jsxs)("div",{children:[o.map((e,t)=>(0,r.jsx)(p,{id:e.id,role:e.role,content:e.content,timestamp:e.timestamp,onDelete:z},`${f}-${t}`)),d&&(0,r.jsxs)("div",{className:"px-4 py-3 flex justify-start",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 bg-teal-600 text-white mr-3",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,r.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,r.jsx)("circle",{cx:"15.5",cy:"8.5",r:"1.5"}),(0,r.jsx)("path",{d:"M8.5 14a4 4 0 0 0 7 0"})]})}),(0,r.jsx)("div",{className:"max-w-[75%] bg-gray-800 text-gray-100 rounded-lg px-4 py-3 shadow-md",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"typing-indicator",children:[(0,r.jsx)("span",{className:"typing-dot"}),(0,r.jsx)("span",{className:"typing-dot"}),(0,r.jsx)("span",{className:"typing-dot"})]}),(0,r.jsx)("span",{children:"Thinking..."})]})})]})]})}),(0,r.jsx)("div",{className:"border-t border-gray-800 p-4",children:(0,r.jsxs)("form",{onSubmit:M,className:"flex items-end gap-2",children:[(0,r.jsx)("div",{className:"flex-grow relative",children:(0,r.jsx)("textarea",{value:s,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),M())},placeholder:"Type your message...",rows:1,className:"w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-white resize-none"})}),(0,r.jsx)("button",{type:"submit",disabled:d||!s.trim(),className:`p-3 rounded-lg ${d||!s.trim()?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"} transition-colors`,children:d?(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,r.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})})]}),v&&(0,r.jsxs)("div",{className:"fixed inset-0 z-40 lg:hidden",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>N(!1)}),(0,r.jsx)("div",{className:"fixed inset-y-0 left-0 w-64 bg-gray-800 z-50 shadow-xl",children:(0,r.jsx)(x,{chats:h,activeChat:f,onChatSelect:e=>{T(e),N(!1)},onNewChat:()=>{E(),N(!1)},onDeleteChat:W,onUpdateChatTitle:I})})]})]})]})}},49493:function(){}},function(e){e.O(0,[5330,4392,6648,6837,2971,7023,1744],function(){return e(e.s=45398)}),_N_E=e.O()}]);