(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5280],{53418:function(e,t,a){Promise.resolve().then(a.bind(a,52293))},52293:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var r=a(57437),i=a(2265),s=a(22023),n=a(54817),l=a(4086),o=a(71568),d=a(47390),c=a(36356),u=a(71976),m=a(77209),x=a(89733),h=a(77515),b=a(42365),f=a(64289),g=a(10883),p=a(82157),y=a(78068);let v=()=>{let[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)(!0),[s,n]=(0,i.useState)(null),l=(0,p.e)(),{toast:o}=(0,y.pm)(),d=async e=>{try{r(!0),n(null);let{data:{session:a}}=await l.auth.getSession();if(!a)throw Error("No active session found");let{data:i,error:s}=await l.rpc("get_attachments_with_details",{p_user_id:a.user.id,p_carrier_id:e||null});if(s)throw s;if(i)t(i||[]);else{let{data:e,error:r}=await l.from("attachments").select(`
            *,
            carrier:carriers(name)
          `).eq("user_id",a.user.id).order("created_at",{ascending:!1});if(r)throw r;let i=e?.map(e=>({...e,carrier_name:e.carrier?.name||null}));t(i||[])}}catch(e){console.error("Error fetching attachments:",e),n(e instanceof Error?e:Error("Unknown error occurred"))}finally{r(!1)}},c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{r(!0),n(null);let{data:{session:a}}=await l.auth.getSession();if(!a)throw Error("No active session found");let{data:i,error:s}=await l.rpc("get_recent_attachments_with_urls",{p_user_id:a.user.id,p_limit:e});if(s)throw s;return t(i||[]),i}catch(e){return console.error("Error fetching recent attachments:",e),n(e instanceof Error?e:Error("Unknown error occurred")),[]}finally{r(!1)}};(0,i.useEffect)(()=>{d()},[]);let u=async e=>{try{let{data:{session:t}}=await l.auth.getSession();if(!t)throw Error("No active session found");let a=`${t.user.id}/${Date.now()}-${e.name}`,{data:r,error:i}=await l.storage.from("attachments").upload(a,e);if(i)throw i;let{data:{publicUrl:s}}=l.storage.from("attachments").getPublicUrl(a);return s}catch(e){return console.error("Error uploading file:",e),n(e instanceof Error?e:Error("File upload failed")),null}},m=async(e,t)=>{try{r(!0);let{data:{session:a}}=await l.auth.getSession();if(!a)throw Error("No active session found");let i=null,s=null,n=null;t&&(i=await u(t),s=t.name,n=t.size);let{data:c,error:m}=await l.from("profiles").select("organization_id").eq("id",a.user.id).single();if(m)throw m;let x=null;if(e.carrier){let{data:t,error:a}=await l.from("carriers").select("id").eq("name",e.carrier).single();!a&&t&&(x=t.id)}let h=null,b=null,f=null,g=null,p=null,y=null;if("draft_return"===e.attachmentType&&e.content){let t=e.content,a=t.match(/Initial Return Date\s*-\s*([0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4})/i);a&&a[1]&&(h=a[1]);let r=t.match(/Second Return Date\s*-\s*([0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4})/i);r&&r[1]&&(b=r[1]);let i=t.match(/Product Name\s*-\s*([^\n]+)/i);i&&i[1]&&(f=i[1].trim());let s=t.match(/Producer ID\s*-\s*([^\n]+)/i);s&&s[1]&&(g=s[1].trim());let n=t.match(/Producer Name\s*-\s*([^\n]+)/i);n&&n[1]&&(p=n[1].trim()),y=b?"Not Applicable":"Payment Failed"}console.log("Submitting attachment with data:",{title:e.title,carrier:e.carrier,type:e.attachmentType,policyNumber:e.policyNumber,amount:e.amount});let v=e.effectiveDate?new Date(e.effectiveDate).toISOString():null,j=h?new Date(h).toISOString():null,w=b?new Date(b).toISOString():null,{data:N,error:k}=await l.rpc("create_attachment_with_details",{p_organization_id:c.organization_id,p_user_id:a.user.id,p_client_id:null,p_policy_id:null,p_carrier_id:x,p_title:e.title||"Untitled Attachment",p_description:null,p_attachment_type:e.attachmentType||"other",p_file_url:i,p_file_name:s,p_file_size:n?parseInt(n.toString()):null,p_content:e.content||null,p_policy_number:e.policyNumber||null,p_reason:e.reason||null,p_amount:e.amount?parseFloat(e.amount.toString()):null,p_effective_date:v,p_insured_name:e.insuredName||null,p_status:y,p_return_date:j,p_second_return_date:w,p_product_name:f,p_producer_id:g,p_producer_name:p});if(k)throw console.error("Error from RPC call:",k),k;if("draft_return"===e.attachmentType&&e.policyNumber)try{let t="Not Applicable";b&&(t="Not Applicable"),await l.rpc("update_application_on_draft_return",{p_attachment_id:N,p_policy_number:e.policyNumber,p_insured_name:e.insuredName||null,p_reason:e.reason||null,p_amount:e.amount?parseFloat(e.amount.toString()):null,p_return_date:j,p_second_return_date:w,p_commission_status:t}),o({title:"Application Updated",description:`The policy ${e.policyNumber} has been updated with the return information`})}catch(e){console.error("Error updating application:",e),o({title:"Warning",description:"Attachment saved but failed to update application data",variant:"destructive"})}return await d(),o({title:"Success",description:"Attachment data saved successfully"}),N}catch(e){return console.error("Error adding attachment:",e),n(e instanceof Error?e:Error("Unknown error occurred")),o({title:"Error",description:"Failed to save attachment data",variant:"destructive"}),null}finally{r(!1)}},x=async a=>{try{r(!0);let{data:i,error:s}=await l.from("attachments").select("file_url, file_name").eq("id",a).single();if(s)throw s;if(i?.file_url){let e=i.file_url.split("/").pop()||"",{error:t}=await l.storage.from("attachments").remove([e]);t&&console.error("Error deleting file:",t)}let{error:n}=await l.from("attachment_details").delete().eq("attachment_id",a);if(n)throw n;let{error:d}=await l.from("attachments").delete().eq("id",a);if(d)throw d;return t(e.filter(e=>e.id!==a)),o({title:"Success",description:"Attachment deleted successfully"}),!0}catch(e){return console.error("Error deleting attachment:",e),n(e instanceof Error?e:Error("Unknown error occurred")),o({title:"Error",description:"Failed to delete attachment",variant:"destructive"}),!1}finally{r(!1)}};return{attachments:e,loading:a,error:s,fetchAttachments:d,fetchRecentAttachmentsWithUrls:c,addAttachment:m,deleteAttachment:x}};var j=a(16053),w=a(79055);function N(e){let{onSelect:t,carrierId:a}=e,{attachments:n,loading:l,error:o,fetchAttachments:d,deleteAttachment:c}=v(),[u,m]=(0,i.useState)([]);(0,i.useEffect)(()=>{d()},[]),(0,i.useEffect)(()=>{n&&(a&&"all"!==a?m(n.filter(e=>e.carrier_name===a||e.carrier===a)):m(n))},[a,n]);let p=async(e,t)=>{t.stopPropagation(),window.confirm("Are you sure you want to delete this attachment?")&&await c(e)},y=e=>{try{return(0,j.B)(new Date(e),new Date,{addSuffix:!0})}catch{return e}},N=e=>{switch(e){case"draft_return":return(0,r.jsx)(w.C,{variant:"destructive",children:"Draft Return"});case"policy_update":return(0,r.jsx)(w.C,{variant:"secondary",children:"Policy Update"});case"client_communication":return(0,r.jsx)(w.C,{variant:"outline",children:"Client Communication"});default:return(0,r.jsx)(w.C,{variant:"outline",children:"Other"})}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow h-full",children:[(0,r.jsxs)("div",{className:"border-b p-4 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"font-semibold",children:a&&"all"!==a?`${a} Attachments`:"All Attachments"}),(0,r.jsx)(x.z,{size:"sm",variant:"outline",onClick:()=>d(),className:"text-xs",children:"Refresh"})]}),l?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:(0,r.jsx)("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})}),(0,r.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading attachments..."})]}):o?(0,r.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center text-center",children:[(0,r.jsx)(h.Z,{className:"h-8 w-8 text-red-500 mb-2"}),(0,r.jsx)("p",{className:"text-red-500 font-medium",children:"Error loading attachments"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1 mb-4",children:"There was a problem fetching your attachments"}),(0,r.jsx)(x.z,{variant:"outline",size:"sm",onClick:()=>d(),children:"Try Again"})]}):u.length>0?(0,r.jsx)("div",{className:"divide-y max-h-[600px] overflow-y-auto",children:u.map(e=>(0,r.jsx)("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800/40 cursor-pointer transition-colors duration-150 border-l-4 border-transparent hover:border-blue-400 dark:hover:border-blue-500",onClick:()=>t(e),children:(0,r.jsxs)("div",{className:"flex justify-between items-start gap-3",children:[(0,r.jsxs)("div",{className:"flex gap-3 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:`p-2 rounded flex-shrink-0 ${"draft_return"===e.attachment_type?"bg-red-100 dark:bg-red-900/40":"bg-blue-100 dark:bg-blue-900/40"}`,children:"draft_return"===e.attachment_type?(0,r.jsx)(h.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400"}):e.file_url?(0,r.jsx)(s.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}):(0,r.jsx)(b.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 items-center mb-1",children:[(0,r.jsx)("h3",{className:"font-medium text-sm truncate dark:text-gray-100",children:e.title}),e.attachment_type&&N(e.attachment_type),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 ml-auto",children:[new Date(e.created_at).getTime()>Date.now()-864e5&&(0,r.jsx)(w.C,{variant:"outline",className:"text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 border-green-300 dark:border-green-800 animate-pulse px-1.5",children:"Updated"}),e.file_url&&(0,r.jsx)(w.C,{variant:"outline",className:"text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300 border-blue-300 dark:border-blue-800 px-1.5",children:"Downloaded"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-300 mt-1 flex flex-wrap gap-x-2",children:[(0,r.jsx)("span",{children:e.carrier_name||"Unknown Carrier"}),e.policy_number&&(0,r.jsxs)("span",{className:"font-mono",children:["#",e.policy_number]}),e.insured_name&&(0,r.jsx)("span",{className:"truncate max-w-[180px]",children:e.insured_name})]}),(0,r.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-400 mt-1 flex items-center gap-1",children:(0,r.jsxs)("span",{children:["Added ",y(e.created_at)]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[e.file_url&&(0,r.jsx)("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"p-1.5 bg-blue-100 dark:bg-blue-900/40 hover:bg-blue-200 dark:hover:bg-blue-800/60 rounded-full transition-colors duration-200 hover:text-blue-700 dark:hover:text-blue-300",title:"Download document",children:(0,r.jsx)(f.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("button",{onClick:t=>p(e.id,t),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors duration-200",title:"Delete attachment",children:(0,r.jsx)(g.Z,{className:"h-4 w-4 text-gray-400 hover:text-red-500 dark:hover:text-red-400"})})]})]})},e.id))}):(0,r.jsxs)("div",{className:"p-12 text-center flex flex-col items-center",children:[(0,r.jsx)(s.Z,{className:"h-10 w-10 text-gray-300 mb-3"}),(0,r.jsx)("p",{className:"text-gray-500 font-medium",children:"No attachments found"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1 max-w-xs",children:a&&"all"!==a?`No attachments found for ${a}. Try another carrier or upload a new attachment.`:"You haven't uploaded any attachments yet. Process an email notification to get started."})]})]})}var k=a(73772),_=a(92853),E=a(58184),C=a(91727),S=a(74109),D=a(4919),A=a(48185),I=a(34446),Z=a(74915);function T(e){let{onSuccess:t}=e,[a,n]=(0,i.useState)({title:"",carrier:"",attachmentType:"other",policyNumber:"",reason:"",amount:void 0,effectiveDate:"",insuredName:"",content:""}),[l,o]=(0,i.useState)(null),[d,c]=(0,i.useState)(!1),[h,b]=(0,i.useState)([]),[f,g]=(0,i.useState)(!1),[p,y]=(0,i.useState)(!1),j=(0,i.useRef)(null),w=(0,i.useRef)(null),{addAttachment:N}=v(),T=e=>{let{name:t,value:a}=e.target;"amount"===t?n(e=>({...e,[t]:a?parseFloat(a):void 0})):n(e=>({...e,[t]:a}))},R=e=>{if(!e)return;let t=[];if(b([]),e.includes("Notification of Client Bank Draft Return")||e.includes("Return Draft Reason")||e.includes("attached in the body of this email is a returned draft report")||e.match(/draft.+return/i)){n(e=>({...e,attachmentType:"draft_return",title:"Notification of Client Bank Draft Return"})),t.push("Detected Draft Return Notification"),e.includes("Americo")||e.includes("@americo.com")?(n(e=>({...e,carrier:"Americo"})),t.push("Set carrier: Americo")):e.includes("Mutual of Omaha")?(n(e=>({...e,carrier:"Mutual of Omaha"})),t.push("Set carrier: Mutual of Omaha")):e.includes("Aetna")&&(n(e=>({...e,carrier:"Aetna"})),t.push("Set carrier: Aetna"));let a=e.match(/Policy Number\s*-\s*([^\n]+)/i)||e.match(/Policy\s*#\s*:\s*([^\n]+)/i)||e.match(/Policy\s*Number\s*:\s*([^\n\r]+)/i);if(a&&a[1]){let e=a[1].trim();n(t=>({...t,policyNumber:e})),t.push(`Extracted Policy Number: ${e}`)}let r=e.match(/Return Draft Reason\s*-\s*([^\n]+)/i)||e.match(/Reason\s*:\s*([^\n\r]+)/i)||e.match(/Return\s*Reason\s*:\s*([^\n\r]+)/i);if(r&&r[1]){let e=r[1].trim();e=e.replace(/&nbsp;/g," ").replace(/&Acirc;/g,""),n(t=>({...t,reason:e})),t.push(`Extracted Reason: ${e}`)}let i=e.match(/Amount\s*-\s*([0-9.]+)/i)||e.match(/Premium\s*:\s*\$?([0-9.]+)/i)||e.match(/Reoccurring Premium\s*-\s*([0-9.]+)/i);if(i&&i[1]){let e=parseFloat(i[1]);n(t=>({...t,amount:e})),t.push(`Extracted Amount: $${e}`)}let s=e.match(/Policy Effective Date\s*-\s*([0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4})/i)||e.match(/Effective Date\s*:\s*([0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4})/i);if(s&&s[1]){let e=s[1],a=e.split("/");if(3===a.length){let r=`${a[2]}-${a[0].padStart(2,"0")}-${a[1].padStart(2,"0")}`;n(e=>({...e,effectiveDate:r})),t.push(`Extracted Effective Date: ${e}`)}}let l=e.match(/Insured Name\s*-\s*([^\n]+)/i)||e.match(/Insured\s*:\s*([^\n\r]+)/i);if(l&&l[1]){let e=l[1].trim();n(t=>({...t,insuredName:e})),t.push(`Extracted Insured Name: ${e}`)}}t.length>0&&(b(t),y(!0))};(0,i.useEffect)(()=>{if(h.length>0){let e=setTimeout(()=>{b([])},8e3);return()=>clearTimeout(e)}},[h]);let z=async e=>{e.preventDefault(),c(!0);try{!p&&a.content&&R(a.content);let e=a.attachmentType;"other"===e&&a.content&&(a.content.includes("draft return")||a.content.includes("Return Draft")||a.content.includes("insufficient funds"))&&(e="draft_return");let r=a.title;r||(r="draft_return"===e?"Notification of Client Bank Draft Return":"Policy Communication"),await N({...a,title:r,attachmentType:e},l||void 0)&&(n({title:"",carrier:"",attachmentType:"other",policyNumber:"",reason:"",amount:void 0,effectiveDate:"",insuredName:"",content:""}),o(null),y(!1),g(!1),j.current&&(j.current.value=""),t&&t())}catch(e){console.error("Error submitting attachment:",e)}finally{c(!1)}},O=async()=>{try{let e=await navigator.clipboard.readText();e&&(n(t=>({...t,content:e})),R(e),w.current&&(w.current.value=e,w.current.focus()))}catch(e){console.error("Failed to read clipboard:",e)}};return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg",children:(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("form",{className:"space-y-4",onSubmit:z,children:[(0,r.jsx)(I.M,{children:h.length>0&&(0,r.jsx)(Z.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:(0,r.jsx)(A.Zb,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 dark:from-green-900/30 dark:to-emerald-900/30 dark:border-green-800/50 shadow-sm overflow-hidden",children:(0,r.jsxs)(A.aY,{className:"pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-green-800 dark:text-green-300 font-medium mb-2",children:[(0,r.jsx)(k.Z,{className:"h-5 w-5 mr-2 text-green-600 dark:text-green-400"}),(0,r.jsx)("span",{children:"Information Successfully Extracted"})]}),(0,r.jsx)(Z.E.ul,{className:"list-disc pl-5 text-sm text-green-700 dark:text-green-300 space-y-1",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:h.map((e,t)=>(0,r.jsx)(Z.E.li,{variants:{hidden:{opacity:0,x:-10},visible:{opacity:1,x:0}},children:e},t))})]})})})}),(0,r.jsxs)("div",{className:"border border-blue-100 dark:border-blue-900/50 rounded-xl p-5 bg-gradient-to-b from-blue-50/50 to-white dark:from-blue-950/30 dark:to-gray-900 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-blue-800 dark:text-blue-200 flex items-center gap-2",children:[(0,r.jsx)(s.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-300"}),"Email Content"]}),(0,r.jsx)(Z.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsxs)(x.z,{type:"button",size:"sm",variant:"outline",onClick:O,className:"text-blue-600 border-blue-200 dark:border-blue-700 dark:text-blue-200 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-all duration-200",children:[(0,r.jsx)(_.Z,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{children:"Paste from Clipboard"})]})})]}),(0,r.jsx)(D.g,{ref:w,name:"content",value:a.content,onChange:e=>{let t=e.target.value;n(e=>({...e,content:t})),p&&t!==a.content&&y(!1),t&&t!==a.content&&R(t)},className:"min-h-[280px] font-mono text-sm bg-white dark:bg-gray-900 border-blue-100 dark:border-blue-900/50 focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-800/30 transition-all duration-200 dark:text-gray-100",placeholder:"Paste the complete email content here...",required:!0}),(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsxs)(x.z,{type:"button",variant:"outline",size:"sm",onClick:()=>g(!f),className:"text-gray-600 dark:text-gray-200 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200",children:[(0,r.jsx)(u.Z,{className:`h-3.5 w-3.5 mr-1.5 transition-transform duration-300 ${f?"rotate-90":""}`}),f?"Hide Details":"Show Extracted Information"]})})]}),(0,r.jsx)(I.M,{children:f&&(0,r.jsxs)(Z.E.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-blue-100 dark:border-blue-900/50 rounded-xl p-5 bg-gradient-to-b from-blue-50/50 to-white dark:from-blue-950/30 dark:to-gray-900 shadow-sm",initial:{opacity:0,height:0,marginTop:0},animate:{opacity:1,height:"auto",marginTop:16},exit:{opacity:0,height:0,marginTop:0},transition:{duration:.3},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-blue-800 dark:text-blue-200",children:"Attachment Title"}),(0,r.jsx)(m.I,{name:"title",value:a.title,onChange:T,placeholder:"e.g. Notification of Client Bank Draft Return",className:"border-blue-100 dark:border-blue-900/50 focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-800/30 transition-all duration-200 dark:text-gray-100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-blue-800 dark:text-blue-200",children:"Upload Document (Optional)"}),(0,r.jsx)("div",{className:"mt-1 flex items-center",children:(0,r.jsxs)("label",{className:"flex justify-center items-center px-4 py-2 bg-white dark:bg-gray-900 rounded-lg border-2    border-dashed border-blue-200 dark:border-blue-800/70 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/30 w-full transition-all duration-200",children:[(0,r.jsx)("input",{type:"file",ref:j,onChange:e=>{e.target.files&&e.target.files.length>0&&o(e.target.files[0])},className:"hidden",accept:".pdf,.doc,.docx,.txt,.html"}),(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(E.Z,{className:"h-5 w-5 text-blue-400 dark:text-blue-400 mr-2"}),(0,r.jsx)("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:l?l.name:"Choose a file"})]})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-blue-800 dark:text-blue-200",children:"Carrier"}),(0,r.jsxs)("select",{name:"carrier",value:a.carrier,onChange:T,className:"w-full p-2 border border-blue-100 dark:border-blue-900/50 rounded-md bg-white dark:bg-gray-900 focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-800/30 transition-all duration-200 dark:text-gray-100",children:[(0,r.jsx)("option",{value:"",children:"Select Carrier"}),(0,r.jsx)("option",{value:"Americo",children:"Americo"}),(0,r.jsx)("option",{value:"Mutual of Omaha",children:"Mutual of Omaha"}),(0,r.jsx)("option",{value:"Aetna",children:"Aetna"}),(0,r.jsx)("option",{value:"CoreBridge",children:"CoreBridge"}),(0,r.jsx)("option",{value:"Gerber",children:"Gerber"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-blue-800 dark:text-blue-200",children:"Attachment Type"}),(0,r.jsxs)("select",{name:"attachmentType",value:a.attachmentType,onChange:T,className:"w-full p-2 border border-blue-100 dark:border-blue-900/50 rounded-md bg-white dark:bg-gray-900 focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-800/30 transition-all duration-200 dark:text-gray-100",children:[(0,r.jsx)("option",{value:"draft_return",children:"Draft Return"}),(0,r.jsx)("option",{value:"policy_update",children:"Policy Update"}),(0,r.jsx)("option",{value:"client_communication",children:"Client Communication"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-blue-800 dark:text-blue-200",children:"Policy Number"}),(0,r.jsx)(m.I,{name:"policyNumber",value:a.policyNumber||"",onChange:T,placeholder:"e.g. AM02380192",className:"border-blue-100 dark:border-blue-900/50 focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-800/30 transition-all duration-200 dark:text-gray-100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-blue-800 dark:text-blue-200",children:"Reason"}),(0,r.jsx)(m.I,{name:"reason",value:a.reason||"",onChange:T,placeholder:"e.g. Insufficient Funds",className:"border-blue-100 dark:border-blue-900/50 focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-800/30 transition-all duration-200 dark:text-gray-100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-blue-800 dark:text-blue-200",children:"Amount"}),(0,r.jsx)(m.I,{name:"amount",value:a.amount||"",onChange:T,placeholder:"e.g. 48.59",type:"number",step:"0.01",className:"border-blue-100 dark:border-blue-900/50 focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-800/30 transition-all duration-200 dark:text-gray-100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-blue-800 dark:text-blue-200",children:"Effective Date"}),(0,r.jsx)(m.I,{name:"effectiveDate",value:a.effectiveDate||"",onChange:T,type:"date",className:"border-blue-100 dark:border-blue-900/50 focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-800/30 transition-all duration-200 dark:text-gray-100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-blue-800 dark:text-blue-200",children:"Insured Name"}),(0,r.jsx)(m.I,{name:"insuredName",value:a.insuredName||"",onChange:T,placeholder:"e.g. Brower, Gerald D",className:"border-blue-100 dark:border-blue-900/50 focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-800/30 transition-all duration-200 dark:text-gray-100"})]}),(0,r.jsx)("div",{className:"col-span-1 md:col-span-2",children:(0,r.jsx)(Z.E.div,{whileHover:{scale:1.01},whileTap:{scale:.99},children:(0,r.jsxs)(x.z,{type:"button",size:"sm",variant:"secondary",onClick:()=>R(a.content),className:"w-full bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white border-0 shadow-sm transition-all duration-200",children:[(0,r.jsx)(C.Z,{className:"h-3.5 w-3.5 mr-1.5"}),(0,r.jsx)("span",{children:"Re-Extract Information"})]})})})]})}),(0,r.jsx)(Z.E.div,{whileHover:{scale:1.01},whileTap:{scale:.98},children:(0,r.jsx)(x.z,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white py-6 text-lg border-0 shadow-md hover:shadow-lg transition-all duration-200 rounded-xl",disabled:d,children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{className:"h-5 w-5 mr-3 animate-spin"}),"Processing..."]}):p?"Process Email & Update Application":"Upload & Process Email"})})]})})})}var R=a(43674),z=a(15862),O=a(66706),P=a(40933),U=a(23787),$=a(64381),M=a(86864),F=a(14909);function V(){let{fetchRecentAttachmentsWithUrls:e,loading:t,error:a}=v(),[s,l]=(0,i.useState)([]),[o,d]=(0,i.useState)([]),[c,b]=(0,i.useState)("all"),[g,p]=(0,i.useState)(""),[j,N]=(0,i.useState)(!1),[k,_]=(0,i.useState)(null),{toast:E}=(0,y.pm)();(0,i.useEffect)(()=>{C()},[]);let C=async()=>{N(!0),_(null);try{console.log("Fetching recent attachments...");let t=await e(15);console.log("Attachment data received:",t),t&&t.length>0?(console.log(`Successfully loaded ${t.length} attachments`),l(t),b("all"),p(""),E({title:"Attachments Loaded",description:`${t.length} attachment(s) found`,duration:3e3})):(console.log("No attachments found"),l([]),_("No attachments available. Upload documents or process emails to get started."))}catch(e){console.error("Error fetching attachments:",e),e?.message?.includes("400")||e?.status===400?_("No attachments available. Upload documents or process emails to get started."):(_("Unable to load attachments. Please try again later."),E({variant:"destructive",title:"Error Loading Attachments",description:e?.message||"Please try again or check your connection",duration:5e3}))}finally{N(!1)}};(0,i.useEffect)(()=>{if(!s||!s.length){d([]);return}console.log(`Filtering ${s.length} attachments. Current filter: ${c}, search: "${g}"`);let e=[...s];if("all"!==c&&(e=e.filter(e=>e.attachment_type===c),console.log(`After type filtering: ${e.length} attachments match type "${c}"`)),g.trim()){let t=g.toLowerCase();e=e.filter(e=>e.title?.toLowerCase().includes(t)||e.policy_number?.toLowerCase().includes(t)||e.insured_name?.toLowerCase().includes(t)||e.carrier_name?.toLowerCase().includes(t)),console.log(`After search filtering: ${e.length} attachments match search "${g}"`)}e.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),console.log(`Setting filtered attachments: ${e.length} items`),d(e)},[s,c,g]);let S=e=>{try{return(0,F.Q)(new Date(e),{addSuffix:!0})}catch{return e}},D=e=>"draft_return"===e.attachment_type?(0,r.jsx)(w.C,{variant:"destructive",className:"px-2 py-1 animate-pulse",children:"Draft Return"}):"policy_update"===e.attachment_type?(0,r.jsx)(w.C,{variant:"secondary",className:"px-2 py-1",children:"Policy Update"}):(0,r.jsx)(w.C,{variant:"outline",className:"px-2 py-1",children:"Document"}),T=e=>{e&&navigator.clipboard.writeText(e).then(()=>{E({title:"Content Copied",description:"Attachment content has been copied to clipboard",duration:3e3})}).catch(e=>{console.error("Failed to copy content:",e)})},V={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:260,damping:20}}};return t||a||s&&s.length,(0,r.jsxs)(A.Zb,{className:"border border-blue-100 shadow-lg bg-gradient-to-br from-white to-blue-50 dark:from-gray-900 dark:to-gray-950 h-full overflow-hidden rounded-xl",children:[(0,r.jsxs)(A.Ol,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-800 dark:to-indigo-800 pb-3 text-white relative overflow-hidden",children:["    ",(0,r.jsx)("div",{className:"absolute inset-0 bg-grid-white/5 [mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.6))]"}),"    ",(0,r.jsx)("div",{className:"absolute right-0 top-0 h-full w-32 bg-gradient-to-l from-indigo-500/20 to-transparent"}),"    ",(0,r.jsxs)("div",{className:"flex flex-col z-10 relative",children:["      ",(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:["        ",(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["          ",(0,r.jsxs)("div",{className:"bg-white/30 rounded-full p-1.5 backdrop-blur-sm",children:["            ",(0,r.jsx)(R.Z,{className:"h-4 w-4 text-white"}),"          "]}),"          ",(0,r.jsx)(A.ll,{className:"text-lg font-medium text-white",children:"Recent Attachments"}),"        "]}),"        ",s.length>0&&(0,r.jsxs)(Z.E.div,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,repeatType:"reverse"},className:"bg-green-500 text-white text-xs px-2 py-0.5 rounded-full flex items-center gap-1",children:["            ",(0,r.jsx)(z.Z,{className:"h-3 w-3"}),"            ",(0,r.jsx)("span",{children:s.length}),"          "]}),"      "]}),"      ",(0,r.jsx)(A.SZ,{className:"text-blue-50 mt-1 font-medium",children:"        Quick access to your recent documents      "}),"    "]}),"  "]}),(0,r.jsxs)("div",{className:"p-3 border-b bg-blue-50/70 dark:bg-blue-950/40 flex gap-2 items-center",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(n.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"}),(0,r.jsx)(m.I,{placeholder:"Search files...",className:"pl-8 text-sm bg-white dark:bg-gray-900 border-blue-200 dark:border-blue-800 focus:ring-blue-400 transition-all duration-200 focus:border-blue-400",value:g,onChange:e=>p(e.target.value)})]}),(0,r.jsxs)(x.z,{size:"sm",variant:"outline",className:`text-xs border-blue-200 hover:bg-blue-50 dark:border-blue-800 dark:hover:bg-blue-900/30 transition-all duration-200 ${j?"animate-pulse":""}`,onClick:C,disabled:j,children:[j?(0,r.jsx)(O.Z,{className:"h-3.5 w-3.5 mr-1 animate-spin"}):(0,r.jsx)(P.Z,{className:"h-3.5 w-3.5 mr-1"}),j?"Refreshing...":"Latest"]})]}),(0,r.jsxs)(M.mQ,{defaultValue:"all",className:"w-full",children:[(0,r.jsx)("div",{className:"px-3 pt-2 pb-1 border-b bg-blue-50/30 dark:bg-blue-950/20",children:(0,r.jsxs)(M.dr,{className:"bg-white dark:bg-gray-800 h-8 p-1 shadow-sm border border-blue-100 dark:border-blue-900 rounded-lg",children:[(0,r.jsx)(M.SP,{value:"all",className:"text-xs font-medium px-2 py-1 h-6 data-[state=active]:bg-blue-600 data-[state=active]:text-white dark:data-[state=active]:bg-blue-600 dark:data-[state=active]:text-white dark:text-white text-gray-700 rounded-md transition-all duration-200",onClick:()=>b("all"),children:"All"}),(0,r.jsx)(M.SP,{value:"draft_return",className:"text-xs font-medium px-2 py-1 h-6 data-[state=active]:bg-blue-600 data-[state=active]:text-white dark:data-[state=active]:bg-blue-600 dark:data-[state=active]:text-white dark:text-white text-gray-700 rounded-md transition-all duration-200",onClick:()=>b("draft_return"),children:"Draft Returns"}),(0,r.jsx)(M.SP,{value:"policy_update",className:"text-xs font-medium px-2 py-1 h-6 data-[state=active]:bg-blue-600 data-[state=active]:text-white dark:data-[state=active]:bg-blue-600 dark:data-[state=active]:text-white dark:text-white text-gray-700 rounded-md transition-all duration-200",onClick:()=>b("policy_update"),children:"Policy Updates"})]})}),(0,r.jsx)(A.aY,{className:"p-0",children:(0,r.jsx)("div",{className:"max-h-[435px] overflow-y-auto",children:t&&!k?(0,r.jsxs)("div",{className:"p-10 text-center",children:[(0,r.jsx)(Z.E.div,{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent text-blue-500",role:"status",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:(0,r.jsx)("span",{className:"sr-only",children:"Loading..."})}),(0,r.jsx)(Z.E.p,{className:"mt-4 text-sm text-blue-600 dark:text-blue-400 font-medium",initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.2},children:"Loading your attachments..."})]}):a&&!k?(0,r.jsxs)("div",{className:"p-10 text-center",children:[(0,r.jsx)(Z.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:(0,r.jsx)(h.Z,{className:"h-10 w-10 text-red-500 mx-auto mb-3 animate-pulse"})}),(0,r.jsx)(Z.E.p,{className:"text-red-500 font-medium",initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.1},children:"Error loading attachments"}),(0,r.jsx)(Z.E.p,{className:"text-sm text-gray-500 mt-2 mb-4",initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.2},children:"There was a problem connecting to the server"}),(0,r.jsx)(Z.E.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,r.jsx)(x.z,{variant:"outline",size:"sm",onClick:C,className:"border-red-200 text-red-700 hover:bg-red-50",children:"Try Again"})})]}):o.length>0?(0,r.jsx)(Z.E.div,{className:"divide-y divide-gray-100 dark:divide-gray-800",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:(0,r.jsx)(I.M,{children:o.map((e,t)=>(0,r.jsx)(Z.E.div,{className:"p-3 hover:bg-blue-50/80 dark:hover:bg-blue-900/40 transition-colors duration-200 group bg-white dark:bg-gray-900/60 border-l-4 border-blue-400 dark:border-blue-500 m-2 rounded-md shadow-sm",variants:V,exit:{opacity:0,x:-20},layout:!0,children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 pt-1",children:D(e)}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors duration-200",children:e.title}),(0,r.jsxs)("div",{className:"flex gap-1",children:[new Date(e.created_at).getTime()>Date.now()-864e5&&(0,r.jsx)(w.C,{variant:"outline",className:"text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 border-green-300 dark:border-green-800 animate-pulse px-1.5 ml-2",children:"Updated"}),e.download_url&&e.download_count>0&&(0,r.jsx)(w.C,{variant:"outline",className:"text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300 border-blue-300 dark:border-blue-800 px-1.5",children:"Downloaded"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-300 mt-0.5 flex flex-wrap gap-x-2",children:[e.carrier_name&&(0,r.jsx)("span",{className:"group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-200",children:e.carrier_name}),e.policy_number&&(0,r.jsxs)("span",{className:"font-mono group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-200",children:["#",e.policy_number]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 dark:text-gray-400 mt-0.5 flex items-center gap-1",children:[(0,r.jsx)(P.Z,{className:"h-3 w-3 inline"}),S(e.created_at),e.insured_name&&(0,r.jsxs)("span",{className:"ml-2 text-blue-500 dark:text-blue-400",children:["• ",e.insured_name]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[e.download_url?(0,r.jsx)(Z.E.a,{href:e.download_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 bg-blue-100 dark:bg-blue-900/40 hover:bg-blue-200 dark:hover:bg-blue-800/60 rounded-full transition-colors duration-200 hover:text-blue-700 dark:hover:text-blue-300",title:"Download document",whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,r.jsx)(f.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}):e.file_url?(0,r.jsx)(Z.E.a,{href:e.file_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 bg-blue-100 dark:bg-blue-900/40 hover:bg-blue-200 dark:hover:bg-blue-800/60 rounded-full transition-colors duration-200 hover:text-blue-700 dark:hover:text-blue-300",title:"Download document",whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,r.jsx)(f.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}):null,e.content&&(0,r.jsx)(Z.E.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,r.jsx)(x.z,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors duration-200 hover:text-blue-700 dark:hover:text-blue-300",title:"Copy Content",onClick:()=>T(e.content),children:(0,r.jsx)(U.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})})})]})]})},e.id))})}):(0,r.jsxs)(Z.E.div,{className:"p-10 text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[(0,r.jsx)(Z.E.div,{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/40 dark:to-indigo-900/40 rounded-full flex items-center justify-center shadow-inner",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},children:(0,r.jsx)(Z.E.div,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},children:(0,r.jsx)($.Z,{className:"h-12 w-12 text-blue-400 dark:text-blue-300"})})}),(0,r.jsx)(Z.E.h3,{className:"text-lg font-medium text-gray-700 dark:text-gray-200",initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:k?"No Attachments Available":"No attachments found"}),(0,r.jsx)(Z.E.p,{className:"text-sm text-gray-500 dark:text-gray-300 mt-2 max-w-xs mx-auto",initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:k||"Upload documents or process emails to see them here"}),(0,r.jsxs)(Z.E.div,{className:"mt-6",initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:[(0,r.jsxs)(x.z,{variant:"outline",size:"sm",className:"border-blue-200 text-blue-700 hover:bg-blue-50 dark:border-blue-800 dark:text-blue-400 dark:hover:bg-blue-900/30 shadow-sm hover:shadow transition-all duration-200",onClick:C,children:[(0,r.jsx)(O.Z,{className:"h-3.5 w-3.5 mr-2"}),"Refresh"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 mt-4",children:[(0,r.jsx)(u.Z,{className:"h-3 w-3 inline mr-1"}),"Process an email notification to get started"]})]})]})})})]}),(0,r.jsx)(A.eW,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/40 dark:to-indigo-950/40 border-t border-blue-100 dark:border-blue-900/50 py-2 px-3",children:(0,r.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-300 font-medium",children:j?(0,r.jsx)("span",{className:"animate-pulse",children:"Refreshing attachments..."}):o.length>0?(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(z.Z,{className:"h-3.5 w-3.5"}),`Showing ${o.length} of ${s.length} attachments`]}):"No attachments to display"}),(0,r.jsxs)(x.z,{variant:"ghost",size:"sm",className:"text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-100 dark:text-blue-300 dark:hover:text-blue-200 dark:hover:bg-blue-900/30 transition-all duration-200",onClick:()=>{p(""),b("all"),C()},children:[(0,r.jsx)(O.Z,{className:"h-3.5 w-3.5 mr-1"}),"Refresh"]})]})})]})}function L(){let[e,t]=(0,i.useState)(""),[a,h]=(0,i.useState)(!0),[b,f]=(0,i.useState)(null),{toast:g,dismiss:p}=(0,y.pm)(),{fetchAttachments:j}=v(),k=e=>{f(e),e.content&&navigator.clipboard.writeText(e.content).then(()=>{g({title:"Content Copied",description:"Attachment content has been copied to clipboard"})}).catch(e=>{console.error("Failed to copy content:",e)})};return(0,r.jsxs)(Z.E.div,{className:"p-4 md:p-6 max-w-[1400px] mx-auto",initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.2}}},children:[(0,r.jsx)(A.Zb,{className:"border-0 shadow-md mb-6 bg-gradient-to-r from-blue-600 to-indigo-600 text-white dark:from-blue-900 dark:to-indigo-900 rounded-xl overflow-hidden",children:(0,r.jsxs)(A.Ol,{className:"pb-2 relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-grid-white/5 [mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.5))]"}),(0,r.jsx)("div",{className:"absolute right-0 top-0 h-full w-48 bg-gradient-to-l from-indigo-500/20 to-transparent"}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 relative z-10",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(A.ll,{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,r.jsx)("span",{className:"bg-white/30 p-1.5 rounded-lg backdrop-blur-sm",children:(0,r.jsx)(s.Z,{className:"h-5 w-5 text-white"})}),"Attachments & Notifications"]}),(0,r.jsx)(A.SZ,{className:"text-blue-50 mt-1 font-medium",children:"Manage email notifications and important policy documents"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)("div",{className:"relative flex-1 md:flex-none md:w-64",children:[(0,r.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400"}),(0,r.jsx)(m.I,{placeholder:"Search attachments...",className:"pl-10 w-full bg-white/90 dark:bg-gray-900/90 border-transparent dark:border-transparent focus:ring-2 focus:ring-white/30 dark:focus:ring-blue-400/30 transition-all duration-200",value:e,onChange:e=>t(e.target.value)})]}),(0,r.jsx)(Z.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsxs)(x.z,{variant:a?"secondary":"outline",className:`gap-2 ${a?"bg-white text-blue-700 hover:bg-blue-50":"border-white/30 text-white hover:bg-blue-700/20"} transition-all duration-200`,onClick:()=>h(!0),children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),"Process Email"]})}),(0,r.jsx)(Z.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsxs)(x.z,{variant:a?"outline":"secondary",className:`gap-2 ${a?"border-white/30 text-white hover:bg-blue-700/20":"bg-white text-blue-700 hover:bg-blue-50"} transition-all duration-200`,onClick:()=>h(!1),children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),"View History"]})})]})]})]})}),(0,r.jsx)(I.M,{mode:"wait",children:a?(0,r.jsxs)(Z.E.div,{className:"grid grid-cols-1 md:grid-cols-12 gap-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[(0,r.jsx)("div",{className:"md:col-span-5",children:(0,r.jsx)(V,{})}),(0,r.jsx)("div",{className:"md:col-span-7",children:(0,r.jsxs)(A.Zb,{className:"border-blue-200 shadow-lg bg-gradient-to-b from-white to-blue-50/40 dark:from-gray-900 dark:to-blue-950/20 overflow-hidden rounded-xl",children:[(0,r.jsxs)(A.Ol,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 border-b border-blue-400 dark:border-blue-800 pb-3 text-white relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-grid-white/5 [mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.6))]"}),(0,r.jsx)("div",{className:"absolute right-0 top-0 h-full w-24 bg-gradient-to-l from-indigo-500/20 to-transparent"}),(0,r.jsxs)("div",{className:"flex items-start z-10 relative",children:[(0,r.jsx)("div",{className:"mr-4 p-2 bg-white/30 rounded-lg shadow-inner backdrop-blur-sm",children:(0,r.jsx)(d.Z,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(A.ll,{className:"text-lg font-medium text-white",children:"Process Email Notification"}),(0,r.jsx)(A.SZ,{className:"text-blue-50 mt-1",children:"Simply copy the entire content of a notification email (like Draft Returns) and paste it below. The system will automatically extract all information and update the related application."})]})]})]}),(0,r.jsx)(A.aY,{className:"pt-6",children:(0,r.jsx)(T,{onSuccess:()=>{g({title:"Success",description:"Email processed successfully! All related applications have been updated.",duration:5e3}),f(null),j()}})}),(0,r.jsx)(A.eW,{className:"bg-blue-50 dark:bg-blue-950/30 border-t border-blue-100 dark:border-blue-900/50 py-3 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[(0,r.jsx)(s.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Your data is processed securely and never shared with third parties"})]})})]})})]},"upload-form"):(0,r.jsx)(Z.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:(0,r.jsxs)(A.Zb,{className:"border shadow-md bg-white dark:bg-gray-950 overflow-hidden rounded-xl",children:[(0,r.jsxs)(A.Ol,{className:"pb-0 border-b bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-800 dark:to-indigo-800 text-white relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-grid-white/5 [mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.6))]"}),(0,r.jsx)("div",{className:"absolute right-0 top-0 h-full w-32 bg-gradient-to-l from-indigo-500/20 to-transparent"}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 pb-2 relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-white/30 rounded-lg backdrop-blur-sm",children:(0,r.jsx)(c.Z,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(A.ll,{className:"text-lg font-medium text-white",children:"Attachment History"}),(0,r.jsx)(A.SZ,{className:"text-sm text-blue-50 font-medium",children:"Browse and manage your past notifications and documents"})]})]}),(0,r.jsx)(M.mQ,{defaultValue:"all",className:"w-full md:w-auto",children:(0,r.jsxs)(M.dr,{className:"mb-0 bg-white/20 dark:bg-gray-800/30 p-1 shadow-sm border border-white/20 dark:border-gray-700/30 backdrop-blur-sm rounded-lg",children:[(0,r.jsx)(M.SP,{value:"all",className:"font-medium data-[state=active]:bg-white data-[state=active]:text-blue-700 dark:data-[state=active]:bg-white dark:data-[state=active]:text-blue-700 text-white rounded-md transition-all duration-200",children:"All"}),(0,r.jsx)(M.SP,{value:"americo",className:"font-medium data-[state=active]:bg-white data-[state=active]:text-blue-700 dark:data-[state=active]:bg-white dark:data-[state=active]:text-blue-700 text-white rounded-md transition-all duration-200",children:"Americo"}),(0,r.jsx)(M.SP,{value:"mutual",className:"font-medium data-[state=active]:bg-white data-[state=active]:text-blue-700 dark:data-[state=active]:bg-white dark:data-[state=active]:text-blue-700 text-white rounded-md transition-all duration-200",children:"Mutual"}),(0,r.jsx)(M.SP,{value:"aetna",className:"font-medium data-[state=active]:bg-white data-[state=active]:text-blue-700 dark:data-[state=active]:bg-white dark:data-[state=active]:text-blue-700 text-white rounded-md transition-all duration-200",children:"Aetna"}),(0,r.jsx)(M.SP,{value:"corebridge",className:"font-medium data-[state=active]:bg-white data-[state=active]:text-blue-700 dark:data-[state=active]:bg-white dark:data-[state=active]:text-blue-700 text-white rounded-md transition-all duration-200",children:"CoreBridge"})]})})]})]}),(0,r.jsxs)(A.aY,{className:"p-0",children:[(0,r.jsx)(M.nU,{value:"all",className:"mt-0 py-0 px-0",children:(0,r.jsx)(N,{onSelect:k})}),(0,r.jsx)(M.nU,{value:"americo",className:"mt-0 py-0 px-0",children:(0,r.jsx)(N,{onSelect:k,carrierId:"Americo"})}),(0,r.jsx)(M.nU,{value:"mutual",className:"mt-0 py-0 px-0",children:(0,r.jsx)(N,{onSelect:k,carrierId:"Mutual of Omaha"})}),(0,r.jsx)(M.nU,{value:"aetna",className:"mt-0 py-0 px-0",children:(0,r.jsx)(N,{onSelect:k,carrierId:"Aetna"})}),(0,r.jsx)(M.nU,{value:"corebridge",className:"mt-0 py-0 px-0",children:(0,r.jsx)(N,{onSelect:k,carrierId:"CoreBridge"})})]})]})},"history-view")}),(0,r.jsx)(I.M,{children:b&&(0,r.jsx)(Z.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3,ease:"easeInOut"},children:(0,r.jsxs)(A.Zb,{className:"mt-6 border border-gray-200 dark:border-gray-800 shadow-xl overflow-hidden bg-white dark:bg-gray-950 rounded-xl",children:[(0,r.jsxs)(A.Ol,{className:"py-4 bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-800 dark:to-indigo-800 text-white border-b border-blue-500 dark:border-blue-700 flex flex-row justify-between items-center space-y-0 pb-4 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-grid-white/5 [mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.5))]"}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)(A.ll,{className:"font-semibold text-white flex items-center gap-2",children:[(0,r.jsx)("span",{className:"bg-white/30 p-1.5 rounded-lg backdrop-blur-sm",children:(0,r.jsx)(s.Z,{className:"h-5 w-5 text-white"})}),"Attachment Details"]}),(0,r.jsxs)(A.SZ,{className:"text-blue-50 mt-1 flex items-center font-medium",children:[b.title,b.carrier_name&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mx-2 text-blue-200/60",children:"•"}),(0,r.jsx)(w.C,{variant:"outline",className:"ml-1 font-normal bg-white/10 text-white border-white/20 backdrop-blur-sm",children:b.carrier_name})]})]})]}),(0,r.jsx)(x.z,{variant:"outline",size:"sm",onClick:()=>f(null),className:"ml-auto text-white border-white/20 hover:bg-white/10 backdrop-blur-sm relative z-10",children:"Close"})]}),(0,r.jsx)(A.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),"Email Content"]}),(0,r.jsx)("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-900/50 whitespace-pre-wrap font-mono text-sm max-h-[400px] overflow-auto shadow-inner border-gray-200 dark:border-gray-800 transition-all duration-200 hover:shadow-md dark:text-gray-100",children:b.content||"No content available for this attachment."})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-sm font-medium mb-3 text-gray-700 dark:text-gray-200 pb-2 border-b flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"}),"Extracted Information"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[b.policy_number&&(0,r.jsxs)(Z.E.div,{className:"flex flex-col",initial:{opacity:0,x:5},animate:{opacity:1,x:0},transition:{delay:.1},children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Policy Number"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:b.policy_number})]}),b.reason&&(0,r.jsxs)(Z.E.div,{className:"flex flex-col",initial:{opacity:0,x:5},animate:{opacity:1,x:0},transition:{delay:.2},children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Reason"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:b.reason})]}),b.amount&&(0,r.jsxs)(Z.E.div,{className:"flex flex-col",initial:{opacity:0,x:5},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Amount"}),(0,r.jsxs)("span",{className:"font-medium text-emerald-600 dark:text-emerald-300",children:["$",b.amount.toFixed(2)]})]}),b.effective_date&&(0,r.jsxs)(Z.E.div,{className:"flex flex-col",initial:{opacity:0,x:5},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Effective Date"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(b.effective_date).toLocaleDateString()})]}),b.insured_name&&(0,r.jsxs)(Z.E.div,{className:"flex flex-col",initial:{opacity:0,x:5},animate:{opacity:1,x:0},transition:{delay:.5},children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Insured Name"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:b.insured_name})]}),b.return_date&&(0,r.jsxs)(Z.E.div,{className:"flex flex-col",initial:{opacity:0,x:5},animate:{opacity:1,x:0},transition:{delay:.6},children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Return Date"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(b.return_date).toLocaleDateString()})]}),b.second_return_date&&(0,r.jsxs)(Z.E.div,{className:"flex flex-col",initial:{opacity:0,x:5},animate:{opacity:1,x:0},transition:{delay:.7},children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Second Return Date"}),(0,r.jsx)("span",{className:"font-medium text-red-600 dark:text-red-300",children:new Date(b.second_return_date).toLocaleDateString()})]}),b.product_name&&(0,r.jsxs)(Z.E.div,{className:"flex flex-col",initial:{opacity:0,x:5},animate:{opacity:1,x:0},transition:{delay:.8},children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Product"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:b.product_name})]})]}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-800",children:b.download_url?(0,r.jsx)(Z.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsx)(x.z,{className:"w-full gap-2 bg-blue-600 hover:bg-blue-700 text-white transition-all duration-200",asChild:!0,children:(0,r.jsxs)("a",{href:b.download_url,target:"_blank",rel:"noopener noreferrer",children:[(0,r.jsx)(DownloadCloud,{className:"h-4 w-4"}),"Download Document"]})})}):b.file_url?(0,r.jsx)(Z.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsx)(x.z,{className:"w-full gap-2 bg-blue-600 hover:bg-blue-700 text-white transition-all duration-200",asChild:!0,children:(0,r.jsxs)("a",{href:b.file_url,target:"_blank",rel:"noopener noreferrer",children:[(0,r.jsx)(DownloadCloud,{className:"h-4 w-4"}),"Download Document"]})})}):null})]})]})})]})})})]})}},79055:function(e,t,a){"use strict";a.d(t,{C:function(){return l}});var r=a(57437);a(2265);var i=a(13027),s=a(49354);let n=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...i}=e;return(0,r.jsx)("div",{className:(0,s.cn)(n({variant:a}),t),...i})}},89733:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return d}});var r=a(57437),i=a(2265),s=a(71538),n=a(13027),l=a(49354);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:a,variant:i,size:n,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:i,size:n,className:a})),ref:t,...c})});d.displayName="Button"},48185:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var r=a(57437),i=a(2265),s=a(49354);let n=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...i})});n.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...i})});l.displayName="CardHeader";let o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...i})});o.displayName="CardTitle";let d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...i})});d.displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...i})});c.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...i})});u.displayName="CardFooter"},77209:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var r=a(57437),i=a(2265),s=a(49354);let n=i.forwardRef((e,t)=>{let{className:a,type:i,...n}=e;return(0,r.jsx)("input",{type:i,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},86864:function(e,t,a){"use strict";a.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return l},nU:function(){return c}});var r=a(57437),i=a(2265),s=a(62447),n=a(49354);let l=s.fC,o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...i})});o.displayName=s.aV.displayName;let d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(s.xz,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...i})});d.displayName=s.xz.displayName;let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(s.VY,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...i})});c.displayName=s.VY.displayName},4919:function(e,t,a){"use strict";a.d(t,{g:function(){return n}});var r=a(57437),i=a(2265),s=a(49354);let n=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});n.displayName="Textarea"},78068:function(e,t,a){"use strict";a.d(t,{Am:function(){return u},pm:function(){return m}});var r=a(2265);let i=0,s=new Map,n=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(i=(i+1)%Number.MAX_VALUE).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},82157:function(e,t,a){"use strict";a.d(t,{e:function(){return i}});var r=a(64392);let i=()=>(0,r.createClientComponentClient)({supabaseUrl:"https://iufyuzmigirugcufrtvt.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml1Znl1em1pZ2lydWdjdWZydHZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMzQxMjcsImV4cCI6MjA2MDYxMDEyN30.V38OGEX1Oy3gFfu5ClGWRk3xYAhb_DVr-5ojOQZ1UfU"});(0,r.createClientComponentClient)({supabaseUrl:"https://iufyuzmigirugcufrtvt.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml1Znl1em1pZ2lydWdjdWZydHZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMzQxMjcsImV4cCI6MjA2MDYxMDEyN30.V38OGEX1Oy3gFfu5ClGWRk3xYAhb_DVr-5ojOQZ1UfU"})},49354:function(e,t,a){"use strict";a.d(t,{cn:function(){return s}});var r=a(44839),i=a(96164);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.m6)((0,r.W)(t))}}},function(e){e.O(0,[4392,4868,9776,921,1792,2879,3804,6169,2971,7023,1744],function(){return e(e.s=53418)}),_N_E=e.O()}]);