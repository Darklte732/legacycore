(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5439],{7475:function(e,a,t){Promise.resolve().then(t.bind(t,37380))},37380:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return i}});var r=t(57437),n=t(2265),o=t(87138),s=t(64392);function i(){let[e,a]=(0,n.useState)("Setting up manager mode..."),[t,i]=(0,n.useState)(null),c=(0,s.createClientComponentClient)();return(0,n.useEffect)(()=>{(async function(){try{document.cookie="test_role=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="force_manager_view=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="admin_redirected=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",localStorage.clear(),await new Promise(e=>setTimeout(e,100)),document.cookie="test_role=manager; path=/; max-age=86400",document.cookie="force_manager_view=true; path=/; max-age=86400";let{data:{session:e}}=await c.auth.getSession();e?(await c.auth.updateUser({data:{role:"manager"}}),await c.from("profiles").update({role:"manager"}).eq("id",e.user.id),a("Manager mode set successfully! Redirecting..."),setTimeout(()=>{window.location.href="/manager/dashboard?t="+Date.now()},1500)):i("No active session. Please login first.")}catch(e){console.error("Error setting manager mode:",e),i("Failed to set manager mode: "+(e instanceof Error?e.message:String(e)))}})()},[]),(0,r.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center p-6 bg-gray-50",children:(0,r.jsxs)("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-md",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"LegacyCore Manager Mode"}),(0,r.jsx)("div",{className:`p-4 mb-6 rounded ${t?"bg-red-50 text-red-700":"bg-blue-50 text-blue-700"}`,children:t||e}),!t&&(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Switching to manager mode and fixing UI issues..."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(o.default,{href:"/manager/dashboard",className:"block w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white text-center rounded",children:"Go to Manager Dashboard"}),(0,r.jsx)(o.default,{href:"/login",className:"block w-full py-2 px-4 bg-gray-600 hover:bg-gray-700 text-white text-center rounded",children:"Back to Login"})]})]})})}}},function(e){e.O(0,[4392,7138,2971,7023,1744],function(){return e(e.s=7475)}),_N_E=e.O()}]);